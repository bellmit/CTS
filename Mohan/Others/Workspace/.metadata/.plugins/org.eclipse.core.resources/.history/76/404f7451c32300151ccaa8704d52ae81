package com.acs.enterprise.mmis.operations.tpladministration.view.bean;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.text.DateFormat;
import java.text.Format;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.HashMap;
import java.util.Hashtable;
import java.util.Iterator;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Properties;
import java.util.ResourceBundle;
import java.util.Set;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.component.UIViewRoot;
import javax.faces.component.html.HtmlSelectOneMenu;
import javax.faces.component.html.HtmlSelectOneRadio;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;
import javax.portlet.PortletRequest;
import javax.portlet.PortletSession;
import javax.rmi.PortableRemoteObject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.beanutils.BeanUtils;
import org.apache.commons.lang.StringUtils;

import com.acs.enterprise.mmis.member.common.vo.MemberSearchCriteriaVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPMemberDetailVO;
import com.acs.enterprise.common.base.application.exception.EnterpriseBaseBusinessException;
import com.acs.enterprise.common.base.common.domain.Attachment;
import com.acs.enterprise.common.base.common.vo.EnterpriseSearchResultsVO;
import com.acs.enterprise.common.base.view.bean.EnterpriseBaseControllerBean;
import com.acs.enterprise.common.cots.CommonLetter.view.bean.LettersAndResponsesControllerBean;
import com.acs.enterprise.common.cots.CommonLetter.view.bean.LettersAndResponsesDataBean;
import com.acs.enterprise.common.cots.edms.application.common.vo.EDMSQuickSearchResultsVO;
import com.acs.enterprise.common.cots.edms.application.common.vo.EnterpriseEDMSSearchCriteriaVO;
import com.acs.enterprise.common.cots.edms.application.common.vo.EnterpriseEDMSSearchResultsVO;
import com.acs.enterprise.common.cots.edms.application.exception.EDMSQuickSearchBusinessException;
import com.acs.enterprise.common.cots.edms.delegate.EDMSQuickSearchProcessDelegate;
import com.acs.enterprise.common.cots.edms.util.EDMSURLGeneratorImpl;
import com.acs.enterprise.common.cots.lettergeneration.exception.LetterGenerationException;
import com.acs.enterprise.common.cots.lettergeneration.vo.LetterGenerationInputVO;
import com.acs.enterprise.common.cots.util.GlobalLetterConstants;
import com.acs.enterprise.common.internalmessage.common.helper.InternalMessageConstants;
import com.acs.enterprise.common.lineitemaudit.common.helper.AuditDataFilter;
import com.acs.enterprise.common.lineitemaudit.common.helper.AuditableField;
import com.acs.enterprise.common.lock.common.delegate.LockDelegete;
import com.acs.enterprise.common.program.administration.application.exception.ReferenceServiceRequestException;
import com.acs.enterprise.common.program.administration.application.exception.SystemListNotFoundException;
import com.acs.enterprise.common.program.administration.application.exception.SystemParameterNotFoundException;
import com.acs.enterprise.common.program.administration.common.delegate.ReferenceServiceDelegate;
import com.acs.enterprise.common.program.administration.common.delegate.SystemListDelegate;
import com.acs.enterprise.common.program.administration.common.delegate.SystemParameterDelegate;
import com.acs.enterprise.common.program.administration.common.domain.SystemParameter;
import com.acs.enterprise.common.program.administration.common.domain.SystemParameterDetail;
import com.acs.enterprise.common.program.administration.common.vo.InputCriteria;
import com.acs.enterprise.common.program.administration.common.vo.ReferenceDataListVO;
import com.acs.enterprise.common.program.administration.common.vo.ReferenceDataSearchVO;
import com.acs.enterprise.common.program.administration.common.vo.ReferenceServiceVO;
import com.acs.enterprise.common.program.administration.common.vo.SystemParameterInfo;
import com.acs.enterprise.common.program.administration.util.helper.FunctionalAreaConstants;
import com.acs.enterprise.common.program.administration.util.helper.ReferenceServiceDataConstants;
import com.acs.enterprise.common.program.commonentities.view.exception.CommonEntityUIException;
import com.acs.enterprise.common.program.commonentities.view.vo.NoteSetVO;
import com.acs.enterprise.common.program.contactmanagement.application.exception.CorrespondenceRecordFetchBusinessException;
import com.acs.enterprise.common.program.contactmanagement.application.exception.CorrespondenceRecordUpdateBusinessException;
import com.acs.enterprise.common.program.contactmanagement.util.helper.ContactManagementConstants;
import com.acs.enterprise.common.rif.rules.delegate.RulesDelegate;
import com.acs.enterprise.common.security.services.fieldlevelservice.FieldAccessControl;
import com.acs.enterprise.common.security.services.fieldlevelservice.SecurityFLSServiceException;
import com.acs.enterprise.common.security.services.userprofile.EnterpriseUserProfile;
import com.acs.enterprise.common.util.config.ConfigurationLoader;
import com.acs.enterprise.common.util.helper.DateUtility;
import com.acs.enterprise.common.util.helper.EnterpriseMessageConstants;
import com.acs.enterprise.common.util.helper.MessageUtil;
import com.acs.enterprise.common.util.helper.VirusScanUtility;	
import com.acs.enterprise.common.util.helper.intf.URLGenerator;
import com.acs.enterprise.common.util.logger.EnterpriseLogFactory;
import com.acs.enterprise.common.util.logger.EnterpriseLogger;
import com.acs.enterprise.common.util.rif.rules.exception.RulesDelegateException;
import com.acs.enterprise.common.util.rif.rules.vo.RulesResultVO;
import com.acs.enterprise.common.util.validator.EnterpriseCommonValidator;
import com.acs.enterprise.common.view.vo.CommonMemberDetailsVO;
import com.acs.enterprise.mmis.operations.tpladministration.application.exception.TPLHIPPBusinessException;
import com.acs.enterprise.mmis.operations.tpladministration.application.exception.TPLHIPPBusinessProcessException;
import com.acs.enterprise.mmis.operations.tpladministration.application.exception.TPLPolicyBusinessException;
import com.acs.enterprise.mmis.operations.tpladministration.common.delegate.TPLHIPPDelegate;
import com.acs.enterprise.mmis.operations.tpladministration.common.delegate.TPLHIPPProcessDelegate;
import com.acs.enterprise.mmis.operations.tpladministration.common.delegate.TPLPolicyDelegate;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.HIPPAttachment;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.HIPPCalcIndividual;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.TPLGroupPolicy;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.TPLHIPPCBA;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.TPLHippDetail;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.TPLHippDtl;
import com.acs.enterprise.mmis.operations.tpladministration.common.domain.TPLHippPayment;
//import com.acs.enterprise.mmis.operations.tpladministration.common.vo.AttachmentsVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.MemberDetailsListVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPApplicantMemberPolicyVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPCBAVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPCaseVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPCorrespondenceVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPDetailsVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPMemberDetailVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPPayeeInfoVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPPaymentVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPSearchCriteriaVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPSearchResultVO;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.TPLHIPPWokerVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.ACSComparator;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.CommonEntityValidator;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.MemberUIConstants;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLAdministrationConstants;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLAdministrationHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLContactManagementHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLHIPPConstants;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLHIPPConversionHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLHIPPValidateHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLMaintainContactManagementUIConstants;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLNotesHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLPolicyConversionHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLRecoveryCaseConstants;
import com.acs.enterprise.mmis.operations.tpladministration.view.helper.TPLRoutingDOConvertor;
import com.acs.enterprise.mmis.operations.tpladministration.view.validator.TPLHIPPCommonValidator;
import com.acs.enterprise.mmis.operations.tpladministration.view.validator.TPLHIPPValidatorHelper;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.AttachmentsVO;

import com.acs.enterprise.mmis.operations.tpladministration.view.vo.AddressVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.EmployerCommonEntityVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.EmployerVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.PhoneVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.PolicyCommonEntityVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.PolicyHolderVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.PolicyVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.TPLHIPPEffectivePeriodVO;
import com.acs.enterprise.mmis.operations.tpladministration.view.vo.TPLHIPPPaymentInfoVO;
import com.acs.enterprise.ui.javax.faces.component.auditHistory.AuditHistoryTable;
import com.acs.timing.TraceTimeManager;
import com.acs.timing.TraceToken;
import com.ibm.faces.component.html.HtmlFileupload;
import com.ibm.faces.fileupload.util.ContentElement;
import com.acs.enterprise.mmis.operations.tpladministration.common.vo.CoveredIndividualVO;


public class TPLHIPPControllerBean extends EnterpriseBaseControllerBean
{

	/** This holds no records found message */
	static final String INVOICE_SEARCH_NO_RECORDS_FOUND = "error.NoRecordsforSearchCriteria";

	/** This constant holds the error message occured unexpectedly */
	static final String INVOICE_COMMON_ERROR = "MEM_COMMON_ERR";
	

	
	/* Added constant PAGE_VIEW_PORTLET_ATTRIBUTE as part of P1 PMD Violation */
	
	static final String PAGE_VIEW_PORTLET_ATTRIBUTE = "com.ibm.faces.portlet.page.view";
	
	/* Added constant ABC_INSTANCE_STRNG as part of P1 PMD Violation */
	
	static final String ABC_INSTANCE_STRNG ="abc";
	
	//Grey Mode Code Starts Here...
	/*PMD Fix removed unused private field - changed by 454990*/
	/*private String link2Show;*/
	private static final String RULE_EXPIRED = "Rule Expired::::";

	

	
	/* Added constant TPL_HIPP_EFFECTIVE_PAGE_ID as part of P1 PMD Violation */
	
	static final String TPL_HIPP_EFFECTIVE_PAGE_ID = "tplHIPPEffectivePeriodFocus";
	
	private static final String RULESDELEGATE_EXCEPTION = "RulesDelegateException::::";
	
	private static final String RULE_EXECUTION_ENDED = "Rule Execution Ended";

	
	/* Added constant ERROR_PROCESSING_THE_REQUEST as part of P1 PMD Violation */
	
	static final String ERROR_PROCESSING_THE_REQUEST ="There was an error processing the request. Please retry the transaction.";
	
	/* Added constant BEGIN_DATE as part of P1 PMD Violation */
	


	

	/* Added constant SUCCESS as part of P1 PMD Violation */
	
	static final String SUCCESS ="success";
	

	
/* Added constant TRUE as part of P1 PMD Violation */
	
	static final String TRUE ="true";
	

	
/* Added constant FALSE as part of P1 PMD Violation */
	
	static final String FALSE ="false";
	
/* Added constant TPL_HIPP_ATTCHMENT_FOCUS as part of P1 PMD Violation */
	
	static final String TPL_HIPP_ATTCHMENT_FOCUS ="tplHIPPAttachmentFocus";
	

	// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		private static final String DATE_FORMAT="MM/dd/yyyy";
		private static final String SUCCESS_STR="success";
		private static final String TRUE_STR="true";
		private static final String FALSE_STR="false";
		private static final String PORTLET_VIEW="com.ibm.faces.portlet.page.view";
		private static final String CASE_BEGIN_DATE="caseBeginDate";
		private static final String TPLHIPPEFFECTIVEPERIODFOCUS="tplHIPPEffectivePeriodFocus";
		private static final String ABC_STR="abc";
		private static final String MEMBER_ID="MemberID";
		private static final String CASE_END_DATE="caseEndDate";
		private static final String HIPP_CASE_STATUS="HIPPCaseStatus";
		private static final String HIPP_EFFECTIVE_STATUS="hippEffectiveStatus";
		private static final String BEGIN_DATE="beginDate";
		private static final String END_DATE="endDate";
		private static final String ROW_INDEX="rowIndex";
		private static final String TPL_HIPP_ATTACHMENT_FOCUS="tplHIPPAttachmentFocus";
		private static final String TPL_ADD_PAYEE_FOCUS="tplAddPayeeFocus";
		private static final String ENTITY_ID="entityId";
		private static final String PARTIAL="partial";
		private static final String FULL="full";
		private static final String FILE_SEPARATOR="file.separator";
		private static final String MESSAGE_STR="There was an error processing the request. Please retry the transaction.";
		private SimpleDateFormat dateformatYYYYMMDD = new SimpleDateFormat(DATE_FORMAT);
		private static String rule_time="300";
	/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
	// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	
	
	//Grey Mode Code Starts Here...
	
	/* Commenting link2Show as part of p1 PMD violation */
	//private String link2Show;


	

	/**
	 * Flag to enable and disable the ascending and descending icons
	 */
	private boolean[] searchColumnSortFlag = new boolean[] { true, true, true,
			true, true, true, true, true, true, true, true, true, true, true,
			true, true, true, true, true, true, true, true, true, true };

	/**
	 * Flag to enable and disable the ascending and descending icons
	 */
	private boolean[] memberDetailsColumnSortFlag = new boolean[] { true, true,
			true, true, true, true, true, true, true, true, true, true, true,
			true, true, true, true, true, true, true, true, true, true, true };

	/**
	 * Flag to enable and disable the ascending and descending icons
	 */
	private boolean[] hippEffectivePeriodColumnSortFlag = new boolean[] { true,
			true, true, true, true, true, true, true, true, true, true, true,
			true, true, true, true, true, true, true, true, true, true, true,
			true };

	/**
	 * Flag to enable and disable the ascending and descending icons
	 */
	private boolean[] memberPolicyColumnSortFlag = new boolean[] { true, true,
			true, true, true, true, true, true, true, true, true, true, true,
			true, true, true, true, true, true, true, true, true, true, true };

	/**
	 * Flag to enable and disable the ascending and descending icons
	 */
	private boolean[] letterRequestColumnSortFlag = new boolean[] { true, true,
			true, true, true, true, true, true, true, true, true, true, true,
			true, true, true, true, true, true, true, true, true, true, true };
	

	/** constant declaration for BatchControlAddControllerBean. */
	/*
	 * Commented as part of P1 Violation
	 */
	//private String className = this.getClass().getName();
	
	static final EnterpriseLogger logger = EnterpriseLogFactory.getLogger(TPLHIPPControllerBean.class);
	
	/**
	 * Constructor
	 */
	public TPLHIPPControllerBean() {
		//facesContext = FacesContext.getCurrentInstance();
	}

	

	
	/**
	 * This method is used to search HIPP Case based on search criteria.
	 * 
	 * @param searchCriteria
	 *            ActionEvent
	 * @return SUCCESS
	 * @generated "UML to Java V5.0
	 *            (com.ibm.xtools.transform.uml2.java5.internal.UML2JavaTransform)"
	 */
	public String searchHIPPCase(ActionEvent searchCriteria) 
	{
		logger.info("TPLHIPPControllerBean::searchHIPPCase:: START");
		TPLHIPPSearchCriteriaVO tplHIPPSearchCriteriaVO =null;
		String selectedPolicy = "";
		String policyHolderSSN = null;
		String memberSSN = null;
		try {
			
			final String searchOption = (String) searchCriteria.getComponent()
					.getAttributes().get(TPLAdministrationConstants.HIPPSEARCH);
			
			TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
			tplHIPPSearchDataBean.setSearchResultList(null);
			tplHIPPSearchDataBean.setSearchRowIndex(0);
			tplHIPPSearchDataBean.setSearchoption(searchOption);
			tplHIPPSearchCriteriaVO = tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO();
			String searchType = TPLAdministrationConstants.EMPTY, policySearchType = TPLAdministrationConstants.EMPTY;
			
			if (TPLHIPPConstants.TPL_HIPP_MEMBER.equalsIgnoreCase(searchOption)) 
			{
				searchType = tplHIPPSearchCriteriaVO.getSearchByMember();
				//for defect ESPRD00867459
				if(tplHIPPSearchDataBean.getMemberLName()!=null && 
						tplHIPPSearchDataBean.getMemberLName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMES)){
					tplHIPPSearchCriteriaVO.setMemberLastNameStartsWith(true);
					tplHIPPSearchCriteriaVO.setMemberLastNamePhonetic(false);
				} else { 
					tplHIPPSearchCriteriaVO.setMemberLastNameStartsWith(false);
				}
			    //for defect ESPRD00867459
				if(tplHIPPSearchDataBean.getMemberLName()!=null && 
						tplHIPPSearchDataBean.getMemberLName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMEP)){
					tplHIPPSearchCriteriaVO.setMemberLastNamePhonetic(true);
					tplHIPPSearchCriteriaVO.setMemberLastNameStartsWith(false);
				} else {
					tplHIPPSearchCriteriaVO.setMemberLastNamePhonetic(false);
				}
				if(tplHIPPSearchDataBean.getMemberFName()!=null &&tplHIPPSearchDataBean.getMemberFName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMES)){
					tplHIPPSearchCriteriaVO.setMemberFirstNameStartsWith(true);
				} else {
					tplHIPPSearchCriteriaVO.setMemberFirstNameStartsWith(false);
				}
				//for defect ESPRD00867459
				if(tplHIPPSearchDataBean.getMemberFName()!=null && tplHIPPSearchDataBean.getMemberFName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMEP)){
					tplHIPPSearchCriteriaVO.setMemberFirstNamePhonetic(true);
				} else {
					tplHIPPSearchCriteriaVO.setMemberFirstNamePhonetic(false);
				}
			    tplHIPPSearchCriteriaVO.setSearchType(searchType);
			} else if (TPLHIPPConstants.TPL_HIPP_CASENUMBER.equalsIgnoreCase(searchOption)) {
				searchType = tplHIPPSearchCriteriaVO.getSearchByCaseNum();
				tplHIPPSearchCriteriaVO.setSearchType(searchType);
			} else if (TPLHIPPConstants.TPL_HIPP_POLICYHOLDER.equalsIgnoreCase(searchOption)) {
				searchType = tplHIPPSearchCriteriaVO.getSearchByPolicyholder();
				policySearchType = searchType+"policy";
				// Defect Fix ESPRD00649511
				selectedPolicy = tplHIPPSearchCriteriaVO.getSearchByPolicyholder();
				if(tplHIPPSearchDataBean.getPolicyHolderFName()!=null 
						&& StringUtils.isNotBlank(tplHIPPSearchDataBean.getPolicyHolderFName()))
				{
					if(tplHIPPSearchDataBean.getPolicyHolderFName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMES))
					{
						tplHIPPSearchCriteriaVO.setPolicyHolderFirstNameStartsWith(true);
						tplHIPPSearchCriteriaVO.setPolicyHolderFirstNamePhonetic(false);
					}
					else if(tplHIPPSearchDataBean.getPolicyHolderFName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMEP))
					{
						tplHIPPSearchCriteriaVO.setPolicyHolderFirstNamePhonetic(true);
						tplHIPPSearchCriteriaVO.setPolicyHolderFirstNameStartsWith(false);
					} else {
						tplHIPPSearchCriteriaVO.setPolicyHolderFirstNameStartsWith(false);
						tplHIPPSearchCriteriaVO.setPolicyHolderFirstNamePhonetic(false);
					}
				}
				if(tplHIPPSearchDataBean.getPolicyHolderLName()!=null 
						&& StringUtils.isNotBlank(tplHIPPSearchDataBean.getPolicyHolderLName()))
				{
					if(tplHIPPSearchDataBean.getPolicyHolderLName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMES))
					{
						tplHIPPSearchCriteriaVO.setPolicyHolderLastNameStartsWith(true);
						tplHIPPSearchCriteriaVO.setPolicyHolderLastNamePhonetic(false);
					}
					else if(tplHIPPSearchDataBean.getPolicyHolderLName().equals(TPLAdministrationConstants.SEARCH_MEMBER_NAMEP))
					{
						tplHIPPSearchCriteriaVO.setPolicyHolderLastNamePhonetic(true);
						tplHIPPSearchCriteriaVO.setPolicyHolderLastNameStartsWith(false);
					} else {
						tplHIPPSearchCriteriaVO.setPolicyHolderLastNameStartsWith(false);
						tplHIPPSearchCriteriaVO.setPolicyHolderLastNamePhonetic(false);
					}
				}
				tplHIPPSearchCriteriaVO.setSearchType(policySearchType);
				tplHIPPSearchCriteriaVO.setSearchByPolicyholder(selectedPolicy);
			} else if (TPLHIPPConstants.TPL_HIPP_CARRIER.equalsIgnoreCase(searchOption)) {
				searchType = tplHIPPSearchCriteriaVO.getSearchByCarrier();
				tplHIPPSearchCriteriaVO.setSearchType(searchType);
			} else if (TPLHIPPConstants.TPL_HIPP_POLICYNUMBER.equalsIgnoreCase(searchOption)) {
				searchType = searchOption;
				tplHIPPSearchCriteriaVO.setSearchType(searchType);
			} else if (TPLHIPPConstants.TPL_HIPP_WORKER.equalsIgnoreCase(searchOption)) {
				searchType = tplHIPPSearchCriteriaVO.getSearchByWorker();
				tplHIPPSearchCriteriaVO.setSearchType(searchType);				
			}
			//ESPRD00903946
			tplHIPPSearchCriteriaVO.setSortColumn("getApplicantSysID");
			tplHIPPSearchCriteriaVO.setAscending(true);
			tplHIPPSearchCriteriaVO.setRowsPerPage(0);
			EnterpriseSearchResultsVO enterpriseSearchResultsVO = null;
			if (validateHippSearch()) 
			{
				boolean[] sortFlagTemp = new boolean[] { true, true, true, true, true, true,
				 		true, true, true, true, true, true, true, true, true, true, true, true};
				try 
				{
					 TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
					 // Added for Defect Fix ESPRD00654345					
					 if(tplHIPPSearchCriteriaVO.getPolicyHolderSSN() != null) {
						 policyHolderSSN = tplHIPPSearchCriteriaVO.getPolicyHolderSSN().replaceAll(TPLAdministrationConstants.HYPHEN, TPLAdministrationConstants.EMPTY);
						 tplHIPPSearchCriteriaVO.setPolicyHolderSSN(policyHolderSSN);
					 }// End
					 if(tplHIPPSearchCriteriaVO.getMemberSSN()!=null) {
						 memberSSN=tplHIPPSearchCriteriaVO.getMemberSSN().replaceAll(TPLAdministrationConstants.HYPHEN, TPLAdministrationConstants.EMPTY);
						 tplHIPPSearchCriteriaVO.setMemberSSN(memberSSN);
					 }
					 tplHIPPSearchCriteriaVO.setStartIndex(0);
					 tplHIPPSearchCriteriaVO.setRowsPerPage(TPLAdministrationConstants.ITEMS_PER_PAGE);
					 enterpriseSearchResultsVO = tplHIPPDelegate.searchHIPPCase(searchType, tplHIPPSearchCriteriaVO);
					 ArrayList resultList = enterpriseSearchResultsVO.getSearchResults();
					 if (resultList.size() > 1) {
						 sortFlagTemp[0] = false;	
						 tplHIPPSearchDataBean.setSearchColumnSortFlag(sortFlagTemp);
						 procesSearchResultForDisplay(tplHIPPSearchDataBean,enterpriseSearchResultsVO);
						 setRenderingForSearchDisplay(tplHIPPSearchDataBean,enterpriseSearchResultsVO,false);
					 } else if(resultList.size() == 1) {	
	                	ActionRequest request = (ActionRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
						TPLHIPPSearchResultVO tplHIPPSearchResultVO = (TPLHIPPSearchResultVO) resultList.get(0);
						//CR640833
						TPLAdministrationHelper administrationHelper = new TPLAdministrationHelper();
						administrationHelper.logEventInquiry(TPLAdministrationConstants.PORTLET_NAME_HIPP, tplHIPPSearchResultVO.getHippCaseId(), getUserID());
						String caseId= tplHIPPSearchResultVO.getHippCaseId();
						  boolean lockFlag=false;
			                //This code is added for CR779820
			             try {
								LockDelegete lockDelegete=new LockDelegete();
								lockFlag =lockDelegete.lockExist(TPLAdministrationConstants.TABLE_NAME_HIPP,caseId,null);
								if(lockFlag){
									TPLAdministrationHelper.setErrorMessage(EnterpriseMessageConstants.ERR_GLB_DATA_CHANGED_TRY_AGAIN);
									return "";
								}
							} catch (EnterpriseBaseBusinessException e) {
							// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
							//	logger.error("Exception in TPLHIPPControllerBean.reset()", e);
								/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
								if(logger.isErrorEnabled()){
									logger.error("EnterpriseBaseBusinessException in searchHIPPCase ",e);
								}
							/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
							// MT Platform Code Merge (Merge 1 - Iteration1) ends        

							}
							PortletSession pSession = (PortletSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);
							pSession.setAttribute("HIPP_UPDATE","YES", pSession.APPLICATION_SCOPE);
							request.setAttribute("resultVO", caseId);
					}
				} catch (TPLHIPPBusinessException hippBusinessException) {
					logger.error("Exception in TPLHIPPControllerBean.searchHIPPCase()", hippBusinessException);
					tplHIPPSearchDataBean.setTplHIPPSearchResultDisplay(false);
					FacesContext facesContext = FacesContext.getCurrentInstance();
					facesContext.addMessage(null,new FacesMessage(ResourceBundle.getBundle(TPLRecoveryCaseConstants.RECOVERYSEARCHPortletResource)
													.getString(TPLRecoveryCaseConstants.TPL_RECOVERY_NO_RECORDS)));
				} catch (Exception e) {
					if(logger.isErrorEnabled()) {
						logger.error("Exception::::::::: " + e.getMessage());

					}

						/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
					message(MESSAGE_STR);
					/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
					// MT Platform Code Merge (Merge 1 - Iteration1) ends        

				}
				tplHIPPSearchDataBean.setImageRender(null);
			}
		} finally {	
			// Added for Defect Fix ESPRD00654345		
			if (policyHolderSSN != null) {
				tplHIPPSearchCriteriaVO.setPolicyHolderSSN(TPLAdministrationHelper.getSSNFormat(policyHolderSSN));
			}
			if(memberSSN!=null) {
				tplHIPPSearchCriteriaVO.setMemberSSN(TPLAdministrationHelper.getSSNFormat(memberSSN));
			}
		}
		logger.info("TPLHIPPControllerBean::searchHIPPCase:: END");
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        

		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		return  SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}

	private void procesSearchResultForDisplay(TPLHIPPSearchDataBean tplHIPPSearchDataBean,EnterpriseSearchResultsVO enterpriseSearchResultsVO)
	{
		tplHIPPSearchDataBean.setTplHIPPSearchResultDisplay(true);
		List searchList = new ArrayList();						
		Iterator searchItr = enterpriseSearchResultsVO.getSearchResults().iterator();						
		while(searchItr.hasNext())
		{
			TPLHIPPSearchResultVO tplHIPPSearchResultVO = (TPLHIPPSearchResultVO) searchItr.next();
			String code = tplHIPPSearchResultVO.getHippStatusCode();							
			String description = getDescFromCode(tplHIPPSearchDataBean.getHippStatusCodeList(), code);							
			String codePlusDesc = code + TPLAdministrationConstants.HYPHEN + description;
			tplHIPPSearchResultVO.setHippStatusCode(codePlusDesc);
			searchList.add(tplHIPPSearchResultVO);
		}						
		tplHIPPSearchDataBean.setSearchResultList(searchList);
	}
	/**
	 * This method is used to reset the search criteria.
	 * 
	 * @return String
	 */
	public String resetSearch(ActionEvent searchCriteria) 
	{
		logger.info("inside resetsearch: BEGIN");
		String SUCCESS = TPLAdministrationConstants.SUCCESS;
		final String searchOption = (String) searchCriteria.getComponent()
			.getAttributes().get(TPLAdministrationConstants.RESET);
		TPLHIPPSearchCriteriaVO tplHIPPSearchCriteriaVO = new TPLHIPPSearchCriteriaVO();
		TPLHIPPSearchDataBean tplLHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		tplLHIPPSearchDataBean.setTplHIPPSearchCriteriaVO(tplHIPPSearchCriteriaVO);
		tplLHIPPSearchDataBean.setTplHIPPSearchResultDisplay(false);
		tplLHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setPolicyNumber(TPLAdministrationConstants.EMPTY);
		tplLHIPPSearchDataBean.setImageRender(null);
		if(TPLAdministrationConstants.SEARCH_MEMBER.equalsIgnoreCase(searchOption))
		{
			logger.info("inside resetsearch: search member");
			tplLHIPPSearchDataBean.setRenderMemberDateOfBirth(false);
			tplLHIPPSearchDataBean.setRenderMemberName(false);
			tplLHIPPSearchDataBean.setRenderMemberHippStatus(false);
			tplLHIPPSearchDataBean.setRenderMemberID(false);
			tplLHIPPSearchDataBean.setRenderAppDate(false);
			tplLHIPPSearchDataBean.setRenderMemberSSN(false);
			tplLHIPPSearchDataBean.setSelectedIndex(0);
			tplLHIPPSearchDataBean.setMemberLName(TPLAdministrationConstants.EMPTY);
			tplLHIPPSearchDataBean.setMemberFName(TPLAdministrationConstants.EMPTY);
		
		}
		else if(TPLAdministrationConstants.SEARCH_CASENUM.equalsIgnoreCase(searchOption))
		{
			logger.info("inside resetsearch: search casenum");	
			tplLHIPPSearchDataBean.setRenderCaseNumberHippStaus(false);
			tplLHIPPSearchDataBean.setRenderHippCaseNumber(false);
			tplLHIPPSearchDataBean.setRenderMedicaidCaseNumber(false);
			tplLHIPPSearchDataBean.setSelectedIndex(1);
		}
		else if(TPLAdministrationConstants.SEARCH_POLICYHOLDER.equalsIgnoreCase(searchOption))
		{
			logger.info("inside resetsearch: search policy holder");
			tplLHIPPSearchDataBean.setRenderPolicyholderName(false);
			tplLHIPPSearchDataBean.setRenderPolicyholderSSN(false);
			tplLHIPPSearchDataBean.setRenderPolicyholderHippStatus(false);
			tplLHIPPSearchDataBean.setRenderPolicyholderID(false);
			tplLHIPPSearchDataBean.setSelectedIndex(2);
			tplLHIPPSearchDataBean.setPolicyHolderLName(TPLAdministrationConstants.EMPTY);
			tplLHIPPSearchDataBean.setPolicyHolderFName(TPLAdministrationConstants.EMPTY);
		}
		else if(TPLAdministrationConstants.SEARCH_CARRIER.equalsIgnoreCase(searchOption))
		{
			logger.info("inside resetsearch: search carrier");
			tplLHIPPSearchDataBean.setRenderCarrierHippStatus(false);
			tplLHIPPSearchDataBean.setRenderCarrierName(false);
			tplLHIPPSearchDataBean.setRenderCarrierHippStatus(false);
			tplLHIPPSearchDataBean.setRenderCarrierID(false);
			tplLHIPPSearchDataBean.setSelectedIndex(3);
		}
		else if(TPLAdministrationConstants.SEARCH_BY_RECOVWORK_OPTION.equalsIgnoreCase(searchOption))
		{
			logger.info("inside resetsearch: search recoveryoption");
			tplLHIPPSearchDataBean.setRenderWorkerID(false);
			tplLHIPPSearchDataBean.setRenderWorkerName(false);
			tplLHIPPSearchDataBean.setRenderWorkerHippStatus(false);
			tplLHIPPSearchDataBean.setSelectedIndex(5);
		}
		else
		{
			logger.info("inside resetsearch: else part");
			tplLHIPPSearchDataBean.setSelectedIndex(4);
		}
		logger.info("inside resetsearch:END");
		return SUCCESS;

	}

	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventMember(ValueChangeEvent value) {
		logger.info("TPLHIPPControllerBean::valueChangeEventMember:: START");

		String selectedValue = (String) value.getNewValue();
		FacesContext.getCurrentInstance().renderResponse();
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setSearchByMember(selectedValue);

		if (selectedValue.equals("MI")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setMemberID("");
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setMemberIDType("");
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setApplicationDate(null);
			tplHIPPSearchDataBean.setRenderMemberID(true);
			tplHIPPSearchDataBean.setRenderMemberHippStatus(true);
			tplHIPPSearchDataBean.setRenderMemberName(false);
			tplHIPPSearchDataBean.setRenderMemberSSN(false);
			tplHIPPSearchDataBean.setRenderAppDate(true);
			tplHIPPSearchDataBean.setRenderMemberDateOfBirth(false);
		}
		if (selectedValue.equals("N")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setApplicationDate(null);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setMemberDOB(null);
			tplHIPPSearchDataBean.setRenderMemberID(false);
			tplHIPPSearchDataBean.setRenderMemberHippStatus(true);
			tplHIPPSearchDataBean.setRenderMemberName(true);
			tplHIPPSearchDataBean.setRenderMemberSSN(false);
			tplHIPPSearchDataBean.setRenderAppDate(true);
			tplHIPPSearchDataBean.setRenderMemberDateOfBirth(true);
		}
		if (selectedValue.equals("S")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setApplicationDate(null);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setMemberDOB(null);
			tplHIPPSearchDataBean.setRenderMemberID(false);
			tplHIPPSearchDataBean.setRenderMemberHippStatus(true);
			tplHIPPSearchDataBean.setRenderMemberName(false);
			tplHIPPSearchDataBean.setRenderMemberSSN(true);
			tplHIPPSearchDataBean.setRenderMemberDateOfBirth(true);
			tplHIPPSearchDataBean.setRenderAppDate(true);
		}
		if (selectedValue.equals("")) {
			tplHIPPSearchDataBean.setRenderMemberID(false);
			tplHIPPSearchDataBean.setRenderMemberHippStatus(false);
			tplHIPPSearchDataBean.setRenderMemberName(false);
			tplHIPPSearchDataBean.setRenderMemberSSN(false);
			tplHIPPSearchDataBean.setRenderMemberDateOfBirth(false);
			tplHIPPSearchDataBean.setRenderAppDate(false);
			
		}
		tplHIPPSearchDataBean.setSelectedIndex(0);
		logger.info("TPLHIPPControllerBean::valueChangeEventMember:: END");
	}

	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventCaseNumber(ValueChangeEvent value) {
	logger.info("TPLHIPPControllerBean::valueChangeEvenCaseNumber:: START");
		String selectedValue = null;
		selectedValue = (String) value.getNewValue();
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		if (selectedValue.equals("HN")) {
			tplHIPPSearchDataBean.setRenderHippCaseNumber(true);
			tplHIPPSearchDataBean.setRenderMedicaidCaseNumber(false);
			tplHIPPSearchDataBean.setRenderCaseNumberHippStaus(true);
		} else if (selectedValue.equals("MN")) {
			tplHIPPSearchDataBean.setRenderMedicaidCaseNumber(true);
			tplHIPPSearchDataBean.setRenderHippCaseNumber(false);
			tplHIPPSearchDataBean.setRenderCaseNumberHippStaus(true);
		}
		tplHIPPSearchDataBean.setSelectedIndex(1);
		logger.info("TPLHIPPControllerBean::valueChangeEvenCaseNumber:: END");
	}
	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventPolicyholder(ValueChangeEvent value) {
		logger.info("TPLHIPPControllerBean::valueChangeEvenPolicyholder:: START");
		String selectedValue = "";
		selectedValue = (String) value.getNewValue();
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		String selectedPolicyHdr = selectedValue+"policy";
		tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setSearchByPolicyholder(selectedPolicyHdr);
		if (selectedValue.equals("N")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderPolicyholderName(true);
			tplHIPPSearchDataBean.setRenderPolicyholderSSN(false);
			tplHIPPSearchDataBean.setRenderPolicyholderHippStatus(true);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setSearchByPolicyholder(selectedPolicyHdr);
            tplHIPPSearchDataBean.setRenderPolicyholderID(false);
		} else if (selectedValue.equals("S")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderPolicyholderHippStatus(true);
			tplHIPPSearchDataBean.setRenderPolicyholderName(false);
			tplHIPPSearchDataBean.setRenderPolicyholderSSN(true);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO()
			.setSearchByPolicyholder(selectedPolicyHdr);
			tplHIPPSearchDataBean.setRenderPolicyholderID(false);
		} else if(selectedValue.equals("P")){
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderPolicyholderName(false);
			tplHIPPSearchDataBean.setRenderPolicyholderSSN(false);
			tplHIPPSearchDataBean.setRenderPolicyholderHippStatus(true);
			tplHIPPSearchDataBean.setRenderPolicyholderID(true);
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setSearchByPolicyholder(selectedPolicyHdr);
		}
		tplHIPPSearchDataBean.setSelectedIndex(2);
			logger.info("TPLHIPPControllerBean::valueChangeEvenPolicyholder:: END");
	}

	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventCarrier(ValueChangeEvent value) {
	logger.info("TPLHIPPControllerBean::valueChangeEvenCarrier:: START");
		String selectedValue = "";
		selectedValue = (String) value.getNewValue();
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setSearchByCarrier(selectedValue);
		if (selectedValue.equals("CN")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderCarrierName(true);
			tplHIPPSearchDataBean.setRenderCarrierHippStatus(true);
			tplHIPPSearchDataBean.setRenderCarrierID(false);
		} else if (selectedValue.equals("CI")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderCarrierName(false);
			tplHIPPSearchDataBean.setRenderCarrierHippStatus(true);
			tplHIPPSearchDataBean.setRenderCarrierID(true);
		}
		tplHIPPSearchDataBean.setSelectedIndex(3);
		logger.info("TPLHIPPControllerBean::valueChangeEvenCarrier:: END");
	}

	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChaneEventWorker(ValueChangeEvent value) {
		logger.info("TPLHIPPControllerBean::valueChaneEventWorker:: START");
		String selectedValue = "";
		selectedValue = (String) value.getNewValue();
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setSearchByWorker(selectedValue);
		if (selectedValue.equals("WN")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderWorkerName(true);
			tplHIPPSearchDataBean.setRenderWorkerID(false);
			tplHIPPSearchDataBean.setRenderWorkerHippStatus(true);
		} else if (selectedValue.equals("WI")) {
			tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO().setHippCaseStatus(null);
			tplHIPPSearchDataBean.setRenderWorkerName(false);
			tplHIPPSearchDataBean.setRenderWorkerID(true);
			tplHIPPSearchDataBean.setRenderWorkerHippStatus(true);
		}
		tplHIPPSearchDataBean.setSelectedIndex(5);
			logger.info("TPLHIPPControllerBean::valueChaneEventWorker:: END");
	}

	/**
	 * @return the searchColumnSortFlag
	 */
	public boolean[] getSearchColumnSortFlag() {
		return searchColumnSortFlag;
	}

	/**
	 * @param searchColumnSortFlag
	 *            the searchColumnSortFlag to set
	 */
	public void setSearchColumnSortFlag(boolean[] searchColumnSortFlag) {
		this.searchColumnSortFlag = searchColumnSortFlag;
	}
	
	public boolean doLittleSaves(TPLHIPPDataBean tplHIPPDataBean)
	{
		/* Added as part of P1 PMD violation */
		final String EXCEPTION_IN_LITTLESAVE = "Exception in TPLHIPPControllerBean.doLittleSaves()";
		boolean littleSaveValid=false;
		//GLOBAL ACTION CODE IMPLEMENT
		if(logger.isDebugEnabled()) {
			logger.debug("member :"+ tplHIPPDataBean.isShowMemberDetails());

		}

		if(!tplHIPPDataBean.isShowMemberDetails())
		{
			validateMember();
		}
		if(!tplHIPPDataBean.isShowMemberDetails())
		{
			littleSaveValid = true;
		}
		//Defect ESPRD00828214 : Update time worker id validation
		/*if(!tplHIPPDataBean.isShowWorkerDetails())
		{*/
			validateWorkerID();
		//}
		if(!tplHIPPDataBean.isShowWorkerDetails())
		{
			littleSaveValid = true;
		}
		
		if(tplHIPPDataBean.isAddEditHIPPEffPeriodFlag())
		{	
			//GLOBAL ACTION CHANGE
			if(!tplHIPPDataBean.isEditHippEffectivePeriod())
			{				
			  saveHIPPEffectivePeriod();
			}
			else
			{				
			  updateHIPPEffectivePeriod();
			}
			
			if(!tplHIPPDataBean.isSaveHippEffRender())
			{
				littleSaveValid = true;
			}						
		}
		if(tplHIPPDataBean.isAddEditHIPPPayeeInfoFlag())
		{
		  //GLOBAL ACTION CHANGE
			if(!tplHIPPDataBean.isUpdatePayeeRendered())
			{				
				saveHIPPPayee();
			}
			else
			{				
				updateHIPPPayee();
			}	
			if(!tplHIPPDataBean.isSaveHippPayeeRender())
			{
				littleSaveValid = true;
			}						
		}
		if(getRoutingDataBean().isRenderAddRouting())
		{
			TPLRoutingControllerBean tplRoutingControllerBean=new TPLRoutingControllerBean();
			tplRoutingControllerBean.saveRouting();
			littleSaveValid=!getRoutingDataBean().isRoutingFlag();
		}
		//Attachments
		if(getTPLAttachmentDataBean().isShowAddAttachments())
		{
			TPLAttachmentControllerBean tplAttachmentControllerBean=new TPLAttachmentControllerBean();
			tplAttachmentControllerBean.uploadFile();
			littleSaveValid=!getTPLAttachmentDataBean().isAttachmentFlag();
		}
		
		if(getTPLAttachmentDataBean().isShowEditAttachments())
		{
			TPLAttachmentControllerBean tplAttachmentControllerBean=new TPLAttachmentControllerBean();
			try {
				tplAttachmentControllerBean.saveEditedAttachment();
				littleSaveValid=!getTPLAttachmentDataBean().isAttachmentFlag();
				
			} catch (CorrespondenceRecordUpdateBusinessException e) {
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			//	logger.error(EXCEPTION_IN_LITTLESAVE, e);    
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
					if(logger.isErrorEnabled()){
						logger.error("CorrespondenceRecordUpdateBusinessException in doLittleSaves ",e);
					}
			} catch (CorrespondenceRecordFetchBusinessException e) {
			//	logger.error(EXCEPTION_IN_LITTLESAVE, e);    
			if(logger.isErrorEnabled()){
						logger.error("CorrespondenceRecordFetchBusinessException in doLittleSaves ",e);
					}
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
				// MT Platform Code Merge (Merge 1 - Iteration1) ends        

			}
		}
		if(getLtrDataBeanFromContext().isRenderEditSection()){
			if(!getLtrDataBeanFromContext().isShowSucessMessage()){
				
			LettersAndResponsesDataBean ltrDataBean = getLtrDataBeanFromContext();
			LettersAndResponsesControllerBean ltrControllerBean = getLettersAndResponsesControllerBean();
			try {
				ltrControllerBean.saveLetterRequest();
				if(ltrDataBean.getLetterGenerationRequests()!=null 
						&&  !ltrDataBean.getLetterGenerationRequests().isEmpty()){
					ltrDataBean.getLetterGenerationRequests().clear();
				}
				tplHIPPDataBean.setLettersLoaded(false);
				ltrControllerBean.getInitializedForHIPPInfo();
				ltrDataBean.setRenderEditSection(true);
				ltrDataBean.setShowSucessMessage(true);
			} catch (LetterGenerationException e) {
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			logger.debug("Exception while saving edit letter section:");
			//	logger.error(EXCEPTION_IN_LITTLESAVE, e);
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
				if(logger.isErrorEnabled()){
					logger.error("LetterGenerationException in doLittleSaves ",e);
				}
		
			} catch (Exception e) {
			//	logger.error(EXCEPTION_IN_LITTLESAVE, e);
				if(logger.isErrorEnabled()){
					logger.error("Exception in doLittleSaves ",e);
				}
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

			}
		  }
		}
		// Defect ESPRD00828227 & ESPRD00810152 : Added new flag for ERROR Message
		//tplHIPPDataBean.setShowMemberDetails(false);
		//tplHIPPDataBean.setShowWorkerDetails(false);
		tplHIPPDataBean.setCaseBgnDateErrflag(false);
		if(logger.isDebugEnabled()) {
			logger.debug("littleSaveValid::"+littleSaveValid);

		}

		return littleSaveValid;
	}
	 /**
     * @return String
     */
	 //GLOBAL ACTION CHANGE
    /*private String getLoggedInUser()
    {
    	 String loggedInUser = getUserID();
        logger.debug("User Id is " + loggedInUser);
        return loggedInUser;
    }*/
    /**
     * This method is used to get the User ID.
     * 
     * @return String : User ID
     */
    public String getUserID()
    {
    	logger.debug("inside getUserId");
        String userId = "USERID1";
        HttpServletRequest renderRequest = (HttpServletRequest) FacesContext
                .getCurrentInstance().getExternalContext().getRequest();
        HttpServletResponse renderResponse = null;
        try 
		{
			EnterpriseUserProfile eup = getUserData(renderRequest, renderResponse);
			if (eup != null && !isNullOrEmptyField(eup.getUserId()))
			{
			    userId = eup.getUserId();
			}
		} 
        catch (RuntimeException e) {
			// TODO Auto-generated catch block
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
        //	logger.error("Exception in TPLHIPPControllerBean.getUserID()", e);    
			 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("RuntimeException in getUserID ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        
		}
        logger.debug("TPLRoutingControllerBean::getUserID:: END");
        return userId;
    }

    /**
     * This method is used to check if the input field is null or is equal to an
     * empty string.
     * 
     * @param inputField :
     *            String inputField.
     * @return boolean : true if input field is null or equal to an empty string
     *         else false.
     */
    private boolean isNullOrEmptyField(String inputField)
    {
        return (inputField == null || TPLAdministrationConstants.EMPTY_STRING
                .equalsIgnoreCase(inputField.trim()));
    }
	
	
	/**
	 * This method is used to save HIPP Information
	 * 
	 * @return
	 * @param HippCaseVO
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	public void saveHIPPInfo()
	{
		/* Added EXCEPTION_SAVE_HIPP as part of p1 pmd violations */
		
		final String EXCEPTION_SAVE_HIPP = "Exception in TPLHIPPControllerBean.saveHIPPInfo()";
		logger.debug("TPLHIPPControllerBean::saveHIPPInfo:: START");
		try 
		{
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();

			TPLHIPPDetailsVO tplHIPPDetailsVO = new TPLHIPPDetailsVO();
			tplHIPPDataBean.setShowSuccessPayeeInfo(false);
			// Defect ESPRD00846456 : Save payee information with out click minor save
			//tplHIPPDataBean.setUpdatePayeeRendered(false);
			//tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(false);
			tplHIPPDataBean.setShowDelSuccess(false);
			// Defect ESPRD00807660 : Remove attachment success message
			tplHIPPDataBean.setShowTPLHIPPAttachmentMessages(false);	
			if (!validateHIPPCaseInfo() && !tplHIPPDataBean.isAddEditHIPPEffPeriodFlag()) 
			{
				tplHIPPDataBean.setCommonFieldsRendered(false);
				tplHIPPDataBean.setAddPayeeRendered(false);
				tplHIPPDataBean.setShowSuccessPayeeInfo(false);
				TPLHIPPCaseVO tplHIPPCaseVO = tplHIPPDataBean.getTplHIPPCaseVO();
				//Date currentDate = new Date();
				String currentDate = TPLContactManagementHelper.dateConverter(new Date());
				if("C".equalsIgnoreCase(tplHIPPCaseVO.getHippCaseStatus()))						
				{
					if(StringUtils.isBlank(tplHIPPDataBean.getCaseStatus()) ||
						 !"C".equalsIgnoreCase(tplHIPPDataBean.getCaseStatus()))
					{
						tplHIPPCaseVO.setHippCaseStatusDate(currentDate);
						tplHIPPCaseVO.setCaseEndDate(currentDate);
					}
				}
				if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null 
						&& tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size()>0)
				{
					int currentRow = tplHIPPDataBean.getCurrentRecord();
					TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
							.getTplAddHIPPEffectivePeriodList().get(currentRow);
					if("C".equalsIgnoreCase(tplHIPPCaseVO.getHippCaseStatus()))						
					{
						if(StringUtils.isBlank(tplHIPPDataBean.getCaseStatus())
							 || !"C".equalsIgnoreCase(tplHIPPDataBean.getCaseStatus()))
						{
							tplHIPPEffectivePeriodVO.setHippEffectiveStatus("C");
							tplHIPPEffectivePeriodVO.setHippEffectiveEndDate(currentDate);
							//ESPRD00863187
							tplHIPPEffectivePeriodVO.setHippEffectiveStatusDate(currentDate);
							tplHIPPEffectivePeriodVO.setHippCloseDate(currentDate);
						}
					}
					tplHIPPEffectivePeriodVO.setCurrentHippEffectivePeriod(true);
					if (tplHIPPDataBean.getTplHIPPPaymentInfoVO() != null) 
					{	
						if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C"))
						{
							if(StringUtils.isBlank(tplHIPPDataBean.getCaseStatus()))
							{
								tplHIPPDataBean.getTplHIPPPaymentInfoVO().setPremiumEndDate(currentDate);
							}
							else if(!"C".equalsIgnoreCase(tplHIPPDataBean.getCaseStatus()))
							{
								tplHIPPDataBean.getTplHIPPPaymentInfoVO().setPremiumEndDate(currentDate);
							}								
						}
						tplHIPPEffectivePeriodVO.setTplHIPPPaymentInfoVO(tplHIPPDataBean.getTplHIPPPaymentInfoVO());
					}						
					if (tplHIPPDataBean.getTplAddPayeeList() != null)
					{
						if(StringUtils.isBlank(tplHIPPDataBean.getCaseStatus()))
						{
							if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C"))
							{
								Iterator payeeListItr = tplHIPPDataBean.getTplAddPayeeList().iterator();
								while(payeeListItr.hasNext())
								{
									TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeListItr.next();
									payeeInfoVO.setPayeeEffectiveEndDate(currentDate);									
								}
							}
						}
						else if(!"C".equalsIgnoreCase(tplHIPPDataBean.getCaseStatus()))
						{
							if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C"))
							{
								Iterator payeeListItr = tplHIPPDataBean.getTplAddPayeeList().iterator();
								while(payeeListItr.hasNext())
								{
									TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeListItr.next();
									payeeInfoVO.setPayeeEffectiveEndDate(currentDate);									
								}
							}
						}						
						tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().setTplAddPayeeList(
								tplHIPPDataBean.getTplAddPayeeList());
					}
					if (tplHIPPDataBean.getTplHIPPCBAVO() != null) 
					{
						if(!tplHIPPDataBean.isAddMode() && !tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C"))
						{							
							if (StringUtils.isNotEmpty(tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus()))
							{									
								if (tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus().equalsIgnoreCase("A")
										|| tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus().equalsIgnoreCase("D"))
								{										
									//tplHIPPCaseVO.setTplhippcbavo(tplHIPPDataBean.getTplHIPPCBAVO());
									List cbaHistoryList = new ArrayList();
									cbaHistoryList.add(tplHIPPDataBean.getTplHIPPCBAVO());
									tplHIPPEffectivePeriodVO.setCbaHistoryList(cbaHistoryList);
									if (tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus().equalsIgnoreCase("A")) 
									{	
										tplHIPPCaseVO.setHippCaseStatus("A");
										tplHIPPCaseVO.setHippCaseStatusDate(currentDate);
										tplHIPPCaseVO.setCaseApprovalDate(currentDate);
										tplHIPPEffectivePeriodVO.setHippEffectiveStatus("A");
										tplHIPPEffectivePeriodVO.setHippEffectiveStatusDate(currentDate);
										tplHIPPEffectivePeriodVO.setHippPeriodApprovalDate(currentDate);
									}							
									if (tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus().equalsIgnoreCase("D")) 
									{
										tplHIPPCaseVO.setHippCaseStatus("D");
										tplHIPPCaseVO.setHippCaseStatusDate(currentDate);
										tplHIPPEffectivePeriodVO.setHippEffectiveStatus("D");
										tplHIPPEffectivePeriodVO.setHippEffectiveStatusDate(currentDate);
									}
								} 
							}
							else
							{
								tplHIPPCaseVO.setTplhippcbavo(null);
							}
						}							
					}
					// Commented -- CR 716985
					/*if(validatePayeeDatesForApproved(tplHIPPEffectivePeriodVO))
					{
						return;
					}*/
					PolicyVO policyVO = getTPLPolicyDataBean().getPolicyVO();
					if(StringUtils.isNotBlank(policyVO.getPolicyNumber()) || 
							(policyVO.getTplPolicyCarrierVO() != null &&  
									StringUtils.isNotBlank(policyVO.getTplPolicyCarrierVO().getCarrierID())) ||
									(getTPLPolicyDataBean().getCoveredIndividualList() != null && 
											getTPLPolicyDataBean().getCoveredIndividualList().size() > 0) || checkPolicyFields())  
					{	
						TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
						//ESPRD00851370 starts geostan validation
						TPLPolicyDataBean policyDataBean=getTPLPolicyDataBean();
						
						if(policyController.validateTPLPolicyCheck())
						{		
							if(policyController.validateGeostanAddresses(policyDataBean)){
								policyController.setDataBeanListsToPolicyVO(policyVO);
								TPLPolicyConversionHelper tplPolicyConversionHelper = new TPLPolicyConversionHelper();
								TPLGroupPolicy policy = tplPolicyConversionHelper.convertPolicyVOtoDO(policyVO);
								tplHIPPDetailsVO.setTplGroupPolicy(policy);
							// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
							//	if(policyVO.getPend().equalsIgnoreCase(TRUE))
								/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
								if(policyVO.getPend().equalsIgnoreCase(TRUE_STR))
							
								{
									tplHIPPDetailsVO.setInitialPolicyPendStatus(Boolean.TRUE);
								}
							//	else if(policyVO.getPend().equalsIgnoreCase(FALSE))
									else if(policyVO.getPend().equalsIgnoreCase(FALSE_STR))
								{
								/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
							// MT Platform Code Merge (Merge 1 - Iteration1) ends        

								
									tplHIPPDetailsVO.setInitialPolicyPendStatus(Boolean.FALSE);
								}
								if(policy.getPolicyReferenceSK() != null)
								{
									tplHIPPDetailsVO.setAddEditFlag("update");							
								}
								else
								{
									tplHIPPDetailsVO.setAddEditFlag("add");
								}
								if(StringUtils.isNotEmpty(policyVO.getPolicyNumber()))
			            		{
			                		tplHIPPEffectivePeriodVO.setPolicyNumber(policyVO.getPolicyNumber());
			            		}
			            		if(StringUtils.isNotEmpty(policyVO.getTplPolicyCarrierVO().getCarrierID()))
			            		{
			            			tplHIPPEffectivePeriodVO.setCarrierID(policyVO.getTplPolicyCarrierVO().getCarrierID());
			            		}		            		
			            		if(StringUtils.isNotEmpty(policyVO.getTplPolicyCarrierVO().getCarrierName()))
			            		{
			            			tplHIPPEffectivePeriodVO.setInsCarrierName(policyVO.getTplPolicyCarrierVO().getCarrierName());
			            		}
			            		if(tplHIPPDataBean.getNonMemberCoverIndividualList()!=null && 
			            				tplHIPPDataBean.getNonMemberCoverIndividualList().size()>0)
			            		{
			            			tplHIPPEffectivePeriodVO.setHippAdditionalCoveredIndividualList(
			            					tplHIPPDataBean.getNonMemberCoverIndividualList());
			            		}
							}else{
								if(!policyDataBean.isGeostanFlagForEmployee() && policyDataBean.isShowInvalidEmpErrorMsg()){
				                	  TPLAdministrationHelper
					                      .setPolicyErrorMessage(TPLAdministrationConstants.ERROR_INVALID_EMP_ADDRESS);   
				                	   policyDataBean.setEmployerStyleClass(TPLAdministrationConstants.JSP_EMPLOYER_STYLECLASS_MINUS);
				                  }
				                  if(!policyDataBean.isGeostanFlagForPolicyHolder() && policyDataBean.isShowInvalidPolErrorMsg()){
				                    	TPLAdministrationHelper
				                        .setPolicyErrorMessage(TPLAdministrationConstants.ERROR_INVALID_POLICYHOLDER_ADDRESS);    	         
				                  }
								  getTPLPolicyDataBean().setCoveredIndividualList(tplHIPPDataBean.getCoveredIndividualList());
				                  return;
							}
						}
						else
						{
							getTPLPolicyDataBean().setCoveredIndividualList(tplHIPPDataBean.getCoveredIndividualList());
							return;
						}
					}
					//ESPRD00851370 Ends geostan validation
					//For Defect : ESPRD00724011 - start
					List effectivePeriodList =  (List) tplHIPPDataBean.getTplAddHIPPEffectivePeriodList();
					Iterator effectivePeriodListIterator = effectivePeriodList.iterator();
					boolean approvedFlag = false; boolean deniedFlag = false;	
					while (effectivePeriodListIterator.hasNext()) {	
						TPLHIPPEffectivePeriodVO tplHippEffPerVO = (TPLHIPPEffectivePeriodVO)effectivePeriodListIterator.next();						 
						 if(tplHippEffPerVO.getHippEffectiveStatus().equalsIgnoreCase("A")){
							 approvedFlag = true;							 
						 }else if(tplHippEffPerVO.getHippEffectiveStatus().equalsIgnoreCase("D")){
							 deniedFlag = true;							 
						 }					
					}	
					if(approvedFlag){						
						tplHIPPCaseVO.setHippCaseStatus("A");	
						tplHIPPCaseVO.setCaseApprovalDate(currentDate);
					}else if(deniedFlag){
						tplHIPPCaseVO.setHippCaseStatus("D");
					}
					//end
				}
				TPLHIPPConversionHelper tplHIPPConversionHelper = new TPLHIPPConversionHelper();
				TPLHippDetail hippCaseDO = tplHIPPConversionHelper.convertHIPPCaseVOtoDO(tplHIPPCaseVO);
				//GLOBAL ACTION CHANGE
				hippCaseDO.setAddedAuditUserID(getUserID());
				hippCaseDO.setAuditUserID(getUserID());
                //notes
                CommonEntityValidator commonEntityValidator=new CommonEntityValidator();
				hippCaseDO.setNoteSet(commonEntityValidator.getNoteSetDO());
				//Added For Routing
				TPLRoutingDOConvertor tplRoutingDOConvertor=new TPLRoutingDOConvertor();
				Set setOfTPLRouting=tplRoutingDOConvertor.convertListOfRoutingVOs(hippCaseDO);
				hippCaseDO.setHippRouting(setOfTPLRouting);
				String mode = null;
				if(StringUtils.isEmpty(hippCaseDO.getCaseID()))
				{
					mode = "add";
				}else {
					mode = "update";
				}
				if (hippCaseDO.getHippCaseDetail() != null)
				{
                       //notes impl
					if (commonEntityValidator.getNoteSetDO() != null
							&& commonEntityValidator.getNoteSetDO().getNotes() != null)
					{   
						tplHIPPDataBean.setNotesCount(commonEntityValidator.getNoteSetDO().getNotes().size());
					}
					tplHIPPDetailsVO.setTplHippDetail(hippCaseDO);
					TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();					
					logger.debug("before calling tplHIPPDelegate");
					TPLHIPPDetailsVO result = tplHIPPDelegate.saveHIPPInfo(tplHIPPDetailsVO);
					if(logger.isDebugEnabled()) {
						logger.debug("after calling tplHIPPDelegate-->"+result);

					}

					if(result != null)
					{
						if("1000".equalsIgnoreCase(result.getErrorCode()))
						{			
						// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
							/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */				
							message(MESSAGE_STR);
							/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
							// MT Platform Code Merge (Merge 1 - Iteration1) ends        

							return;
						}
						try
						{
							if(result.getTplHippDetail().getHippAttachment() != null && 
									!result.getTplHippDetail().getHippAttachment().isEmpty())
							{
								TPLHIPPProcessDelegate tplHIPPProcessDelegate = new TPLHIPPProcessDelegate();
								logger.debug("before calling process delegate");
								TPLHIPPDetailsVO fromProcess = tplHIPPProcessDelegate.saveOrUpdateHIPP(result);
								if(logger.isDebugEnabled()) {
									logger.debug("after calling process delegate"+fromProcess);

								}

								if(fromProcess != null)
								{
									logger.debug("before calling updateAttachment delegate");
									TPLHIPPDetailsVO fromWas = tplHIPPDelegate.updateAttachment(fromProcess);
									if(logger.isDebugEnabled()) {
										logger.debug("after calling updateAttachment delegate"+fromWas);

									}

								}								
							}														
						}
						catch(TPLHIPPBusinessProcessException e)
						{
						// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
							/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
								if(logger.isErrorEnabled()){
									logger.error("TPLHIPPBusinessProcessException in saveHIPPInfo ",e);
								}
							/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
							// MT Platform Code Merge (Merge 1 - Iteration1) ends        

						}
						String caseID = result.getTplHippDetail().getCaseID();
						if (StringUtils.isNotEmpty(caseID))
						{
							getTPLHIPPCaseDetails(caseID);
							if("add".equalsIgnoreCase(mode))
							{
								TPLAdministrationHelper.setPolicyErrorMessage(TPLAdministrationConstants.POLICY_CREATE_SUCCESS);
							
							}else if("update".equalsIgnoreCase(mode))
							{
								tplHIPPDataBean.setRecentFlag(false);
								TPLAdministrationHelper.setPolicyErrorMessage(TPLAdministrationConstants.POLICY_CREATE_SUCCESS);
							}
							// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
							/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
							tplHIPPDataBean.setFileAddHippSavedFlag(TRUE_STR);
							/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
							// MT Platform Code Merge (Merge 1 - Iteration1) ends        

							//ESPRD00843680
							tplHIPPDataBean.setAddHippEffectivePeriodRendered(false);
							tplHIPPDataBean.setCurrentPageId("HIPPTOP");
							//ESPRD00912356
							FacesContext facesContext = FacesContext.getCurrentInstance();
							PortletSession pSession = (PortletSession) facesContext.getExternalContext().getSession(true);
							// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
						//	String currentPage = (String) pSession.getAttribute(PAGE_VIEW_PORTLET_ATTRIBUTE);	
							/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
							String currentPage = (String) pSession.getAttribute(PORTLET_VIEW);	
						
							if(currentPage != null && currentPage.equals("/jsp/policydetails/addPolicy.jsp") )
							{
							//	pSession.removeAttribute(PAGE_VIEW_PORTLET_ATTRIBUTE);
								pSession.removeAttribute(PORTLET_VIEW);
							}
							/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
								/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
								// MT Platform Code Merge (Merge 1 - Iteration1) ends        

							//ESPRD00912356
						}
						
						// //for defect ESPRD00826740 - added condition for denial
						if (tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_APPROVED) 
								|| tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_DENIED) )
						{
							tplHIPPDataBean.setLettersLoaded(false);
						}
					}
					//ESPRD00851370 geostan validation	
					TPLPolicyDataBean policyDataBean=getTPLPolicyDataBean();
					policyDataBean.setGeostanFlagForEmployee(false);
	                policyDataBean.setGeostanFlagForPolicyHolder(false);
				}
			}
		}
		catch (TPLHIPPBusinessException e) 
		{
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("TPLHIPPBusinessException in saveHIPPInfo ",e);
			}
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			logger.debug(e);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			message(MESSAGE_STR);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		}
		catch(CommonEntityUIException e){
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	logger.error(EXCEPTION_SAVE_HIPP, e);    
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("CommonEntityUIException in saveHIPPInfo ",e);
			}
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		catch(TPLPolicyBusinessException e){
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	logger.error(EXCEPTION_SAVE_HIPP, e);    
			if(logger.isErrorEnabled()){
				logger.error("TPLPolicyBusinessException in saveHIPPInfo ",e);
			}
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

			if (e.getErrorCode().equalsIgnoreCase(
                    TPLAdministrationConstants.POLICY_DUPLICATION_ERRORCODE))
            {
                TPLAdministrationHelper
                        .setPolicyErrorMessage(TPLAdministrationConstants.POLICY_DUPLICATE);
            }
		}
		catch(Exception e)
		{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	logger.error(EXCEPTION_SAVE_HIPP, e);    
			if(logger.isErrorEnabled()){
				logger.error("Exception in saveHIPPInfo ",e);
			}
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		logger.debug("TPLHIPPControllerBean::saveHIPPInfo:: END");
	}

	/**
	 * @return result
	 */
	boolean validateHIPPCaseInfo() 
	{
		/*   Added EXCEPTION_VALIDATE_HIPP_INFO as part of PMD P1 Violation */
		
		String EXCEPTION_VALIDATE_HIPP_INFO = "Exception in TPLHIPPControllerBean.validateHIPPCaseInfo()";
		logger.debug("TPLHIPPControllerBean::validateHIPPCaseInfo:: START");
		TPLHIPPCaseVO tplHIPPCaseVO = null;
		TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = null;
		TPLHIPPPaymentInfoVO tplHIPPPaymentInfoVO = null;
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = null;
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPCaseVO = tplHIPPDataBean.getTplHIPPCaseVO();
		tplHIPPDataBean.setPremEndDateMessage(false);
		tplHIPPDataBean.setPrembeginDateMessage(false);
		Date caseBeginDate = null;
		Date caseEndDate = null;
		String caseEffectiveBeginDate = null;
		String caseEffectiveEndDate = null;
		String caseEffectiveStatus = null;
		tplHIPPDataBean.setHippDate(false);
		boolean result = false;
		boolean littleSaveResult = false; //ESPRD00856086
		boolean hippSaveCheck = false;
		if (tplHIPPCaseVO != null) 
		{
			// Defect ESPRD00828227 & ESPRD00810152 : Code modified to display proper EM
			result = TPLHIPPValidateHelper.validateMandatoryFieldsForSave(tplHIPPDataBean);		
			littleSaveResult = doLittleSaves(tplHIPPDataBean);	
			//CR ESPRD00915312  
			if( null == tplHIPPDataBean.getHippEffectiveBeginDate() 
				 || null== tplHIPPDataBean.getHippEffectiveEndDate()
				 || tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() == null ){
				if(checkFieldsEmpty()){
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPPEFF_PAYEE);
					result = true;
					hippSaveCheck = true;
				}
			}
			if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null && tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size()>0)
			{
				int currentRow = tplHIPPDataBean.getCurrentRecord();
				tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
						.getTplAddHIPPEffectivePeriodList().get(currentRow);
				caseEffectiveBeginDate = tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate();
				caseEffectiveEndDate = tplHIPPEffectivePeriodVO.getHippEffectiveEndDate();
				caseEffectiveStatus = tplHIPPEffectivePeriodVO.getHippEffectiveStatus();
			}
			if(!result && !littleSaveResult)
			{  
			  // defect: ESPRD00088319 fix
			  caseBeginDate = TPLAdministrationHelper.dateConverter(tplHIPPCaseVO.getCaseBeginDate(), null);
			  if(caseBeginDate != null)
			  {
				tplHIPPCaseVO.setCaseBeginDate(TPLAdministrationHelper.dateConverter(caseBeginDate));
			/*Start of the fix ESPRD1006047 	
				if (StringUtils.isEmpty(tplHIPPCaseVO.getHippCaseID()))
				{
					if(TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0036(tplHIPPCaseVO.getCaseBeginDate()))
					{
						result = true;
					}					
				}
				
				End of the ESPRD1006047  fix */
			  }
			  caseEndDate = TPLAdministrationHelper.dateConverter(tplHIPPCaseVO.getCaseEndDate(), null);
			  if(caseEndDate != null)
			  {
				tplHIPPCaseVO.setCaseEndDate(TPLAdministrationHelper.dateConverter(caseEndDate));
				if (TPLHIPPValidatorHelper.validateEndDateGRSysDate(tplHIPPCaseVO.getCaseEndDate().toString())) 
				{
					result = true;
				}
			  }
			  if (caseBeginDate != null && caseEndDate != null) 
			  {
				if(TPLHIPPValidatorHelper.validateHIPPDates(tplHIPPCaseVO.getCaseBeginDate(),
							tplHIPPCaseVO.getCaseEndDate()))
				{
					result = true;
				}
				//ESPRD01017626
				if(caseEffectiveBeginDate != null && caseEffectiveEndDate != null)
				{		
					try{				
					SimpleDateFormat sd = new SimpleDateFormat(DATE_FORMAT);					
					Date hippEffBgnDt = sd.parse(caseEffectiveBeginDate);
					Date hippEffEndDt = sd.parse(caseEffectiveEndDate);
					if(hippEffBgnDt.before(caseBeginDate))
					{
						TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_EffectiveBeginEndDate,null);
						result = true;
					}
					if( caseEndDate.before(hippEffEndDt))
					{
						TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_EffectiveBeginEndDate,null);
						result = true;
					} 
					}
					catch (ParseException e) {
						// TODO Auto-generated catch block
						logger.error(EXCEPTION_VALIDATE_HIPP_INFO, e);    
					}
				}
				if(StringUtils.isNotEmpty(tplHIPPCaseVO.getHippCaseID()) &&
					StringUtils.isNotEmpty(tplHIPPDataBean.getCaseStatus()))
				{
				  /*Start of the defect  ESPRD1006082 fix
				   if(tplHIPPDataBean.getCaseStatus().equalsIgnoreCase("A"))
				  {		
					try
					{
						Date prevDate = dateformatYYYYMMDD.parse(tplHIPPDataBean.getCaseBeginDate());
						Date presDate = dateformatYYYYMMDD.parse(tplHIPPCaseVO.getCaseBeginDate());
						if(!(prevDate.compareTo(presDate)==0))
						{	
							TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_BEG_DATE_CHANGE,
									"caseBeginDate",false,TPLHIPPConstants.ADDHIPPPortletResource);
							result = true;
						}
					}
					catch(ParseException pe)
					{
					   pe.printStackTrace();
					}
				  }
				 End of the ESPRD1006082 fix */
				  if(tplHIPPDataBean.getCaseStatus().equalsIgnoreCase("C"))
				  {	
					if(!(tplHIPPDataBean.getWorkerID().equalsIgnoreCase(
						      tplHIPPCaseVO.getTplHIPPWokerVO().getWorkerID())))
					{								
					   TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_WORKERID_CHANGED,
								"WorkerIDAssigned",false,TPLHIPPConstants.ADDHIPPPortletResource);
				 	   result = true;
					}
					try
					{
						Date prevBDate = dateformatYYYYMMDD.parse(tplHIPPDataBean.getCaseBeginDate());
						Date presBDate = dateformatYYYYMMDD.parse(tplHIPPCaseVO.getCaseBeginDate());
						Date prevEDate = dateformatYYYYMMDD.parse(tplHIPPDataBean.getCaseEndDate());
						Date presEDate = dateformatYYYYMMDD.parse(tplHIPPCaseVO.getCaseEndDate());
						if(!(prevBDate.compareTo(presBDate)==0) || !(prevEDate.compareTo(presEDate)==0))
						{									
							TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_BEGEND_DATE_CHANGE);
							result = true;
						}								
					}
					catch(ParseException pe)
					{
							logError("ParseException in validateHIPPCaseInfo ",pe);
					}
				  }
			   }
			 }				
			}
			if (StringUtils.isNotEmpty(tplHIPPCaseVO.getApplicationDate()))
			{
				Date appDate = TPLAdministrationHelper.dateConverter(tplHIPPCaseVO.getApplicationDate(), null);
				if (appDate == null) 
				{
					TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
							"applicationDate", false, TPLHIPPConstants.ADDHIPPPortletResource);
					result = true;
				}
			}
			//Deffect Fix:ESPRD00088657
			if (StringUtils.isNotEmpty(getTPLPolicyDataBean().getPolicyVO().getPolicyHolderVO().getDateOfBirth())) 
			{
				if (TPLHIPPValidatorHelper.dateValidator(getTPLPolicyDataBean().getPolicyVO().getPolicyHolderVO().getDateOfBirth())) 
				{
					result = true;
				}
			}
		} 
		else 
		{
			result = true;
		}
		//Commented for CR ESPRD00915312
		//for defect ESPRD00770783 - start
		/*TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVOTemp;
		tplHIPPEffectivePeriodVOTemp =tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO(); 
		
		if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() == null ){			
			if(checkFieldsEmpty()){
				if (StringUtils.isEmpty(tplHIPPEffectivePeriodVOTemp.getHippEffectiveBeginDate())) 
				{
				   TPLAdministrationHelper.setAddHIPPInfoMessageToId("error.required", "beginDate", true,TPLHIPPConstants.HIPPSEARCHPORTLETRESOURCE);
				   result = true; 
			    } 
			    if (StringUtils.isEmpty(tplHIPPEffectivePeriodVOTemp.getHippEffectiveEndDate()))
				{
					TPLAdministrationHelper.setAddHIPPInfoMessageToId("error.required", "endDate", true, TPLHIPPConstants.HIPPSEARCHPORTLETRESOURCE);
					result = true;
				} 
			 }		
		}*/
		//end
		//CR ESPRD00915312
		if(!hippSaveCheck){
			tplHIPPPaymentInfoVO = tplHIPPDataBean.getTplHIPPPaymentInfoVO();
			if (tplHIPPPaymentInfoVO != null) 
			{			
				if (StringUtils.isNotEmpty(caseEffectiveBeginDate)
						&& StringUtils.isNotEmpty(caseEffectiveEndDate)
						&& StringUtils.isNotEmpty(caseEffectiveStatus))
				{
					// CR ESPRD00679536 -- Begin
					tplHIPPPaymentInfoVO.setPremiumbeginDate(caseEffectiveBeginDate);
					tplHIPPPaymentInfoVO.setPremiumEndDate(caseEffectiveEndDate);
					// End

					Date premBeginDate = TPLAdministrationHelper.dateConverter(tplHIPPPaymentInfoVO.getPremiumbeginDate(), null);
					if(premBeginDate != null)
					{
						tplHIPPPaymentInfoVO.setPremiumbeginDate(TPLAdministrationHelper.dateConverter(premBeginDate));
					}
					else
					{
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
								"prembegindate", false, TPLHIPPConstants.ADDHIPPPortletResource);
						result = true;
					}
					Date premEndDate = TPLAdministrationHelper.dateConverter(tplHIPPPaymentInfoVO.getPremiumEndDate(), null);
					if(premEndDate != null)
					{
						tplHIPPPaymentInfoVO.setPremiumEndDate(TPLAdministrationHelper.dateConverter(premEndDate));
					}
					else
					{
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
								"premenddate", false, TPLHIPPConstants.ADDHIPPPortletResource);
						result = true;
					}
					Date disBeginDate = TPLAdministrationHelper.dateConverter(tplHIPPPaymentInfoVO.getDisbursementBeginDate(), null);
					if(disBeginDate != null)
					{
						tplHIPPPaymentInfoVO.setDisbursementBeginDate(TPLAdministrationHelper.dateConverter(disBeginDate));
					}
					Date disEndDate = TPLAdministrationHelper.dateConverter(tplHIPPPaymentInfoVO.getDisbursementEndDate(), null);
					if(disEndDate != null)
					{
						tplHIPPPaymentInfoVO.setDisbursementEndDate(TPLAdministrationHelper.dateConverter(disEndDate));
					}
					// Deffect Fix:ESPRD00088523
					//GLOBAL ACTION COMMENT
					/*if(StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumbeginDate()))
				{
					if (premBeginDate == null) 
					{
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
								"prembegindate", false, TPLHIPPConstants.ADDHIPPPortletResource);
						result = true;
					}
				}
				if(StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumEndDate()))
				{
					if (premEndDate == null) 
					{
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
								"premenddate", false, TPLHIPPConstants.ADDHIPPPortletResource);
						result = true;
					}
				}*/
					// Commented -- CR 716985	
					/*if(StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumbeginDate()) && 
				StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumEndDate()))
			{
				if(TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0052(tplHIPPPaymentInfoVO.getPremiumbeginDate(), 
						tplHIPPPaymentInfoVO.getPremiumEndDate()))
				{
					result = true;
				}
			}*/
					if ("A".equalsIgnoreCase(caseEffectiveStatus))
					{					
						if (tplHIPPPaymentInfoVO.getFrequency() != null && StringUtils.isEmpty(tplHIPPPaymentInfoVO.getFrequency().trim()))
						{						
							result = true;
						}
						if (tplHIPPPaymentInfoVO.getPremiumAmount() != null && StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumAmount().trim()))
						{						
							result = true;
						}
					}				
					if (tplHIPPPaymentInfoVO.getPremiumAmount() != null && 
							StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumAmount().trim()))
					{
						if (!caseEffectiveStatus.equalsIgnoreCase("P")) 
						{						
							TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_PRE_AMT_CHECK,"premiumamount");
							//ESPRD00843680
							tplHIPPDataBean.setDisableForClosed(false);
							result = true;
						}					
					} else if (!StringUtils.isBlank(tplHIPPPaymentInfoVO.getPremiumAmount()) // Added for Defect Fix ESPRD00790847
							&& !TPLAdministrationHelper.validateValueHippFields(tplHIPPPaymentInfoVO.getPremiumAmount()) 
							&& !TPLAdministrationHelper.validateHippValue(tplHIPPPaymentInfoVO.getPremiumAmount()))
					{
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
								"premiumamount", false, TPLHIPPConstants.ADDHIPPPortletResource);
						result = true;
					}

					if (tplHIPPPaymentInfoVO.getAdditionalDisbursementAmount() != null &&
							StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getAdditionalDisbursementAmount().trim()))
					{
						if (!TPLAdministrationHelper.validateValueHippFields(tplHIPPPaymentInfoVO.getAdditionalDisbursementAmount()) 
								&& !TPLAdministrationHelper.validateHippValue(tplHIPPPaymentInfoVO.getAdditionalDisbursementAmount()))
						{
							TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
									"amount", false, TPLHIPPConstants.ADDHIPPPortletResource);
							result = true;

						}
						if (StringUtils.isEmpty(tplHIPPPaymentInfoVO.getDisbursementBeginDate().trim()) || 
								StringUtils.isEmpty(tplHIPPPaymentInfoVO.getDisbursementEndDate().trim()))
						{
							TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_PAYMENT_DISDATES_REQ,TPLHIPPConstants.JSP_PAYEE_HIPP_DISMURSMENT_DATE);
							result = true;
						}
					}
					//GLOBAL ACTION CHANGE
					if((tplHIPPPaymentInfoVO.getPremiumAmount()!=null && StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumAmount().trim()))
							&& (tplHIPPPaymentInfoVO.getPremiumbeginDate()!=null && StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumbeginDate().trim()))
							&& (tplHIPPPaymentInfoVO.getPremiumEndDate() !=null && StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumEndDate().trim())))
					{
						if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0054(
								tplHIPPPaymentInfoVO.getPremiumbeginDate(),tplHIPPPaymentInfoVO.getPremiumEndDate(),
								caseEffectiveBeginDate,caseEffectiveEndDate,
								tplHIPPPaymentInfoVO.getFrequency(),tplHIPPPaymentInfoVO.getPremiumAmount())) 
						{
							result = true;
						}					
					}
					if (StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getDisbursementBeginDate())) 
					{
						if (TPLHIPPValidatorHelper
								.dateValidator(tplHIPPPaymentInfoVO.getDisbursementBeginDate())) 
						{
							result = true;
						}
					}	
					if (StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getDisbursementEndDate()))
					{
						if (TPLHIPPValidatorHelper
								.dateValidator(tplHIPPPaymentInfoVO.getDisbursementEndDate()))
						{
							result = true;
						}
					}
					/***
					 * Infinite Defect resolution - ESPRD00668442
					 * Added OR condition for the following If statement
					 */
					if ((StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getDisbursementBeginDate())
							|| StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getDisbursementEndDate()))) 
					{
						if(caseEffectiveStatus != null)
						{
							if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0046(
									tplHIPPPaymentInfoVO.getDisbursementBeginDate(),
									tplHIPPPaymentInfoVO.getDisbursementEndDate(),
									caseEffectiveStatus,
									tplHIPPPaymentInfoVO.getAdditionalDisbursementAmount()))
							{

								result = true;
							}
						}
						//GLOBAL ACTION CHANGE
						SimpleDateFormat sd = new SimpleDateFormat(DATE_FORMAT);					
						try 
						{
							Date disbuBgnDt = sd.parse(tplHIPPPaymentInfoVO.getDisbursementBeginDate());
							Date disbuEndDt = sd.parse(tplHIPPPaymentInfoVO.getDisbursementEndDate());
							Date hippEffBgnDt = sd.parse(caseEffectiveBeginDate);
							Date hippEffEndDt = sd.parse(caseEffectiveEndDate);
							if (TPLHIPPValidatorHelper.validateDisbursementDates(
									hippEffBgnDt,	hippEffEndDt, disbuBgnDt, disbuEndDt))
							{
								result = true;
							}
							if (disbuBgnDt.after(disbuEndDt))
							{	
								TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_DISBRS_BEG_CHECK, 
										"disbursementBeginDate", false, TPLHIPPConstants.ADDHIPPPortletResource);

								result = true;
							}
						} 
						catch (ParseException e) 
						{
								logError("ParseException in validateHIPPCaseInfo ",e);
						}

						if(validateDisbursementDates())
						{
							result = true;
						}
					}

					if (tplHIPPDataBean.getTplHIPPCBAVO() != null) 
					{
						if(!tplHIPPDataBean.isAddMode() && !tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C") 
								&& !tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("A"))
						{	
							if (StringUtils.isNotEmpty(tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus()) 
									&& tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus().equalsIgnoreCase("A")) 
							{
								if(validationWhenApproved(tplHIPPEffectivePeriodVO))
								{
									result = true;
								}	
							}							
						}	
						if(!result){ //ESPRD00890627
							logger.info("--inside reuslt--");
							if(!tplHIPPDataBean.isAddMode()  
									&& tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("P"))
							{	
								if (StringUtils.isNotEmpty(tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus()) 
										&& tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus().equalsIgnoreCase("A")) 
								{ 
									List tplAddHIPPEffectivePeriodList = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList(); 
									if(tplAddHIPPEffectivePeriodList!=null && tplAddHIPPEffectivePeriodList.size() >= 1 && 
											!tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLHIPPConstants.TPL_HIPP_STATUS_APPROVED)) 
									{
										logger.info("--inside if--");
										try
										{
											SimpleDateFormat sd1 = new SimpleDateFormat(DATE_FORMAT);
											Date hippBegDt = sd1.parse(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
											Date hippEndDt = sd1.parse(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
											boolean check=TPLHIPPCommonValidator.validateHIPPEffectiveDates(
													tplAddHIPPEffectivePeriodList,hippBegDt,hippEndDt,
													tplHIPPEffectivePeriodVO.getHippCaseSeqNumber());
											if(check)
											{
												result=true;
												tplHIPPDataBean.setShowSuccess(false);
												// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
												//tplHIPPDataBean.setCurrentPageId(TPL_HIPP_EFFECTIVE_PAGE_ID);
													/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
												tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
												/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
												// MT Platform Code Merge (Merge 1 - Iteration1) ends        

											}
										}	catch(ParseException ex){
											logger.error(EXCEPTION_VALIDATE_HIPP_INFO, ex);    
										}
									}	
								}
							}
						}
					}
				}
			}				
			else 
			{
				result = true;
			}
		}
		if(result || littleSaveResult)
			result = true;
		return result;
	}
	/**
	 * This method id used to check for fields empty, with no HIPP Effective period entered  
	 * 	
	 */
	//for defect : ESPRD00770783
private boolean checkFieldsEmpty(){
		
		TPLPolicyDataBean tplPolicyDataBean = getTPLPolicyDataBean();
		PolicyVO policyVO = tplPolicyDataBean.getPolicyVO();	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		EmployerVO empVO = policyVO.getEmployerVO();
		EmployerCommonEntityVO empCommonEntityVO = empVO.getEmployerCommonEntityVO();
		AddressVO empAddressVO = empCommonEntityVO.getAddressVO();
		PhoneVO empPhoneVO = empCommonEntityVO.getPhoneVO();
		PolicyHolderVO policyHolderVO = policyVO.getPolicyHolderVO();
        boolean valdtPolicyCheckFlag = false;
    	//policy tab
        if (StringUtils.isNotBlank(policyVO.getPolicyNumber()) ||(StringUtils.isNotBlank(policyVO.getResourceType()))
				 || StringUtils.isNotBlank(policyVO.getLastValidateDate()) ||(StringUtils.isNotBlank(policyVO.getBeginDate()))
				 || StringUtils.isNotBlank(policyVO.getEndDate()) ||(StringUtils.isNotBlank(policyVO.getInformationSource()))
				 || StringUtils.isNotBlank(policyVO.getCopayAmount()) ||(StringUtils.isNotBlank(policyVO.getCoinsuranceAmount())) 
				 || StringUtils.isNotBlank(policyVO.getDeductibleAmount()))    {	      	
       	 	valdtPolicyCheckFlag = true;
        }else if(StringUtils.isNotBlank(policyHolderVO.getIndividualPolicyHolderID()) || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderFirstName())
            	||  StringUtils.isNotBlank(policyHolderVO.getPolicyHolderLastName()) || StringUtils.isNotBlank(policyHolderVO.getMemberId())
            	||  StringUtils.isNotBlank(policyHolderVO.getMemberIdType()) || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderSSN())
            	||  StringUtils.isNotBlank(policyHolderVO.getDateOfBirth()) || StringUtils.isNotBlank(policyHolderVO.getDateOfDeath())
            		){
             valdtPolicyCheckFlag = true;
        }else if(tplPolicyDataBean.getPolicyPeriodCoverageList()!= null 
              && tplPolicyDataBean.getPolicyPeriodCoverageList().size() > 0){
        	valdtPolicyCheckFlag = true;
        }else if(StringUtils.isNotBlank(policyVO.getTplPolicyCarrierVO().getCarrierID()) 
        	|| StringUtils.isNotBlank(policyVO.getTplPolicyCarrierVO().getGroupId()) ){
        	valdtPolicyCheckFlag = true;
        }else if(StringUtils.isNotBlank(policyVO.getEmployerVO().getEmployerName()) || StringUtils.isNotBlank(empAddressVO.getAddressLine1())
             || StringUtils.isNotBlank(empAddressVO.getAddressLine2()) || StringUtils.isNotBlank(empAddressVO.getCityName())  
			 || StringUtils.isNotBlank(empAddressVO.getStateCode()) ||	StringUtils.isNotBlank(empAddressVO.getZipCode5()) 
			 ||	StringUtils.isNotBlank(empAddressVO.getZipCode4())  || StringUtils.isNotBlank(empPhoneVO.getPhoneNumber())
			 || StringUtils.isNotBlank(empPhoneVO.getPhoneExtension()) ||  StringUtils.isNotBlank(empAddressVO.getAddressUsageTypeCode())
			 || StringUtils.isNotBlank(empCommonEntityVO.getFaxVO().getPhoneNumber()) || StringUtils.isNotBlank(empAddressVO.getCountyCode()) 
			 || StringUtils.isNotBlank(empCommonEntityVO.getEaddressVO().getEaddressText()) ){        	
        	valdtPolicyCheckFlag = true;
        }else if(StringUtils.isNotBlank(policyHolderVO.getIndividualPolicyHolderID()) || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderFirstName())
        	||  StringUtils.isNotBlank(policyHolderVO.getPolicyHolderLastName()) || StringUtils.isNotBlank(policyHolderVO.getMemberId())
        	||  StringUtils.isNotBlank(policyHolderVO.getMemberIdType()) || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderSSN())
        	||  StringUtils.isNotBlank(policyHolderVO.getDateOfBirth()) || StringUtils.isNotBlank(policyHolderVO.getDateOfDeath())
        		){
        	valdtPolicyCheckFlag = true;
        }else if(tplPolicyDataBean.getPolicyHolderCoverageList() != null 
        		&& tplPolicyDataBean.getPolicyHolderCoverageList().size() > 0 ){
        	valdtPolicyCheckFlag = true;
        }else if(tplPolicyDataBean.getCoveredIndividualList() != null 
        	&& tplPolicyDataBean.getCoveredIndividualList().size() > 0 ){
        	valdtPolicyCheckFlag = true;
        }else if(tplPolicyDataBean.getCoveredIndividualVO().getCoveredIndCoverageList() != null &&
        		tplPolicyDataBean.getCoveredIndividualVO().getCoveredIndCoverageList().size() >0 ){
        	valdtPolicyCheckFlag = true;
        }else if(StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getAddressLine1()) 
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getAddressLine2())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getPhoneVO().getPhoneNumber())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getPhoneVO().getPhoneExtension())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getFaxVO().getPhoneNumber())
        	    || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getCountyCode())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getCityName())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getStateCode())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getZipCode5())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getAddressVO().getZipCode4())
        		|| StringUtils.isNotBlank(policyHolderVO.getPolicyHolderCommonEntityVO().getEaddressVO().getEaddressText())   ){        	
        	valdtPolicyCheckFlag = true;
        }else if(tplHIPPDataBean.getTplAddPayeeList() != null && tplHIPPDataBean.getTplAddPayeeList().size() > 0){
        	valdtPolicyCheckFlag = true;
        }else if(StringUtils.isNotBlank(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getAdditionalDisbursementAmount())
        		|| StringUtils.isNotBlank(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getDisbursementBeginDate())
        		|| StringUtils.isNotBlank(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getDisbursementEndDate())
        		|| StringUtils.isNotBlank(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getFrequency())
        		|| StringUtils.isNotBlank(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getPremiumAmount())   	){        	
        	valdtPolicyCheckFlag = true;
        }else if(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getAuthorizationRequired() != null){
        	 if(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getAuthorizationRequired().equals("Y")){
             	valdtPolicyCheckFlag = true;
             }
        }else if(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getAuthorized() != null){
        	if(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getAuthorized().equals("N")){
            	valdtPolicyCheckFlag = true;
            }
        }else if(tplHIPPDataBean.getTplHIPPCBAVO().isSupplementalInformation() == true ){
        	valdtPolicyCheckFlag = true;
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
       /* }else if(policyVO.getSupressPrintIndicator()!=null 
        		&& policyVO.getSupressPrintIndicator().equals(TRUE)){
        	valdtPolicyCheckFlag = true;
        }else if(policyVO.getPolicyVoid()!=null
        		&& policyVO.getPolicyVoid().equals(TRUE)){
        	valdtPolicyCheckFlag = true;
        }else if(policyVO.getCommercialHMO()!=null
        		&& policyVO.getCommercialHMO().equals(TRUE)){
        	valdtPolicyCheckFlag = true;
        }else if(policyVO.getPend()!=null &&  policyVO.getPend().equals(FALSE)){
        	valdtPolicyCheckFlag = true;
        }*/
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
        }else if(policyVO.getSupressPrintIndicator()!=null 
        		&& policyVO.getSupressPrintIndicator().equals(TRUE_STR)){
        	valdtPolicyCheckFlag = true;
        }else if(policyVO.getPolicyVoid()!=null
        		&& policyVO.getPolicyVoid().equals(TRUE_STR)){
        	valdtPolicyCheckFlag = true;
        }else if(policyVO.getCommercialHMO()!=null
        		&& policyVO.getCommercialHMO().equals(TRUE_STR)){
        	valdtPolicyCheckFlag = true;
        }else if(policyVO.getPend()!=null &&  policyVO.getPend().equals(FALSE_STR)){
        	valdtPolicyCheckFlag = true;
        }
        /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
       // MT Platform Code Merge (Merge 1 - Iteration1) ends        

        
        return valdtPolicyCheckFlag;    	
    }		
	//end
	/**
	 * This method id used to validateHippPayment
	 * 
	 * @return validate boolean
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	//GLOBAL ACTION COMMENT
	/*public boolean validateHippPayment()
	{
		boolean validate = false;
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = tplHIPPDataBean.getTplHIPPPayeeInfoVO();
		if (tplHIPPPayeeInfoVO != null) 
		{
			if (StringUtils.isEmpty(tplHIPPPayeeInfoVO.getEntityID())
					&& StringUtils.isEmpty(tplHIPPPayeeInfoVO.getEntityIDType()))
			{
				TPLAdministrationHelper.setAddPayeeInfoMessage();
				 validate = true;
			}
		}
		return validate;
	}*/
	/**
     * This method is used to get new SSN number.
     * 
     * @param ssn
     *            String
     * @return new PhoneNumber String
     */
    public static String getPhoneFormat(String phoneNumber,int length)
    {
        String newPhoneNumber = null;
        newPhoneNumber = phoneNumber.substring(0, TPLMaintainContactManagementUIConstants.THREE);
        newPhoneNumber = newPhoneNumber.concat(TPLMaintainContactManagementUIConstants.HYPHEN);
        newPhoneNumber = newPhoneNumber.concat(phoneNumber.substring(
        		TPLMaintainContactManagementUIConstants.THREE, TPLMaintainContactManagementUIConstants.SIX));
        newPhoneNumber = newPhoneNumber.concat(TPLMaintainContactManagementUIConstants.HYPHEN);
        newPhoneNumber = newPhoneNumber.concat(phoneNumber.substring(TPLMaintainContactManagementUIConstants.SIX,length));
        return newPhoneNumber;
    }

	/**
	 * This method id used to Validate workerID
	 * 
	 * @return
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
    public void validateWorkerID()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setCurrentPageId("validateWorkerIDFocus");
		try
		{
		  if (tplHIPPDataBean.getTplHIPPCaseVO() != null)
		   {
			  TPLHIPPWokerVO tplHIPPWokerVO = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPWokerVO();
			  if (tplHIPPWokerVO != null)
			  {
				  if (StringUtils.isWhitespace(tplHIPPWokerVO.getWorkerID()))
					{
						TPLAdministrationHelper.setAddHIPPInfoMessageToId((TPLHIPPConstants.TPL_HIPP_WorkerID), 
								"WorkerIDAssigned", false, TPLHIPPConstants.ADDHIPPPortletResource);
						tplHIPPDataBean.setShowWorkerDetails(false);						
					}
				    else if (StringUtils.isNotEmpty(tplHIPPWokerVO.getWorkerID()))
				    {   
				    	TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
						tplHIPPWokerVO = tplHIPPDelegate.validateWorkerID(tplHIPPWokerVO.getWorkerID().toUpperCase());
						tplHIPPWokerVO.setPhoneNumber(getPhoneFormat(tplHIPPWokerVO.getPhoneNumber(),tplHIPPWokerVO.getPhoneNumber().length()));
						tplHIPPDataBean.getTplHIPPCaseVO().setTplHIPPWokerVO(tplHIPPWokerVO);
						tplHIPPDataBean.setShowWorkerDetails(true);
				    }
			  }
			  else
			  {
				 TPLAdministrationHelper.setAddHIPPInfoMessage();
			  }
		   }  
		  else
		  {
			  TPLAdministrationHelper.setAddHIPPInfoMessage();
		  }
		}
		catch (TPLHIPPBusinessException hippBusinessException) 
		{
			TPLAdministrationHelper.setAddHIPPInfoMessageToId((TPLHIPPConstants.WORKER_DETAILS_NOT_FOUND), 
					"WorkerIDAssigned", false, TPLHIPPConstants.ADDHIPPPortletResource);
		} 
		catch (Exception e) 
		{
			FacesMessage message = new FacesMessage();
			message.setDetail(e.getMessage());
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, message);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			FacesContext.getCurrentInstance().addMessage(ABC_STR, message);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	}
    //GLOBAL ACTION COMMENT
	/*public void validateWorkerID()
	{
		//logger.info("TPLHIPPControllerBean::validateWorkerID:: START");
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setCurrentPageId("validateWorkerIDFocus");
		try
		{
			if (!validateWorker())
			{
				String workerID = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPWokerVO().getWorkerID();
				if (StringUtils.isNotEmpty(workerID))
				{
					TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
					TPLHIPPWokerVO tplHIPPWokerVO = tplHIPPDelegate.validateWorkerID(workerID.toUpperCase());
					tplHIPPWokerVO.setPhoneNumber(getPhoneFormat(tplHIPPWokerVO.getPhoneNumber(),tplHIPPWokerVO.getPhoneNumber().length()));
					tplHIPPDataBean.getTplHIPPCaseVO().setTplHIPPWokerVO(tplHIPPWokerVO);
					tplHIPPDataBean.setShowWorkerDetails(true);
				}
			} 
			else
			{
				TPLAdministrationHelper.setAddHIPPInfoMessage();
			}
		} 
		catch (TPLHIPPBusinessException hippBusinessException) 
		{
			TPLAdministrationHelper.setAddHIPPInfoMessageToId((TPLHIPPConstants.WORKER_DETAILS_NOT_FOUND), 
					"WorkerIDAssigned", false, TPLHIPPConstants.ADDHIPPPortletResource);
		} 
		catch (Exception e) 
		{
			FacesMessage message = new FacesMessage();
			message.setDetail(e.getMessage());
			FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, message);
		}
	//	logger.info("TPLHIPPControllerBean::validateWorkerID:: END");
	}

	*//**
	 * @return result
	 *//*
	boolean validateWorker() 
	{
		logger.info("TPLHIPPControllerBean::validateWorker:: START");
		boolean result = true;
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		if (tplHIPPDataBean.getTplHIPPCaseVO() != null)
		{
			TPLHIPPWokerVO tplHIPPWokerVO = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPWokerVO();
			if (tplHIPPWokerVO != null)
			{
				String workerID = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPWokerVO().getWorkerID();
				if (StringUtils.isWhitespace(workerID))
				{
					TPLAdministrationHelper.setAddHIPPInfoMessageToId((TPLHIPPConstants.TPL_HIPP_WorkerID), 
							"WorkerIDAssigned", false, TPLHIPPConstants.ADDHIPPPortletResource);
					result = false;
				}
				if (StringUtils.isNotEmpty(workerID)) 
				{
					result = false;
				}
			}

		}
	//	logger.info("TPLHIPPControllerBean::validateWorker:: END");
		return result;
	}*/

	/**
	 * This method is used to validate member information.
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String validateMember() 
	{
		
		
		
	  TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
	  tplHIPPDataBean.setCurrentPageId("validateMemberFocus");
	  try
	  {
		TPLHIPPCaseVO tplHIPPCaseVO = tplHIPPDataBean.getTplHIPPCaseVO();
		if (!validateMemberDeatails(tplHIPPCaseVO)) 
		{ 
			logger.debug("after vlidatememberDetails");
			//Global Action Comment
		  /*if (tplHIPPDataBean.getTplHIPPCaseVO() != null) 
		  {*/
		 if (tplHIPPCaseVO != null) 
		 {
		   TPLHIPPMemberDetailVO tplHIPPMemberDetailVO = tplHIPPCaseVO.getTplHIPPMemberDetailVO();
		   if (tplHIPPMemberDetailVO != null)
		   {
			  String caseBeginDate = tplHIPPCaseVO.getCaseBeginDate().toString();
			  String caseEndDate = tplHIPPCaseVO.getCaseEndDate().toString();
			  String memberId = tplHIPPMemberDetailVO.getMemberID();
			  String memberIdType = tplHIPPMemberDetailVO.getMemberIDType();
			  TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
			  TPLHIPPMemberDetailVO tplHIPPMemberDetailVOResult = tplHIPPDelegate
			                 .validateMember(memberId, memberIdType, caseBeginDate, caseEndDate);
			 
			  if(tplHIPPMemberDetailVOResult != null && tplHIPPMemberDetailVOResult.getMemberID() != null)
			  {		
			
				if(!tplHIPPMemberDetailVOResult.isCheckMemberExit())
				{ 									
				   tplHIPPMemberDetailVOResult.setDob(TPLAdministrationHelper.dateTimeStampConverter(
											tplHIPPMemberDetailVOResult.getDob()));
				   //StringBuffer ssnFormate = new StringBuffer();
				   //String hiphen = "-"; 
				  if(tplHIPPMemberDetailVOResult.getSsn()!=null && 
								tplHIPPMemberDetailVOResult.getSsn().length()==9)
				  {
					  //Global Action change
					  tplHIPPMemberDetailVOResult.setSsn(TPLAdministrationHelper
								  .getSSNFormat(tplHIPPMemberDetailVOResult.getSsn()));
						/*ssnFormate.append(tplHIPPMemberDetailVOResult.getSsn().substring(0,3)).append(hiphen);
						ssnFormate.append(tplHIPPMemberDetailVOResult.getSsn().substring(3,5)).append(hiphen);
						ssnFormate.append(tplHIPPMemberDetailVOResult.getSsn().substring(5,9));*/
				  }
				  if(tplHIPPMemberDetailVOResult.getMemberDetailsList() != null && 
					   !tplHIPPMemberDetailVOResult.getMemberDetailsList().isEmpty())
				  {
					 Iterator memberDetailsListItr = tplHIPPMemberDetailVOResult.getMemberDetailsList().iterator();
					 while(memberDetailsListItr.hasNext())
					 {
					   MemberDetailsListVO memberDetailsListVO =(MemberDetailsListVO)memberDetailsListItr.next() ;
					  //TPLHIPPConversionHelper tplHIPPConversionHelper = new TPLHIPPConversionHelper();
					   if(StringUtils.isNotEmpty(memberDetailsListVO.getLob()))
					   {												
					 	  String desc = getSourceCodeDescription(
											tplHIPPDataBean.getLobCodeList(), memberDetailsListVO.getLob());
						  memberDetailsListVO.setLob(desc);
					   }
					   if(StringUtils.isNotEmpty(memberDetailsListVO.getProgramCode()))
					   {												
					 	  String desc = getSourceCodeDescription(
										tplHIPPDataBean.getCoeCodeList(), memberDetailsListVO.getProgramCode());
						  memberDetailsListVO.setProgramCode(desc);
					   }
					 }
				   }
				   //ESPRD00495003 End -- Kiran
				   tplHIPPMemberDetailVOResult.setMemberID(memberId);
				   tplHIPPMemberDetailVOResult.setMemberIDType(memberIdType);
				   tplHIPPDataBean.getTplHIPPCaseVO().setTplHIPPMemberDetailVO(tplHIPPMemberDetailVOResult);
				   tplHIPPDataBean.setShowMemberDetails(true);									
				 }
				 else
				 {
					TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_MEMBERID_EXITS, 
							MEMBER_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);
				 }
			   }
			   else
			   {
				   
				 TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLAdministrationConstants.MEMBER_ID_INVALID, 
							MEMBER_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);
				 TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.MEMBER_DETAILS_NOT_FOUND, 
							"MemberIDerror", false, TPLHIPPConstants.ADDHIPPPortletResource);
					tplHIPPDataBean.setShowMemberDetails(false);
				 }
			   }
			}
		  /*}*/
		} 
	  } 
	  catch (TPLHIPPBusinessException hippBusinessException)
	  {			
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLAdministrationConstants.MEMBER_ID_INVALID, 
					MEMBER_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.MEMBER_DETAILS_NOT_FOUND, 
					"MemberIDerror", false, TPLHIPPConstants.ADDHIPPPortletResource);
	  }
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	 // return SUCCESS;
	 /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		return SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */		
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}

	/**
	 * @return result
	 */
	boolean validateMemberDeatails(TPLHIPPCaseVO tplHIPPCaseVO)
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		boolean result = false;
		if (tplHIPPCaseVO != null)
		{
			if (StringUtils.isEmpty(tplHIPPCaseVO.getCaseBeginDate()))
			{
				if(!tplHIPPDataBean.isCaseBgnDateErrflag()){
				TPLHIPPValidateHelper.errorForRequiredField(CASE_BEGIN_DATE);
				tplHIPPDataBean.setHippDate(true);
				}
				result = true;
			}
			else
			{
				Date caseBeginDate = TPLAdministrationHelper.dateConverter(tplHIPPCaseVO.getCaseBeginDate(), null);
				if(caseBeginDate != null)
				{
					tplHIPPCaseVO.setCaseBeginDate(TPLAdministrationHelper.dateConverter(caseBeginDate));
				}
				else //Global action change
				{
					TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
							CASE_BEGIN_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);
					tplHIPPDataBean.setHippDate(true);	
					tplHIPPDataBean.setCaseBgnDateErrflag(true);
					result = true;
				}
			}
			if (StringUtils.isEmpty(tplHIPPCaseVO.getCaseEndDate()))
			{
				TPLHIPPValidateHelper.errorForRequiredField(CASE_END_DATE);
				tplHIPPDataBean.setHippDate(true);
				result = true;
			}
			else
			{
				Date caseEndDate = TPLAdministrationHelper.dateConverter(tplHIPPCaseVO.getCaseEndDate(), null);
				if(caseEndDate != null)
				{
					tplHIPPCaseVO.setCaseEndDate(TPLAdministrationHelper.dateConverter(caseEndDate));
				}
				else //Global action change
				{
					TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
							CASE_END_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);
					
					tplHIPPDataBean.setHippDate(true);
					result = true;
				}
			}
			// Defect ESPRD00828227 & ESPRD00810152 : Set flag for display ERROR Message
			//tplHIPPDataBean.setShowMemberDetails(true);
			
			TPLHIPPMemberDetailVO tplHIPPMemberDetailVO = tplHIPPCaseVO.getTplHIPPMemberDetailVO();

			if (tplHIPPMemberDetailVO != null)
			{
				String voMemberID = tplHIPPMemberDetailVO.getMemberID();
				// Rule Invocation Context object holds object arrays used in
				// rule execution.
				String ruleId1 = "TPL0698.0001.01";
				RulesDelegate ruleDelegate1 = new RulesDelegate(ruleId1);
				// Adding object into rule invocation context.
				ruleDelegate1.addObject(voMemberID);
				// Invoke RIF with ruleid and rule invocation objects.
				RulesResultVO rulesResult1 = null;
				try {
					rulesResult1 = ruleDelegate1.invokeRule();
				} catch (RulesDelegateException re) {
					if (rule_time.equals(re.getErrorCode())) {
						logger.warn(RULE_EXPIRED + re.getMessage());
						// If needed perform expires logic here
					}
					logger.error(RULESDELEGATE_EXCEPTION + re);
				}
				if (rulesResult1.isReturnBooleanValue()) 
				{
					/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
					TPLHIPPValidateHelper.errorForRequiredField(MEMBER_ID);
					/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
					result = true;
				}
				String memberIdType = tplHIPPMemberDetailVO.getMemberIDType();
				//Rule Invocation Context object holds object arrays used in rule execution.
				String ruleId = "TPL0701.0001.01";
				RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
				//Adding object into rule invocation context.
				ruleDelegate.addObject(memberIdType);
				//Invoke RIF with ruleid and rule invocation objects.
				RulesResultVO rulesResult = null;
				try {
					rulesResult = ruleDelegate.invokeRule();					
				} catch (RulesDelegateException re){
					if(rule_time.equals(re.getErrorCode()))
					{
						logger.warn(RULE_EXPIRED+ruleId);
						//If needed perform expires logic here  
					}
					logger.error(RULESDELEGATE_EXCEPTION+re);
				}
				logger.info(RULE_EXECUTION_ENDED+ruleId+"\n");
				if(rulesResult.isReturnBooleanValue())
				{
					TPLHIPPValidateHelper.errorForRequiredField("MemberIDType");
					result = true;
				}
			}			
		}
		return result;
	}

	 

	/**
	 * This method is used to Save HIPP Effective Period for hipp case.
	 * 
	 * @return
	 * @param value
	 *            ValueChangeEvent
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */

	public void valueChangeEventCobraInd(ValueChangeEvent value)
	{
		String selectedValue = null;
		selectedValue = (String) value.getNewValue();
		if(selectedValue != null){
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		 if (selectedValue.equalsIgnoreCase("Y"))
		 {
			tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setSelected("Y");
			tplHIPPDataBean.setCorbaEffectiveDateRendered(true);
		 } 
		 else if (selectedValue.equalsIgnoreCase("N")) 
		 {
			tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setSelected("N");
			tplHIPPDataBean.setCorbaEffectiveDateRendered(false);
		 } 
		}
	}
	
	private RulesResultVO getRulesResult_0761(final EnterpriseUserProfile eup, final String selectedValue, final String OldValue)
	{
		//Rule Invocation Context object holds object arrays used in rule execution.
		String ruleId = "TPL0761.0000.01";
		RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
		//Adding object into rule invocation context.
		ruleDelegate.addObject(eup);
		ruleDelegate.addObject(selectedValue);
		ruleDelegate.addObject(OldValue);
		//Invoke RIF with ruleid and rule invocation objects.
		RulesResultVO rulesResult = null;
		try {
			rulesResult = ruleDelegate.invokeRule();
		} catch (RulesDelegateException re){
			if(rule_time.equals(re.getErrorCode()))
			{
				logger.warn(RULE_EXPIRED+ruleId);
				//If needed perform expires logic here  
			}
			if(logger.isErrorEnabled())
			{
				logger.error(RULESDELEGATE_EXCEPTION+re.getMessage());
			}
		}
		return rulesResult;
	}
	
	//	CR ESPRD00378944  Starts
	public void valueChangeEventAuthReq(ValueChangeEvent value){
		String selectedValue = null;
		String OldValue = null;
		HttpServletRequest renderrequest = (HttpServletRequest) FacesContext
											.getCurrentInstance().getExternalContext().getRequest();
        HttpServletResponse renderresponse = null;
        EnterpriseUserProfile eup = getUserData(renderrequest, renderresponse);	
		selectedValue = (String)value.getNewValue();
		OldValue = (String)value.getOldValue();
		HtmlSelectOneRadio htmlSelectOneRadio = (HtmlSelectOneRadio)value.getComponent();
		//RIF STARTS FOR RULE TPL0761.0000.01
		RulesResultVO rulesResult = getRulesResult_0761(eup, selectedValue, OldValue);
		if(rulesResult.isReturnBooleanValue())
		{//RIF ENDS FOR RULE TPL0761.0000.01
			if(logger.isDebugEnabled()) {
					logger.debug("Authorisation required value changed*****"+selectedValue);
					logger.debug(" user login As role#################"+eup.getDesgAsSupr());

				}

				htmlSelectOneRadio.setValue(OldValue);
				TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_CASE_SECURITY_AuthReq);							
			}		
		}
	
	
	public void valueChangeEventAuthorized(ValueChangeEvent value){
		String selectedValue = null;
		String OldValue = null;
		HttpServletRequest renderrequest = (HttpServletRequest) FacesContext
        .getCurrentInstance().getExternalContext().getRequest();
        HttpServletResponse renderresponse = null;
        EnterpriseUserProfile eup = getUserData(renderrequest, renderresponse);	
		selectedValue = (String)value.getNewValue();
		OldValue = (String)value.getOldValue();
		HtmlSelectOneRadio htmlSelectOneRadio = (HtmlSelectOneRadio)value.getComponent();
		//RIF STARTS FOR RULE TPL0761.0000.01
		RulesResultVO rulesResult = getRulesResult_0761(eup, selectedValue, OldValue);
		if(rulesResult.isReturnBooleanValue())
		{//RIF ENDS FOR RULE TPL0761.0000.01
				if(logger.isDebugEnabled()) {
					logger.debug("Authorisation required value changed*****"+selectedValue);
					logger.debug(" user login AS Role#################"+eup.getDesgAsSupr());

				}
				htmlSelectOneRadio.setValue(OldValue);
				TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_CASE_SECURITY_AuthReq);									
		}
	}
	
	private RulesResultVO getRulesResult_0760(final EnterpriseUserProfile eup, final String selectedValue, final String OldValue)
	{
		//Rule Invocation Context object holds object arrays used in rule execution.
		String ruleId = "TPL0760.0000.01";
		RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
		//Adding object into rule invocation context.
		ruleDelegate.addObject(eup);
		ruleDelegate.addObject(selectedValue);
		ruleDelegate.addObject(OldValue);
		//Invoke RIF with ruleid and rule invocation objects.
		RulesResultVO rulesResult = null;
		try {
			rulesResult = ruleDelegate.invokeRule();	
		} catch (RulesDelegateException re){
			if(rule_time.equals(re.getErrorCode()))
			{
				logger.warn(RULE_EXPIRED+ruleId);
				//If needed perform expires logic here  
			}
			if(logger.isErrorEnabled())
			{
				logger.error(RULESDELEGATE_EXCEPTION+re.getMessage());
			}
		}
		return rulesResult;
	}
	
	public void valueChangeEventApproval(ValueChangeEvent value){
		String selectedValue = null;
		String OldValue = null;
		HttpServletRequest renderrequest = (HttpServletRequest) FacesContext
        				.getCurrentInstance().getExternalContext().getRequest();
        HttpServletResponse renderresponse = null;
        try {
			EnterpriseUserProfile eup = getUserData(renderrequest, renderresponse);	
			selectedValue = (String)value.getNewValue();
			OldValue = (String)value.getOldValue();
			HtmlSelectOneRadio htmlSelectOneRadio = (HtmlSelectOneRadio)value.getComponent();
			if(logger.isDebugEnabled()) {
				logger.debug("supervisor role-->"+eup.getDesgAsSupr());

			}

			//RIF STARTS FOR RULE TPL0760.0000.01
			RulesResultVO rulesResult = getRulesResult_0760(eup, selectedValue, OldValue);
			if(rulesResult.isReturnBooleanValue())
			{	//RIF ENDS FOR RULE TPL0760.0000.01
				if(logger.isDebugEnabled()) {
						logger.debug("Authorisation required value changed*****"+selectedValue);
						logger.debug("user login As Role#################"+eup.getDesgAsSupr());

					}

					htmlSelectOneRadio.setValue(OldValue);
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_CASE_SECURITY_Approval);										
			    }
			}
		 catch (RuntimeException e) {
			// TODO Auto-generated catch block
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	logger.error("Exception in TPLHIPPControllerBean.valueChangeEventApproval()", e);    
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("RuntimeException in valueChangeEventApproval ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	}
    //	CR ESPRD00378944  Ends
	
	/**
	 * This method is used to 39 WeekEnd.
	 * 
	 * @return
	 * @param value
	 *            ValueChangeEvent
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void valueChangeEvent39WeekEnd(ValueChangeEvent value)
	{
		String selectedValue = null;
		selectedValue = (String) value.getNewValue();
		if(selectedValue != null){
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		if (selectedValue.equalsIgnoreCase("Y")) 
		{
			tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setSelected("Y");
			tplHIPPDataBean.setWeekExtension39Rendered(true);
		} 
		else 
		if (selectedValue.equalsIgnoreCase("N")) 
		{
			tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setSelected("N");
			tplHIPPDataBean.setWeekExtension39Rendered(false);
		}
		}
	}

	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventHIPPStatus(ValueChangeEvent value) {
		/* Added HIPP_CASE_STATUS as part of p1 pmd violation */
		
		final String HIPP_CASE_STATUS = "HIPPCaseStatus";
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		FacesContext facesContext = FacesContext.getCurrentInstance();
        UIViewRoot uiViewRoot = facesContext.getViewRoot();
        HtmlSelectOneMenu status = null;
        try{
        status = (HtmlSelectOneMenu) uiViewRoot.findComponent("addHippInfo:hippcaseTab:hippCaseInfo:HIPPCaseStatus");
		Date hippCaseStatus = new Date();
		String selectedValue = (String) value.getNewValue();
		SimpleDateFormat sdt=new SimpleDateFormat("MM/dd/yyyy hh:mm:ss");
		//CR ESPRD00378944 start
		HttpServletRequest renderrequest = (HttpServletRequest) FacesContext
	        .getCurrentInstance().getExternalContext().getRequest();
	    HttpServletResponse renderresponse = null;
	        EnterpriseUserProfile eup = getUserData(renderrequest, renderresponse);	
			if(eup!= null && !eup.getDesgAsSupr()){
             	if(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("P") && !selectedValue.equalsIgnoreCase("P")){
             		
             		status.setValue(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus());
             		TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_CASE_SECURITY_HippStatus);
             	}
             }
          //CR ESPRD00378944 End
			if(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID()!=null)
			{				
				if (StringUtils.isEmpty(selectedValue))
				{					
					status.setValue(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus());											
					
					FacesContext context = FacesContext.getCurrentInstance();
			    	UIComponent fieldName = (UIComponent)TPLAdministrationHelper.findComponentInRoot(HIPP_CASE_STATUS);
			    	context.addMessage(fieldName.getClientId(context), new FacesMessage(ResourceBundle.getBundle(
			    			TPLHIPPConstants.ADDHIPPPortletResource).getString(TPLHIPPConstants.TPL_HIPP_CASE_STATUS_SPACE)));
				}
				else if (tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus() != null
						&& tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("C"))
				{
					if (!selectedValue.equalsIgnoreCase("C"))
					{
						status.setValue(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus());								
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_EDIT_HIPP_CASE_STATUS,
								HIPP_CASE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);
					}
				}
				else if (selectedValue.equalsIgnoreCase("P")) 
				{
					if (tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("A")) 
					{
						status.setValue(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus());						
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_CASE_STATUS,
								HIPP_CASE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);
					}
				}
				
			}
			if (selectedValue.equalsIgnoreCase("P")) 
			{
				if (tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus() == null) 
				{
					tplHIPPDataBean.getTplHIPPCaseVO().setHippCaseStatusDate(dateformatYYYYMMDD.format(hippCaseStatus));
				}				
			} 
			else if (selectedValue.equalsIgnoreCase("C")) 			
			{
				if (tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("A")
				     || tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("P")) 
				{
					tplHIPPDataBean.getTplHIPPCaseVO().setHippCaseStatusDate(dateformatYYYYMMDD.format(hippCaseStatus));
					tplHIPPDataBean.getTplHIPPCaseVO().setTempStatusDate(sdt.format(hippCaseStatus));
				}
			} 
			else{
				//RIF STARTS TPL0752.0001.01
				RulesResultVO rulesResult = getRulesResult_TPL0752(selectedValue);
				if(rulesResult.isReturnBooleanValue()){
				//RIF ENDS TPL0752.0001.01
					status.setValue(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus());
					TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_STATUS_AORD,
							HIPP_CASE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);
				}
			}			
		}catch(Exception e)
		{
				logError("Exception in valueChangeEventHIPPStatus ",e);
		}
	}
	
	
	/**
	 * @return rulesResult RulesResultVO
	 */
	private RulesResultVO getRulesResult_TPL0752(final String selectedValue)	
	{
		//Rule Invocation Context object holds object arrays used in rule execution.
		String ruleId = "TPL0752.0001.01";
		RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
		//Adding object into rule invocation context.
		ruleDelegate.addObject(selectedValue);     		   
		//Invoke RIF with ruleid and rule invocation objects.
		RulesResultVO rulesResult = null;
		try {
			rulesResult = ruleDelegate.invokeRule();	
		} catch (RulesDelegateException re){
			if(rule_time.equals(re.getErrorCode()))
			{
				logger.warn(RULE_EXPIRED+ruleId);
				//If needed perform expires logic here  
			}
			logger.error(RULESDELEGATE_EXCEPTION+re.getMessage());
		}
		return rulesResult;	
	}
	
	/**
	 * @return rulesResult RulesResultVO
	 */
	private RulesResultVO getRulesResult_TPL0753(final String selectedValue)	
	{
		//Rule Invocation Context object holds object arrays used in rule execution.
		String ruleId = "TPL0753.0001.01";
		RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
		//Adding object into rule invocation context.
		ruleDelegate.addObject(selectedValue);     		   
		//Invoke RIF with ruleid and rule invocation objects.
		RulesResultVO rulesResult = null;
		try {
			rulesResult = ruleDelegate.invokeRule();	
		} catch (RulesDelegateException re){
			if(rule_time.equals(re.getErrorCode()))
			{
				logger.warn(RULE_EXPIRED+ruleId);
				//If needed perform expires logic here  
			}
			logger.error(RULESDELEGATE_EXCEPTION+re.getMessage());
		}
		return rulesResult;	
	}

	/**
	 * @return tplHIPPDataBean TPLHIPPDataBean
	 */
	public TPLPolicyDataBean getTPLPolicyDataBean() {
		FacesContext fc = FacesContext.getCurrentInstance();
		TPLPolicyDataBean tplPolicyDataBean = (TPLPolicyDataBean) fc.getApplication().
		getVariableResolver().resolveVariable(fc, TPLHIPPDataBean.BEAN_NAME_POLICY);
		if (tplPolicyDataBean == null){
			tplPolicyDataBean = (TPLPolicyDataBean) fc
			.getApplication().createValueBinding(
					"#{" + TPLHIPPDataBean.BEAN_NAME_POLICY + "}")
			.getValue(fc);
		}
		return tplPolicyDataBean;
	}

	/**
	 * Implementation of CR-2527
	 * 
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventHIPPEffectiveStatus(ValueChangeEvent value)
	{
		String selectedValue = (String) value.getNewValue();
		Date hippCaseStatusDate = new Date();
		FacesContext facesContext = FacesContext.getCurrentInstance();
        UIViewRoot uiViewRoot = facesContext.getViewRoot();
        HtmlSelectOneMenu status = (HtmlSelectOneMenu) 
			uiViewRoot.findComponent("addHippInfo:hippcaseTab:hippCaseInfo:addHippEffectivePeriod:hippEffectiveStatus");
        TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
      	// Added null condition for selected value
	    if(selectedValue != null){
      if (selectedValue.equalsIgnoreCase("C")) 
		{		
			tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO()
					.setHippEffectiveStatusDate(TPLContactManagementHelper.dateConverter(hippCaseStatusDate));
			tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO()
					.setHippCloseDate(TPLContactManagementHelper.dateConverter(hippCaseStatusDate));
			tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveEndDate(
							dateformatYYYYMMDD.format(hippCaseStatusDate));
			tplHIPPDataBean.getTplHIPPPaymentInfoVO().setPremiumEndDate(
					dateformatYYYYMMDD.format(hippCaseStatusDate));
		}
		else if (selectedValue.equalsIgnoreCase("A")) 
		{			
			status.setValue(tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().getHippEffectiveStatus());
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_EFFECTIVE_STATUS_AORD,
					HIPP_EFFECTIVE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);

		} 
		else if (selectedValue.equalsIgnoreCase("P"))
		{
			if (tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().getHippEffectiveStatus().equalsIgnoreCase("A")) 
			{
				status.setValue(tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().getHippEffectiveStatus());				
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_CASE_STATUS,
						HIPP_EFFECTIVE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);
			}
		} 
		else if (selectedValue.equalsIgnoreCase("D"))
		{
			// CR: ESPRD00361593			
			status.setValue(tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().getHippEffectiveStatus());
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_EFFECTIVE_STATUS_AORD,
					HIPP_EFFECTIVE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);						
		}
        }
	}

	

	/**
	 * @param
	 */
	public String saveHIPPEffectivePeriod() 
	{
		logger.debug("TPLHIPPControllerBean::saveHIPPEffectivePeriod:: START");
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	//	tplHIPPDataBean.setCurrentPageId(TPL_HIPP_EFFECTIVE_PAGE_ID);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		try 
		{
		 if (!validateHIPPEffectivePeriod(tplHIPPDataBean))
		 {
		 	TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVOList = new TPLHIPPEffectivePeriodVO();
			TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO();
			tplHIPPEffectivePeriodVOList.setHippEffectiveBeginDate(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
			tplHIPPEffectivePeriodVOList.setHippEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
			//CR ESPRD00915312
			tplHIPPDataBean.setHippEffectiveBeginDate(TPLAdministrationHelper.dateConverter(
					tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate(), null));
			tplHIPPDataBean.setHippEffectiveEndDate(TPLAdministrationHelper.dateConverter(
					tplHIPPEffectivePeriodVO.getHippEffectiveEndDate(), null));
			tplHIPPEffectivePeriodVOList.setHippCaseNumber(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID());
			if (tplHIPPEffectivePeriodVO.getHippCloseDate() != null)
			{
				tplHIPPEffectivePeriodVOList.setHippCloseDate(tplHIPPEffectivePeriodVO.getHippCloseDate());
			}
			tplHIPPEffectivePeriodVOList.setHippEffectiveStatus(tplHIPPEffectivePeriodVO.getHippEffectiveStatus());
			
			//ESPRD00843781
			if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus() != null){
				if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_APPROVED)){
					tplHIPPDataBean.setDisableForApproved(true);
				}else{
					tplHIPPDataBean.setDisableForApproved(false);
				}
				if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_CLOSED)
						|| tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_DENIED)){
					tplHIPPDataBean.setDisableForClosed(true);
				}else{
					tplHIPPDataBean.setDisableForClosed(false);
				}
			}
			//ESPRD00843781
			if (tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee()!=null) 
			{
				tplHIPPEffectivePeriodVOList.setPolicyAdministrativeFee(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee()); 
			}
			//GLOBAL ACTION CHANGE
			Format formatter = new SimpleDateFormat(DATE_FORMAT);
	        tplHIPPEffectivePeriodVO.setHippEffectiveStatusDate(formatter.format(new Date()));
			tplHIPPEffectivePeriodVOList.setHippEffectiveStatusDate(tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate());
			TPLHIPPEffectivePeriodVO tempHIPPEffectivePeriodVO = tplHIPPDataBean.getTempTPLHIPPEffectivePeriodVO();
			// kiran start
			if(tempHIPPEffectivePeriodVO != null && (tempHIPPEffectivePeriodVO.getPolicyNumber() != null && 
					!tempHIPPEffectivePeriodVO.getPolicyNumber().equalsIgnoreCase("")))
			{
				if(tempHIPPEffectivePeriodVO.getPolicySk() != null)
				{
					tplHIPPEffectivePeriodVOList.setPolicySk(tempHIPPEffectivePeriodVO.getPolicySk());
				}
				if(StringUtils.isNotEmpty(tempHIPPEffectivePeriodVO.getPolicyNumber()))
				{
					tplHIPPEffectivePeriodVOList.setPolicyNumber(tempHIPPEffectivePeriodVO.getPolicyNumber());
				}
				if(StringUtils.isNotEmpty(tempHIPPEffectivePeriodVO.getCarrierID()))
				{
					tplHIPPEffectivePeriodVOList.setCarrierID(tempHIPPEffectivePeriodVO.getCarrierID());
				}
				if(tempHIPPEffectivePeriodVO.getPolicyHolderSeqNum() != null)
				{
					tplHIPPEffectivePeriodVOList.setPolicyHolderSeqNum(tempHIPPEffectivePeriodVO.getPolicyHolderSeqNum());
				}
				if(tempHIPPEffectivePeriodVO.getPolicySeqNum() != null)
				{
					tplHIPPEffectivePeriodVOList.setPolicySeqNum(tempHIPPEffectivePeriodVO.getPolicySeqNum());
				}
				if(StringUtils.isNotEmpty(tempHIPPEffectivePeriodVO.getInsCarrierName()))
				{
					tplHIPPEffectivePeriodVOList.setInsCarrierName(tempHIPPEffectivePeriodVO.getInsCarrierName());
				}
			}
			List tplAddHIPPEffectivePeriodList = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList(); 
			if(tplAddHIPPEffectivePeriodList == null)
			{
				tplAddHIPPEffectivePeriodList = new ArrayList();
				tplAddHIPPEffectivePeriodList.add(tplHIPPEffectivePeriodVOList);
				tplHIPPDataBean.setTplAddHIPPEffectivePeriodList(tplAddHIPPEffectivePeriodList);
			}
			else if (tplAddHIPPEffectivePeriodList.size() == 0) 
			{
				tplAddHIPPEffectivePeriodList.add(tplHIPPEffectivePeriodVOList); 
				tplHIPPDataBean.setTplAddHIPPEffectivePeriodList(tplAddHIPPEffectivePeriodList);
			}
			else if(tplAddHIPPEffectivePeriodList.size() > 0) 
			{
				tplAddHIPPEffectivePeriodList.add(tplHIPPEffectivePeriodVOList); 
				tplHIPPDataBean.setTplAddHIPPEffectivePeriodList(tplAddHIPPEffectivePeriodList);
			}
			tplHIPPDataBean.setCurrentRecord(tplAddHIPPEffectivePeriodList.size()-1);
			tplHIPPDataBean.setShowSuccess(true);
			tplHIPPDataBean.setSaveHippEffRender(true);
			tplHIPPDataBean.setShowMemberPolicy(false);
			tplHIPPDataBean.setRenderedUpdateHIPPInfo(false);
			tplHIPPDataBean.setEditHippEffectivePeriod(true);
			tplHIPPDataBean.setAddEditHIPPEffPeriodFlag(false);
			tplHIPPDataBean.setAddHippEffectivePeriodRendered(true);
		}
		else
		{
			tplHIPPDataBean.setShowSuccess(false);
			tplHIPPDataBean.setShowMemberPolicy(true);
			tplHIPPDataBean.setRenderedUpdateHIPPInfo(true);
			tplHIPPDataBean.setEditHippEffectivePeriod(false);
		}
	  }
	  catch (Exception e) 
		{
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		 // logger.error("Exception in TPLHIPPControllerBean.saveHIPPEffectivePeriod()", e);  
		 
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in saveHIPPEffectivePeriod ",e);
			}
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	  logger.debug("TPLHIPPControllerBean::saveHIPPEffectivePeriod:: END");  
	//	return SUCCESS;
		return "Success";
	}
	//GLOBAL ACTION CHANGE
	private void addPolicyInfo(TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVOList,TPLHIPPDataBean tplHIPPDataBean)
	{
		logger.debug("TPLHIPPControllerBean::addPolicyInfo:: START");  
		String carrierId = null;
		Integer grpPolicySeqNum = null;
		String policyHolderId = null;
		Integer policyHolderSeqNum =Integer.valueOf(0);
		String policyRefSk = null;
		String carrierName = null;
		String policyNumber = null;
		String coverMBRSK = null; 
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// Member Policies 
		List listofMemberPolicy = tplHIPPDataBean.getTplApplicantMemberPolicyList();
		coverMBRSK = tplHIPPDataBean.getCoverMbrSk();
		if (StringUtils.isNotEmpty(coverMBRSK) && listofMemberPolicy != null)
		{
		 for (int k = 0; k < listofMemberPolicy.size(); k++) 
		 {
		  TPLHIPPApplicantMemberPolicyVO tplHIPPApplicantMemberPolicyVO = (TPLHIPPApplicantMemberPolicyVO) listofMemberPolicy
						.get(k);
		  if (tplHIPPApplicantMemberPolicyVO.getCoverageMemberSK() != null
			  && tplHIPPApplicantMemberPolicyVO.getCoverageMemberSK().equalsIgnoreCase(coverMBRSK)) 
		  {
			 carrierId = tplHIPPApplicantMemberPolicyVO.getCarrierID();
			 tplHIPPApplicantMemberPolicyVO.getCoverageMemberSK();
			 grpPolicySeqNum = tplHIPPApplicantMemberPolicyVO.getGroupPolicySequenceNum();
			 policyHolderId = tplHIPPApplicantMemberPolicyVO.getPolicyHolderID();
			 policyHolderSeqNum = tplHIPPApplicantMemberPolicyVO.getPolicyHolderSeqNumber();
			 policyRefSk = tplHIPPApplicantMemberPolicyVO.getPolicyReferenceSK();
			 carrierName = tplHIPPApplicantMemberPolicyVO.getCarrierName();
			 policyNumber = tplHIPPApplicantMemberPolicyVO.getPolicyNumer();
		  }
		 }
		}
		if (StringUtils.isNotEmpty(policyRefSk))
		{
			tplHIPPEffectivePeriodVOList.setPolicySk(new Long(policyRefSk));
		}
		if(StringUtils.isNotEmpty(policyNumber))
		{
			tplHIPPEffectivePeriodVOList.setPolicyNumber(policyNumber);
		}
		if(StringUtils.isNotEmpty(carrierId))
		{
			tplHIPPEffectivePeriodVOList.setCarrierID(carrierId);
		}
		if(policyHolderSeqNum != null)
		{
			tplHIPPEffectivePeriodVOList.setPolicyHolderSeqNum(policyHolderSeqNum);
		}
		if(grpPolicySeqNum != null)
		{
			tplHIPPEffectivePeriodVOList.setPolicySeqNum(grpPolicySeqNum);
		}
		if(StringUtils.isNotEmpty(carrierName))
		{
			tplHIPPEffectivePeriodVOList.setInsCarrierName(carrierName);
		}
		if(StringUtils.isNotEmpty(coverMBRSK))
		{
			tplHIPPEffectivePeriodVOList.setCoverMBRSK(carrierName);
		}
		if(StringUtils.isNotEmpty(policyRefSk))
		{
			TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
			policyController.getPolicyDetails(new Long(policyRefSk));
		}
		logger.debug("TPLHIPPControllerBean::addPolicyInfo:: END");  	
	}
	
	/**
	 * This method is used to setSelectedItem
	 * 
	 * @param event
	 *            ValueChangeEvent
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	//GLOBAL ACTION COMMENT
	/*public void setSelectedItem(ValueChangeEvent event) {
		String policyNumber = "";
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPApplicantMemberPolicyVO tplHIPPApplicantMemberPolicyVO = (TPLHIPPApplicantMemberPolicyVO) data
				.getRowData();
		policyNumber = tplHIPPApplicantMemberPolicyVO.getPolicyNumer();
	}*/

	/**
	 * This method is used to validateHIPPEffectivePeriod
	 * 
	 * @return result boolean
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	boolean validateHIPPEffectivePeriod(TPLHIPPDataBean tplHIPPDataBean) 
	{ 
		//GLOBAL ACTION COMMENT
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean(); 
		TPLHIPPCaseVO tplHIPPCaseVO = tplHIPPDataBean.getTplHIPPCaseVO(); 
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO =tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO(); 
		boolean result = false; 
		if (tplHIPPEffectivePeriodVO != null) 
		{ 
			SimpleDateFormat sd1 = new SimpleDateFormat(DATE_FORMAT);
			Date hippEffBeginDt = null;
			Date hippEffEndDt = null;
			Date caseEndDt = null;
			Date caseBeginDt = null;
		 try 
		 {
			if (StringUtils.isEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate())) 
			{
			   TPLAdministrationHelper.setAddHIPPInfoMessageToId("error.required", BEGIN_DATE, true,TPLHIPPConstants.HIPPSEARCHPORTLETRESOURCE);
			   result = true; 
		    } 
			else if (TPLHIPPValidatorHelper.isInvalidDate(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
						BEGIN_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);				
				result = true; 
			} 
			else
			{
				hippEffBeginDt = sd1.parse(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
				if(logger.isDebugEnabled()) {
					logger.debug("begin date:"+hippEffBeginDt);

				}

			}
			if (StringUtils.isEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId("error.required", END_DATE, true, TPLHIPPConstants.HIPPSEARCHPORTLETRESOURCE);
				result = true;
			} 
			else if (TPLHIPPValidatorHelper.isInvalidDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
						END_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);
				result = true; 
			}
			else	
			{
				hippEffEndDt = sd1.parse(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
			}
		
		if (StringUtils.isEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveStatus())) 
		{
			TPLAdministrationHelper.setAddHIPPInfoMessageToId("error.required", HIPP_EFFECTIVE_STATUS, true, 
					TPLHIPPConstants.HIPPSEARCHPORTLETRESOURCE); 
			result = true; 
		}// Defect fix: ESPRD00089781 //GLOBAL ACTION CHANGE
		else if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("A"))
		{
		  if (hippEffBeginDt!= null && hippEffEndDt!=null)
		  {				
			result = validateEffectiveDatesforApproved(hippEffBeginDt, hippEffEndDt, tplHIPPDataBean);
		  }
		}
		
		//Commented For Defect ESPRD00790847
		/*if (StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee().toString())) 
		{
		   if(!EnterpriseCommonValidator.validateFloatValue(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee().toString()))
		   {
				TPLAdministrationHelper.setAddHIPPInfo("doubleValidation"); 
				result = true;
		   }
		}*/	
		//Added For Defect ESPRD00790847
		if (!StringUtils.isBlank(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee())
             && !TPLAdministrationHelper.validateValueHippFields(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee()) 
             && !TPLAdministrationHelper.validateHippValue(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee()))
        {
        	TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
					"policyAdministrativeFee", false, TPLHIPPConstants.ADDHIPPPortletResource);
        	result = true;
        }
		// Defect ESPRD00828227 & ESPRD00810152 : Added new flag for ERROR Message
		if(!tplHIPPDataBean.isCaseBgnDateErrflag()){
		if (StringUtils.isEmpty(tplHIPPCaseVO.getCaseBeginDate()))
		{
			TPLHIPPValidateHelper.errorForRequiredField(CASE_BEGIN_DATE);
			result = true;
		}
		else if (TPLHIPPValidatorHelper.isInvalidDate(tplHIPPCaseVO.getCaseBeginDate())) 
		{
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
						CASE_BEGIN_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);
			result = true;
		}
		else
		{
			caseBeginDt = sd1.parse(tplHIPPCaseVO.getCaseBeginDate());
		}
		}
		if (StringUtils.isEmpty(tplHIPPCaseVO.getCaseEndDate())) 
		{
			TPLHIPPValidateHelper.errorForRequiredField(CASE_END_DATE);				
			result = true; 
		}
		else if (TPLHIPPValidatorHelper.isInvalidDate(tplHIPPCaseVO.getCaseEndDate())) 
		{
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
						CASE_END_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);
			result = true; 
		}
		else
		{
			caseEndDt = sd1.parse(tplHIPPCaseVO.getCaseEndDate());
		}
	  }catch (ParseException e1) {
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		  //logger.error("Exception in TPLHIPPControllerBean.validateHIPPEffectivePeriod()", e1);
		    /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("ParseException in validateHIPPEffectivePeriod ",e1);
			}
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		//GLOBAL ACTION CHANGE
		/*if (StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate())
				&& StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate()))*/
		if (hippEffBeginDt!= null && hippEffEndDt!=null)
		{				
		  /*SimpleDateFormat sd = new SimpleDateFormat(DATE_FORMAT);
			try 
			{
				Date hippBeginDateDt = sd.parse(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
			    Date hippEndDateDt = sd.parse(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());*/
		   if(hippEffBeginDt.after(hippEffEndDt))
		   {
			  TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_EFF_BEGEND_DATE, 
								BEGIN_DATE, false, TPLHIPPConstants.ADDHIPPPortletResource);
			  result = true;
		   }
				/*}
				catch (ParseException e)
				{
					logger.error("Exception::::"+e.getMessage());
				}*/
		}
		//ESPRD00890627 commented and added code in major save validation.
		/*List tplAddHIPPEffectivePeriodList = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList(); 
		//ESPRD00843680
		if(tplAddHIPPEffectivePeriodList!=null && tplAddHIPPEffectivePeriodList.size() >= 1 && 
			tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLHIPPConstants.TPL_HIPP_STATUS_APPROVED)) 
		{
			System.out.println("--inside if--");
		 try
		 {
		   boolean check=TPLHIPPCommonValidator.validateHIPPEffectiveDates(tplAddHIPPEffectivePeriodList,hippEffBeginDt, hippEffEndDt,
				   tplHIPPEffectivePeriodVO.getHippCaseSeqNumber());
				   						 //tplHIPPDataBean.getHippCaseSequenceNumber()); //
		   tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate(),tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
		   if(check)
			result=true;
		  }
		  catch(ParseException ex){
			  logger.debug(ex.getMessage());
		  }
		}*/
			/*if(StringUtils.isNotEmpty(tplHIPPCaseVO.getCaseBeginDate()) && 
				StringUtils.isNotEmpty(tplHIPPCaseVO.getCaseEndDate()) &&
				StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate()) && 
				StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate()))
			{
			  if(!TPLHIPPValidatorHelper.isInvalidDate(tplHIPPCaseVO.getCaseEndDate()) && 
				 !TPLHIPPValidatorHelper.isInvalidDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate()))
			  {
				if(!TPLHIPPValidatorHelper.isInvalidDate(tplHIPPCaseVO.getCaseBeginDate()) && 
				   !TPLHIPPValidatorHelper.isInvalidDate(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate()))
				{*/
		  if(hippEffBeginDt!= null && hippEffEndDt!=null && caseBeginDt!=null && caseEndDt!=null) 
		  {
		    if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP10(hippEffEndDt,caseEndDt, hippEffBeginDt,caseBeginDt))
		    {					
			  result = true; 
		    }
		  //}					
		    if (tplHIPPEffectivePeriodVO.getHippEffectiveStatus() != null &&
				tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C")) 
			{
			  if (TPLHIPPValidatorHelper.validateTPLHIPPUPDTHIPP0015(hippEffEndDt)) 
				  {
					  result = true; 
				  }
			}
		  }				
		  // }
		}
		return result; 
	}
	/**
	 * @param ae
	 *            ActionEvent
	 */
	public void sortKey(ActionEvent ae) {
		
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		String SORT_NO = "sortNo", COLUMN = "column", LIST = "list";
		FacesContext facesContext = FacesContext.getCurrentInstance();
		Map map = facesContext.getExternalContext().getRequestParameterMap();
		String paramName = map.get(SORT_NO).toString();
		String column = map.get(COLUMN).toString();
		String listname = map.get(LIST).toString();
		List list = null;
		boolean[] sortFlagTemp = new boolean[] { true, true, true, true, true,
				true, true, true, true, true, true, true, true, true, true,
				true, true, true, true, true, true, true, true, true };		
		 
		try {
			
			if ("tplLetterResponseList".equalsIgnoreCase(listname)) {
				sortFlagTemp[Integer.parseInt(paramName)] = false;
				list = tplHIPPDataBean.getLettersNResponseList();
				setLetterRequestColumnSortFlag(sortFlagTemp);
			}
			if ("memberDetailsList".equalsIgnoreCase(listname)) {
				sortFlagTemp[Integer.parseInt(paramName)] = false;
				list = tplHIPPDataBean.getTplHIPPCaseVO()
						.getTplHIPPMemberDetailVO().getMemberDetailsList();
				setMemberDetailsColumnSortFlag(sortFlagTemp);
				tplHIPPDataBean.setCurrentPageId("memberDetailsListsort");
			}

			if ("memberPolicy".equalsIgnoreCase(listname)) {
				sortFlagTemp[Integer.parseInt(paramName)] = false;
				list = tplHIPPDataBean.getTplApplicantMemberPolicyList();
				setMemberPolicyColumnSortFlag(sortFlagTemp);
				tplHIPPDataBean.setCurrentPageId("memberPolicysort");
			}
			if ("tplAddHIPPEffectivePeriodList".equalsIgnoreCase(listname)) {
				sortFlagTemp[Integer.parseInt(paramName)] = false;
				list = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList();
				setHippEffectivePeriodColumnSortFlag(sortFlagTemp);
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			//	tplHIPPDataBean.setCurrentPageId(TPL_HIPP_EFFECTIVE_PAGE_ID);
				/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
				tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
				/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

			}
			if ("tplAddPremiumList".equals(listname)) {
				sortFlagTemp[Integer.parseInt(paramName)] = false;
				list = tplHIPPDataBean.getTplhipppremiumlist();
				setSearchColumnSortFlag(sortFlagTemp);
				tplHIPPDataBean.setCurrentPageId("tplAddPremiumListsort");
			}
			if ("tplAddPayeeList".equals(listname)) {
				sortFlagTemp[Integer.parseInt(paramName)] = false;
				list = tplHIPPDataBean.getTplAddPayeeList();
				setSearchColumnSortFlag(sortFlagTemp);
				tplHIPPDataBean.setCurrentPageId("addHippPaymentTablesort");
			}	
			if ((Integer.parseInt(paramName)) % 2 == 0) {
				ACSComparator.sort(list, column, true);
			} else {
				ACSComparator.sort(list, column, false);
			}
		} catch (NumberFormatException e) {
				logError("NumberFormatException in sortKey ",e);
		}
	//	logger.info("TPLHIPPControllerBean::sortKey:: END");  
	}
	
	

	/**
	 * This method is used to display member policy details.
	 * 
	 * @return
	 * @param policyVO
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String displaymemberPolicyDetails()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setCurrentPageId("hippEffectiveStatusfocus");
		try 
		{ //GLOBAL ACTION CHANGE
		  if (!validateMemberPolicies(tplHIPPDataBean)) 
		  {
			String EffectiveBeginDate =  null;
			String EffectiveEndDate = null;
			String hippEffectiveStatus = null;
			Long sysIDLong = null;
			String sysID = null;
			if (tplHIPPDataBean.getTplHIPPCaseVO() != null)
			{
			  TPLHIPPCaseVO TplHIPPCaseVO = tplHIPPDataBean.getTplHIPPCaseVO();
			  if (TplHIPPCaseVO.getTplHIPPMemberDetailVO() != null) 
			  {
				if (TplHIPPCaseVO.getTplHIPPMemberDetailVO().getMemberID() != null) 
				{
				  sysID = TplHIPPCaseVO.getTplHIPPMemberDetailVO().getSystemID();
				  if (StringUtils.isNotEmpty(sysID))
						sysIDLong = new Long(sysID);
				}
			  }
			}
			if (tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO() != null) 
			{
			  TPLHIPPEffectivePeriodVO TplHIPPAddEffectivePeriodVO = tplHIPPDataBean
			  								.getTplHIPPAddEffectivePeriodVO();
			  if (TplHIPPAddEffectivePeriodVO != null) 
			  {
				if (TplHIPPAddEffectivePeriodVO.getHippEffectiveBeginDate() != null) 
				{
				   EffectiveBeginDate = TplHIPPAddEffectivePeriodVO.getHippEffectiveBeginDate();
				   //DEFECT FIX ADD ESPRD00725497
					Date tempEffectiveBeginDate = TPLAdministrationHelper.dateConverter(EffectiveBeginDate, null);
					if(tempEffectiveBeginDate != null)
					{
						TplHIPPAddEffectivePeriodVO.setHippEffectiveBeginDate(TPLAdministrationHelper.dateConverter(tempEffectiveBeginDate));
						EffectiveBeginDate=TplHIPPAddEffectivePeriodVO.getHippEffectiveBeginDate();
					}
				}
				if (TplHIPPAddEffectivePeriodVO.getHippEffectiveEndDate() != null) 
				{
				   EffectiveEndDate = TplHIPPAddEffectivePeriodVO.getHippEffectiveEndDate();
				   //DEFECT FIX ADD ESPRD00725497
				   Date tempEffectiveEndDate = TPLAdministrationHelper.dateConverter(EffectiveEndDate, null);
					if(tempEffectiveEndDate != null)
					{
						TplHIPPAddEffectivePeriodVO.setHippEffectiveEndDate(TPLAdministrationHelper.dateConverter(tempEffectiveEndDate));
						EffectiveEndDate=TplHIPPAddEffectivePeriodVO.getHippEffectiveEndDate();
					}
				}
				if (TplHIPPAddEffectivePeriodVO.getHippEffectiveStatus() != null) 
				{
				   hippEffectiveStatus = TplHIPPAddEffectivePeriodVO.getHippEffectiveStatus();
				}
			  }
			}
			if(sysIDLong != null && StringUtils.isNotEmpty(EffectiveBeginDate) 
			   && StringUtils.isNotEmpty(EffectiveEndDate) && StringUtils.isNotEmpty(hippEffectiveStatus))
			{
			  if ("P".equalsIgnoreCase(hippEffectiveStatus)) 
			  {
			   List tplApplicantMemberPolicyList = getPolicyDetails(sysIDLong,EffectiveBeginDate,EffectiveEndDate);
			   if(tplApplicantMemberPolicyList != null && tplApplicantMemberPolicyList.size() >0)
			   {
				  tplHIPPDataBean.setTplApplicantMemberPolicyList(tplApplicantMemberPolicyList);
				  tplHIPPDataBean.setShowMemberPolicy(true);
				  // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
				 // tplHIPPDataBean.setDisableSelectOne(FALSE);
				 	  tplHIPPDataBean.setDisableSelectOne(FALSE_STR);
				 // MT Platform Code Merge (Merge 1 - Iteration1) ends        

				  tplHIPPDataBean.setCoverMbrSk("");
			   }
			   else 
			   {   //ESPRD00884366
				   TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.JSP_HIPPEFF_VIEW_MEM_PLCY,
						   TPLHIPPConstants.JSP_HIPPEFF_MEM_PLCY,false,TPLHIPPConstants.ADDHIPPPortletResource);
			   }
			  }else
			  {
				  TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.JSP_HIPPEFF_VIEW_MEM_PLCY,
						   TPLHIPPConstants.JSP_HIPPEFF_MEM_PLCY,false,TPLHIPPConstants.ADDHIPPPortletResource);
			  }
			}
		  }
		}
		catch (Exception e) 
		{
				logError("Exception in displaymemberPolicyDetails ",e);
		}
		//logger.info("TPLHIPPControllerBean::displaymemberPolicyDetails:: END");  	
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	//	return SUCCESS;
		return SUCCESS_STR;
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}
	private List getPolicyDetails(Long sysIDLong , String effectiveBeginDate , String effectiveEndDate)
	{
		TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
		List tplApplicantMemberPolicyList = null;
		try {
			tplApplicantMemberPolicyList = tplHIPPDelegate.getMemberPolicyDetails(sysIDLong, effectiveBeginDate, effectiveEndDate);
			modifyMemberPolicyDateDetails(tplApplicantMemberPolicyList);
		} catch (TPLHIPPBusinessException e) {
			logger.error(e);
		}
		return tplApplicantMemberPolicyList;
	}
	/*
	 * method to modify  the member policy date details.
	 */
	private List modifyMemberPolicyDateDetails( List tplApplicantMemberPolicyList){
		for(int i=0;i<tplApplicantMemberPolicyList.size();i++){
			TPLHIPPApplicantMemberPolicyVO tPLHIPPApplicantMemberPolicyVO=(TPLHIPPApplicantMemberPolicyVO)tplApplicantMemberPolicyList.get(i);
			tPLHIPPApplicantMemberPolicyVO.setMemCoverageBeginDate(TPLAdministrationHelper
					.dateTimeStampConverter(tPLHIPPApplicantMemberPolicyVO.getMemCoverageBeginDate()));
			tPLHIPPApplicantMemberPolicyVO.setMemCoverageEndDate(TPLAdministrationHelper
					.dateTimeStampConverter(tPLHIPPApplicantMemberPolicyVO.getMemCoverageEndDate()));
		}		
		return tplApplicantMemberPolicyList;		
	}
	
	boolean validateMemberPolicies(TPLHIPPDataBean tplHIPPDataBean) 
	{
		//GLOBAL ACTION COMMENT
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO();
		TPLHIPPCaseVO tplHippCaseVO = tplHIPPDataBean.getTplHIPPCaseVO();
		if (tplHippCaseVO != null) 
		{
			if (tplHippCaseVO.getTplHIPPMemberDetailVO() != null)
			{
				if (StringUtils.isEmpty(tplHippCaseVO.getTplHIPPMemberDetailVO().getSystemID())) 
				{
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_VALID_MEMBER);
					return true;
				}
			}
		}
		boolean result = false;		
		//Defect Fix ESPRD00680059
		if (tplHIPPEffectivePeriodVO != null)
		{
			if (StringUtils.isEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_EFF_BegDateReq,BEGIN_DATE,false,TPLHIPPConstants.ADDHIPPPortletResource);
				result = true;				
			}
			if (StringUtils.isEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate())) 
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_EFF_EndDateReq,END_DATE,false,TPLHIPPConstants.ADDHIPPPortletResource);
				result = true;
			}
			if (StringUtils.isEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveStatus())) 
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_EFF_StatusReq,HIPP_EFFECTIVE_STATUS,false,TPLHIPPConstants.ADDHIPPPortletResource);
				result = true;
			}
		}
		
		return result;
	}
	
	//GLOBAL ACTION COMMENT
	/**
	 * This method is used to valueChangeEventPolicy.
	 * 
	 * @param select
	 *            ValueChangeEvent
	 * @generated "UML to Java  V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 *//*
	public void valueChangeEventPolicy(ValueChangeEvent select) {
		logger.info("TPLHIPPControllerBean::valueChangeEventPolicy:: START"); 
		//String selectedPolicy = "";
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();Find Bug Fix
		//selectedPolicy = (String) select.getNewValue(); Find Bug Fix
		logger.info("TPLHIPPControllerBean::valueChangeEventPolicy:: END"); 
	}*/

	
	/**
	 * This method is used to reset all fields.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void reset() {
		
		try {
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			tplHIPPDataBean.setTplHIPPPayeeInfoVO(null);
		} catch (Exception e) {
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in reset ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		}
		
	}

	/**
	 * This method is used to newAddHippInformation.
	 * 
	 * @return success String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public final LettersAndResponsesDataBean getDataBeanFromContext() {
			FacesContext fc = FacesContext.getCurrentInstance();
			LettersAndResponsesDataBean letterTemplateDataBean = (LettersAndResponsesDataBean) fc
					.getApplication().createValueBinding(
							"#{" + GlobalLetterConstants.LETTER_RESPONSES_DATA_BEAN
									+ "}").getValue(fc);
			return letterTemplateDataBean;
		}
	
	public String newAddHippInformation()
	{
		logger.debug("TPLHIPPControllerBean::newAddHippInformation:: START"); 
		TPLHIPPDataBean tplHIPPDataBean = new TPLHIPPDataBean();
		clearcache();
		LettersAndResponsesDataBean lrDataBean = getDataBeanFromContext();
		if( lrDataBean.getLetterGenerationRequests() !=null && ! lrDataBean.getLetterGenerationRequests().isEmpty())
		{
			lrDataBean.getLetterGenerationRequests().clear();
		}
		lrDataBean.setRenderEditSection(false);
		tplHIPPDataBean.setShowHIPPDetails(true);
		tplHIPPDataBean.setRenderAddFlag(true);
		tplHIPPDataBean.getTplHIPPCaseVO().setCaseEndDate("12/31/9999");
		tplHIPPDataBean.getTplHIPPCaseVO().setHippCaseStatus("P");
		// This is for disable addcovInd.
		tplHIPPDataBean.setAddCoverageIndFlag(false);
		TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
		policyController.addNewTPLPolicy();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		facesContext.getExternalContext().getSessionMap().put("TPLHIPPDataBean", tplHIPPDataBean);
		PortletSession pSession = (PortletSession) facesContext.getExternalContext().getSession(true);
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	/*	String currentPage = (String) pSession.getAttribute(PAGE_VIEW_PORTLET_ATTRIBUTE);	
		if(currentPage != null && currentPage.equals("/jsp/policydetails/addPolicy.jsp") )
		{
			pSession.removeAttribute(PAGE_VIEW_PORTLET_ATTRIBUTE);
		}
		return SUCCESS;*/
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		String currentPage = (String) pSession.getAttribute(PORTLET_VIEW);	
		if(currentPage != null && currentPage.equals("/jsp/policydetails/addPolicy.jsp") )
		{
			pSession.removeAttribute(PORTLET_VIEW);
		}
		return SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}

	/**
	 * This method is used to hipp effective period.
	 * 
	 * @return success String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String addHIPPEffectivePeriod()
	{
		logger.debug("TPLHIPPControllerBean::addHIPPEffectivePeriod:: START"); 
		try
		{
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			TPLHIPPEffectivePeriodVO tplHIPPAddEffectivePeriodVO = new TPLHIPPEffectivePeriodVO();
			// Rule Invocation Context object holds object arrays used in rule
			// execution.
			String ruleId = "TPL0692.0001.01";
			RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
			// Adding object into rule invocation context.
			// Invoke RIF with ruleid and rule invocation objects.
			RulesResultVO rulesResult = null;
			try {
				rulesResult = ruleDelegate.invokeRule();
				if (rulesResult.isReturnBooleanValue()) {
					tplHIPPAddEffectivePeriodVO
							.setPolicyAdministrativeFee(String
									.valueOf(rulesResult.getReturnValue()));
				}
			} catch (RulesDelegateException re) {
				if (rule_time.equals(re.getErrorCode())) {
					logger.warn(RULE_EXPIRED + re.getMessage());
					// If needed perform expires logic here
				}
				logger.info(RULESDELEGATE_EXCEPTION + re);
			}
			logger.info(RULE_EXECUTION_ENDED + ruleId + "\n");
			tplHIPPAddEffectivePeriodVO.setHippEffectiveStatus("P");
			tplHIPPDataBean.setTplHIPPAddEffectivePeriodVO(tplHIPPAddEffectivePeriodVO);
			tplHIPPDataBean.setTempTPLHIPPEffectivePeriodVO(new TPLHIPPEffectivePeriodVO());
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			tplHIPPDataBean.setAddHippEffectivePeriodRendered(true);
			tplHIPPDataBean.setEditHippEffectivePeriod(false);
			tplHIPPDataBean.setShowMemberPolicy(false);
			tplHIPPDataBean.setResultRenderedEffectivePeriod(false);
			tplHIPPDataBean.setShowSuccess(false);
			tplHIPPDataBean.setAddEditHIPPEffPeriodFlag(true);
			tplHIPPDataBean.setViewMemberPolicyRender(true);
			tplHIPPDataBean.setRenderedUpdateHIPPInfo(true);
			tplHIPPDataBean.setTplHIPPPaymentInfoVO(new TPLHIPPPaymentInfoVO());
			tplHIPPDataBean.setTplAddPayeeList(new ArrayList());
			tplHIPPDataBean.setTplApplicantMemberPolicyList(new ArrayList());
			tplHIPPDataBean.setPrevEffectiveStatus("");
			tplHIPPDataBean.setPremiumBeginDate(null);
			tplHIPPDataBean.setPremiumEndDate(null);
			tplHIPPDataBean.setDisableForApproved(false);
			tplHIPPDataBean.setTplHIPPCBAVO(new TPLHIPPCBAVO());
			tplHIPPDataBean.setCalculateFlag(true);
			tplHIPPDataBean.setSaveHippEffRender(false);
			tplHIPPDataBean.setHippEffectiveBeginDate(null);
			tplHIPPDataBean.setHippEffectiveEndDate(null);
			//ESPRD00843680
			tplHIPPDataBean.setHippEffectiveDisable(false);
			//for ESPRD00843781
			tplHIPPDataBean.setDisableForClosed(false);
			//for defect : ESPRD00725499
			tplHIPPDataBean.setAddCoverageIndFlag(false);  //ESPRD00890627
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
			policyController.addNewTPLPolicy();
			//for defect : ESPRD00729642
			FacesContext facesContext = FacesContext.getCurrentInstance();
	        UIViewRoot uiViewRoot = facesContext.getViewRoot();
	        HtmlSelectOneMenu hippEffPeriodstatus = (HtmlSelectOneMenu) 
				uiViewRoot.findComponent("addHippInfo:hippcaseTab:hippCaseInfo:addHippEffectivePeriod:hippEffectiveStatus");
	        hippEffPeriodstatus.setValue("P");
		} 
		catch (Exception e) 
		{
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in addHIPPEffectivePeriod ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		}
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		return SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		
	}
	
	/**
	 * This method is used to hipp effective period.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void editHIPPEffectivePeriod() 
	{ 
	  try 
	  {
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
			//tplHIPPDataBean.setCurrentPageId(TPL_HIPP_EFFECTIVE_PAGE_ID);
		FacesContext facesContext = FacesContext.getCurrentInstance();
		String rowValue = (String) facesContext.getExternalContext().getRequestParameterMap().get(ROW_INDEX);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
	  // MT Platform Code Merge (Merge 1 - Iteration1) ends        

		Integer rowValueInt = new Integer(rowValue); 
		TPLHIPPEffectivePeriodVO tplHIPPAddEffectivePeriodVO = new TPLHIPPEffectivePeriodVO();
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
			                       .getTplAddHIPPEffectivePeriodList().get(rowValueInt.intValue());
		/** Infinite Defect Resolution - ESPRD00680525 - Start */
		tplHIPPDataBean.setCurrentEffective(rowValueInt.intValue());
		tplHIPPDataBean.setShowSuccessPayeeInfo(false);
		tplHIPPDataBean.setSaveHippEffRender(false);
		tplHIPPDataBean.setCommonFieldsRendered(false);
		tplHIPPDataBean.setAddPayeeRendered(false);
		tplHIPPDataBean.setUpdatePayeeRendered(false);
		tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(false);
		/** Infinite Defect Resolution - ESPRD00680525 - End */
	    //Audit			
		if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList()!=null){
	       	UIComponent component=findComponentInRoot("effectiveperiodAuditlogId");
	      	if(component!=null){
	       		AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component ;
	       		auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false);
	       	}
	    }
		List editableEffperiod= new ArrayList();
	    editableEffperiod.add(createAuditableFeild("HIPP Effective begin date",BEGIN_DATE));
	    editableEffperiod.add(createAuditableFeild("HIPP Effective end date",END_DATE));
	    editableEffperiod.add(createAuditableFeild("HIPP Effective status code","statusCode"));
	    editableEffperiod.add(createAuditableFeild("Policy administration fee","policyAdminFeeAmt"));		  
	    if(tplHIPPEffectivePeriodVO.getAuditKeyList() != null 
	    		&& !tplHIPPEffectivePeriodVO.getAuditKeyList().isEmpty())
	    {
	    	AuditDataFilter.filterAuditKeys(editableEffperiod,tplHIPPEffectivePeriodVO);	    		
	    }
		UIComponent component = TPLAdministrationHelper.findComponentInRoot("effectiveperiodAuditlogId");
		if(component!=null){
			AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component;	 					
			auditHistoryTable.setValue(tplHIPPEffectivePeriodVO.getAuditKeyList());
			auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false); 
		}
		tplHIPPDataBean.setCoverMbrSk(tplHIPPEffectivePeriodVO.getCoverMBRSK());
		tplHIPPDataBean.setHippEffectiveBeginDate(TPLAdministrationHelper.dateConverter(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate(), null));
		tplHIPPDataBean.setHippEffectiveEndDate(TPLAdministrationHelper.dateConverter(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate(), null));
		String hippEffectiveBeginDate = tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate();
		String hippEffectiveEndDate = tplHIPPEffectivePeriodVO.getHippEffectiveEndDate();
		String hippEffectiveStatus = tplHIPPEffectivePeriodVO.getHippEffectiveStatus();
		String  sysId = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPMemberDetailVO().getSystemID();
		//
		tplHIPPAddEffectivePeriodVO.setHippEffectiveBeginDate(hippEffectiveBeginDate);
		tplHIPPAddEffectivePeriodVO.setHippEffectiveEndDate(hippEffectiveEndDate);
		tplHIPPAddEffectivePeriodVO.setHippEffectiveStatus(hippEffectiveStatus);
		tplHIPPAddEffectivePeriodVO.setVersionNo(tplHIPPEffectivePeriodVO.getVersionNo());
		tplHIPPAddEffectivePeriodVO.setHippCaseSeqNumber(tplHIPPEffectivePeriodVO.getHippCaseSeqNumber());
		//
		//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveBeginDate(hippEffectiveBeginDate);
		//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveEndDate(hippEffectiveEndDate);
		//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveStatus(hippEffectiveStatus);
		//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setVersionNo(tplHIPPEffectivePeriodVO.getVersionNo());
		//ESPRD00890627
		//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippCaseSeqNumber(tplHIPPEffectivePeriodVO.getHippCaseSeqNumber());
		tplHIPPDataBean.setHippCaseSequenceNumber(tplHIPPEffectivePeriodVO.getHippCaseSeqNumber());
		//Added for defect : ESPRD00843781	
		if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_APPROVED))
		{
			tplHIPPDataBean.setDisableForApproved(true); 
		}else{
			tplHIPPDataBean.setDisableForApproved(false);	
		} //end
		//ESPRD00843781
		if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_CLOSED) 
				|| tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_DENIED))
		{
			tplHIPPDataBean.setDisableForClosed(true);
		}
		else
		{
			tplHIPPDataBean.setDisableForClosed(false);
		}
		//ESPRD00843781
		if(tplHIPPEffectivePeriodVO.getHippCloseDate() != null)
		{
			tplHIPPAddEffectivePeriodVO.setHippCloseDate(tplHIPPEffectivePeriodVO.getHippCloseDate());
			/*tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippCloseDate(
						tplHIPPEffectivePeriodVO.getHippCloseDate());*/
		}else{
			tplHIPPAddEffectivePeriodVO.setHippCloseDate(null);
			//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippCloseDate(null);
		}
		if(tplHIPPEffectivePeriodVO.getHippPeriodApprovalDate() != null)
		{
			tplHIPPAddEffectivePeriodVO.setHippPeriodApprovalDate(tplHIPPEffectivePeriodVO.getHippPeriodApprovalDate());
			/*tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippPeriodApprovalDate(
					tplHIPPEffectivePeriodVO.getHippPeriodApprovalDate());*/
		}else{
			tplHIPPAddEffectivePeriodVO.setHippPeriodApprovalDate(null);
			//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippPeriodApprovalDate(null);
		}
		if (tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate() != null)
		{
			tplHIPPAddEffectivePeriodVO.setHippEffectiveStatusDate(tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate());
			/*tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveStatusDate(
						tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate());*/
		}
		if(StringUtils.isNotEmpty(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID()))
		{					
			tplHIPPDataBean.setPrevEffectiveStatus(tplHIPPEffectivePeriodVO.getHippEffectiveStatus());
			tplHIPPDataBean.setPremiumBeginDate(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getPremiumbeginDate());
			tplHIPPDataBean.setPremiumEndDate(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getPremiumEndDate());
		}
		if (tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee() != null)
		{
			tplHIPPAddEffectivePeriodVO.setPolicyAdministrativeFee(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee().toString());
			//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setPolicyAdministrativeFee(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee().toString());
		}
		tplHIPPDataBean.setTplHIPPPaymentInfoVO(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO());
		if (tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO() != null) 
		{
			tplHIPPDataBean.setTplhipppremiumlist(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplHippPaymentList());
			tplHIPPDataBean.setTplAddPayeeList(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplAddPayeeList()); 
		}
		if (tplHIPPEffectivePeriodVO.getCbaHistoryList() != null)
		{
			tplHIPPDataBean.setCbaHistoryList(tplHIPPEffectivePeriodVO.getCbaHistoryList()); 
		}
		if (tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO() != null)
		{
			tplHIPPDataBean.setTplHIPPPaymentInfoVO(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO());
		}
		if (tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO() != null && tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplAddPayeeList() != null)
		{
			tplHIPPDataBean
					.setTplAddPayeeList(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplAddPayeeList());
		}
		if(StringUtils.isNotEmpty(sysId) && StringUtils.isNotEmpty(hippEffectiveBeginDate) && StringUtils.isNotEmpty(hippEffectiveEndDate) && StringUtils.isNotEmpty(hippEffectiveStatus))
		{
			List tplApplicantMemberPolicyList = null;
			if("P".equalsIgnoreCase(hippEffectiveStatus))
			{
			  tplApplicantMemberPolicyList= getPolicyDetails(new Long(sysId),hippEffectiveBeginDate,hippEffectiveEndDate);
			}
			if(tplApplicantMemberPolicyList != null && tplApplicantMemberPolicyList.size() >0)
			{
			  tplHIPPDataBean.setTplApplicantMemberPolicyList(tplApplicantMemberPolicyList);
			  tplHIPPDataBean.setShowMemberPolicy(true);
			}
			//ESPRD00843680-ESPRD00843674
			if("C".equalsIgnoreCase(hippEffectiveStatus))
			{
				tplHIPPDataBean.setHippEffectiveDisable(true);
			}
			else
			{
				tplHIPPDataBean.setHippEffectiveDisable(false);
			}
		}
		if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("P"))
		{
			tplHIPPDataBean.setShowMemberPolicy(true);
			tplHIPPDataBean.setViewMemberPolicyRender(true);
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			tplHIPPDataBean.setDisableSelectOne(FALSE_STR);
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		else
		{
			tplHIPPDataBean.setRenderedUpdateHIPPInfo(false);
			tplHIPPDataBean.setViewMemberPolicyRender(false);
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			tplHIPPDataBean.setDisableSelectOne(TRUE_STR);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		tplHIPPDataBean.setAddEditHIPPEffPeriodFlag(true);
		tplHIPPDataBean.setEditHippEffectivePeriod(true);
		tplHIPPDataBean.setAddHippEffectivePeriodRendered(true);
		tplHIPPDataBean.setResultRenderedEffectivePeriod(false);
		tplHIPPDataBean.setShowSuccess(false);
		tplHIPPDataBean.setRenderedUpdateHIPPInfo(false);
		// for resetting CBW 
		tplHIPPDataBean.setTplHIPPCBAVO(new TPLHIPPCBAVO());
		if(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID()!=null && 
				StringUtils.isNotEmpty(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID()))
		{
			tplHIPPDataBean.setCalculateFlag(false);		
			tplHIPPDataBean.setShowWorkSheet(true);
		}
		if(tplHIPPDataBean.getTplHIPPCaseVO().getListOfCBAHistory() != null && !tplHIPPDataBean.getTplHIPPCaseVO().getListOfCBAHistory().isEmpty())
		{
			Iterator historyListIterator = tplHIPPDataBean.getTplHIPPCaseVO().getListOfCBAHistory().iterator();
			while(historyListIterator.hasNext())
			{
				TPLHIPPCBAVO tplHIPPCBAVO = (TPLHIPPCBAVO) historyListIterator.next();
				if(tplHIPPCBAVO.getHippCaseSequenceNumber().equalsIgnoreCase(
							tplHIPPEffectivePeriodVO.getHippCaseSeqNumber()))
				{
				  if(tplHIPPCBAVO.getHippCaseStatus().equalsIgnoreCase("A") 
					 && tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("A"))
				  {
					 tplHIPPDataBean.setTplHIPPCBAVO(tplHIPPCBAVO);
					 tplHIPPDataBean.setCalculateFlag(true);
				  }
				  else if(tplHIPPCBAVO.getHippCaseStatus().equalsIgnoreCase("D") 
						  && tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("D"))
				  {
					 tplHIPPDataBean.setTplHIPPCBAVO(tplHIPPCBAVO);
					 tplHIPPDataBean.setShowWorkSheet(false);
				  }
				}
			}
		 }
		 else
		 {
		 	tplHIPPDataBean.setShowWorkSheet(true);
		 }
		if(!(tplHIPPDataBean.getCurrentRecord() == rowValueInt.intValue()))
		{
			if(tplHIPPEffectivePeriodVO.getPolicySk() != null && 
					tplHIPPEffectivePeriodVO.getPolicySk().longValue() > 0)
			{	
			  TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
			  policyController.getPolicyDetails(tplHIPPEffectivePeriodVO.getPolicySk());
			  if(tplHIPPEffectivePeriodVO.getHippAdditionalCoveredIndividualList() != null 
				  && !tplHIPPEffectivePeriodVO.getHippAdditionalCoveredIndividualList().isEmpty())
			  {
				 List coveredIndList = getTPLPolicyDataBean().getCoveredIndividualList();
				 Iterator nonMemberCoveredlist = tplHIPPEffectivePeriodVO.getHippAdditionalCoveredIndividualList().iterator();
				 while(nonMemberCoveredlist.hasNext())
				 {
					CoveredIndividualVO coveredInd = (CoveredIndividualVO)nonMemberCoveredlist.next();
					coveredIndList.add(coveredInd);
				 }
			  }				
			}// Defect ESPRD00808739 : Added condition for remove values from Policy Tab (Not mentioned in Defect)			 
			else{				
				getTPLPolicyDataBean().setPolicyVO(new PolicyVO());
				getTPLPolicyDataBean().setPolicyHolderCoverageList(new ArrayList());
				getTPLPolicyDataBean().setCoveredIndividualList(new ArrayList());
				getTPLPolicyDataBean().setPolicyPeriodCoverageList(new ArrayList());
			}
		}
		// audit
		if(tplHIPPEffectivePeriodVO.getAuditKeyList() != null)
		{
			tplHIPPAddEffectivePeriodVO.setAuditKeyList(tplHIPPEffectivePeriodVO.getAuditKeyList());
			//tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setAuditKeyList(tplHIPPEffectivePeriodVO.getAuditKeyList());
		}
		tplHIPPDataBean.setTplHIPPAddEffectivePeriodVO(tplHIPPAddEffectivePeriodVO);
		tplHIPPDataBean.setCurrentRecord(rowValueInt.intValue());
  	 }
	 catch (Exception e)
	 {
	 // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in editHIPPEffectivePeriod ",e);
			}
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
	 }
	 // MT Platform Code Merge (Merge 1 - Iteration1) ends        

   }
	
	
	
	/**
	 * This method is used to Save HIPP Effective Period for hipp case.
	 * 
	 * @return
	 * @param hippEffectivePeriod
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	public void updateHIPPEffectivePeriod() 
	{
		TPLHIPPDataBean	tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		try
		{
		  if (!validateHIPPEffectivePeriod(tplHIPPDataBean))
		  {
			List addHIPPEffectivePeriodList = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList();
			if (addHIPPEffectivePeriodList.size()>0)
			{					
			  int currentRecord =	tplHIPPDataBean.getCurrentRecord(); 
			  TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO1 =
						(TPLHIPPEffectivePeriodVO)addHIPPEffectivePeriodList.get(currentRecord);
			  TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO =
						     tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO();
			  TPLHIPPEffectivePeriodVO tempTPLHIPPEffectivePeriod = new TPLHIPPEffectivePeriodVO();
			  TPLHIPPEffectivePeriodVO tempHIPPEffectivePeriodVO = tplHIPPDataBean.getTempTPLHIPPEffectivePeriodVO();
			  if(tempHIPPEffectivePeriodVO != null && (tempHIPPEffectivePeriodVO.getPolicyNumber() != null && 
					!tempHIPPEffectivePeriodVO.getPolicyNumber().equalsIgnoreCase("")))
			  {
				if(tempHIPPEffectivePeriodVO.getPolicySk() != null)
				{
					tempTPLHIPPEffectivePeriod.setPolicySk(tempHIPPEffectivePeriodVO.getPolicySk());
				}
				if(StringUtils.isNotEmpty(tempHIPPEffectivePeriodVO.getPolicyNumber()))
				{
					tempTPLHIPPEffectivePeriod.setPolicyNumber(tempHIPPEffectivePeriodVO.getPolicyNumber());
				}
				if(StringUtils.isNotEmpty(tempHIPPEffectivePeriodVO.getCarrierID()))
				{
					tempTPLHIPPEffectivePeriod.setCarrierID(tempHIPPEffectivePeriodVO.getCarrierID());
				}
				if(tempHIPPEffectivePeriodVO.getPolicyHolderSeqNum() != null)
				{
					tempTPLHIPPEffectivePeriod.setPolicyHolderSeqNum(tempHIPPEffectivePeriodVO.getPolicyHolderSeqNum());
				}
				if(tempHIPPEffectivePeriodVO.getPolicySeqNum() != null)
				{
					tempTPLHIPPEffectivePeriod.setPolicySeqNum(tempHIPPEffectivePeriodVO.getPolicySeqNum());
				}
				if(StringUtils.isNotEmpty(tempHIPPEffectivePeriodVO.getInsCarrierName()))
				{
					tempTPLHIPPEffectivePeriod.setInsCarrierName(tempHIPPEffectivePeriodVO.getInsCarrierName());
				}
			  }
			  else
			  {
				String carrierId = tplHIPPEffectivePeriodVO1.getCarrierID(); 
				Integer PolicyHolderSeqNum = tplHIPPEffectivePeriodVO1.getPolicyHolderSeqNum();
				String PolicyNumber = tplHIPPEffectivePeriodVO1.getPolicyNumber(); 
				String carrierName = tplHIPPEffectivePeriodVO1.getInsCarrierName(); 
				Long policySk = tplHIPPEffectivePeriodVO1.getPolicySk(); 
				Integer PolicySeqNum = tplHIPPEffectivePeriodVO1.getPolicySeqNum();
				if(StringUtils.isNotEmpty(carrierId))
				{
				   tempTPLHIPPEffectivePeriod.setCarrierID(carrierId);
				}
				if(PolicyHolderSeqNum != null)
				{
				  tempTPLHIPPEffectivePeriod.setPolicyHolderSeqNum(PolicyHolderSeqNum);
				}
				if(StringUtils.isNotEmpty(PolicyNumber))
				{
				  tempTPLHIPPEffectivePeriod.setPolicyNumber(PolicyNumber);
				}
				if(StringUtils.isNotEmpty(carrierName))
				{
				  tempTPLHIPPEffectivePeriod.setInsCarrierName(carrierName);
				}
				if(policySk != null)
				{
				  tempTPLHIPPEffectivePeriod.setPolicySk(policySk);
				}
				if(PolicySeqNum != null)
				{
				  tempTPLHIPPEffectivePeriod.setPolicySeqNum(PolicySeqNum);
				}
			  }
					
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO1.getHippCaseSeqNumber()))
			  {
			   tempTPLHIPPEffectivePeriod.setHippCaseSeqNumber(tplHIPPEffectivePeriodVO1.getHippCaseSeqNumber());
			  }
			  tempTPLHIPPEffectivePeriod.setVersionNo(tplHIPPEffectivePeriodVO.getVersionNo());
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate()))
			  {
				tempTPLHIPPEffectivePeriod.setHippEffectiveBeginDate(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
			  }
			  //Commented for ESPRD00843680
			 /* if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate()))
			  {
				tempTPLHIPPEffectivePeriod.setHippEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
		  	  }*/
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveStatus()))
			  {
				tempTPLHIPPEffectivePeriod.setHippEffectiveStatus(tplHIPPEffectivePeriodVO.getHippEffectiveStatus());
				//ESPRD00843781
				if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_APPROVED)){
					tplHIPPDataBean.setDisableForApproved(true);
				}else{
					tplHIPPDataBean.setDisableForApproved(false);
				}
				if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_CLOSED)
						|| tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_DENIED)){
					tplHIPPDataBean.setDisableForClosed(true);
				}else{
					tplHIPPDataBean.setDisableForClosed(false);
				}
			  }
			  if (StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee().toString()))
			  {
				tempTPLHIPPEffectivePeriod.setPolicyAdministrativeFee(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee()); 
			  }
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippCloseDate()))
			  {
				tempTPLHIPPEffectivePeriod.setHippCloseDate(tplHIPPEffectivePeriodVO.getHippCloseDate());
			  }
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate()))
			  {
			   	tempTPLHIPPEffectivePeriod.setHippEffectiveStatusDate(tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate());
			  }
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippPeriodApprovalDate()))
			  {
			   	tempTPLHIPPEffectivePeriod.setHippPeriodApprovalDate(tplHIPPEffectivePeriodVO.getHippPeriodApprovalDate());
			  }
			  //ESPRD00843680-ESPRD00843674
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getHippEffectiveStatus())
				&& tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("C"))
			  {
				  SimpleDateFormat sd = new SimpleDateFormat(DATE_FORMAT);
				  Date beginDt= sd.parse(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
				  Date endDt = sd.parse(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
				  if((DateUtility.compareDate(beginDt,getDateOnly(new Date()))==1&& DateUtility.compareDate(endDt,getDateOnly(new Date()))==1)
					 ||(DateUtility.compareDate(beginDt,getDateOnly(new Date()))==2&& DateUtility.compareDate(endDt,getDateOnly(new Date()))==2))
				  {
					  tempTPLHIPPEffectivePeriod.setHippEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());  
				  }
				  else
				  {
					  Format formatter = new SimpleDateFormat(DATE_FORMAT);
					  String endDate = formatter.format(new Date());
					  tempTPLHIPPEffectivePeriod.setHippEffectiveEndDate(endDate);
					 
				  }
				  tplHIPPDataBean.setHippEffectiveDisable(true);
			  }
			  else
			  {
				  tempTPLHIPPEffectivePeriod.setHippEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
				  tplHIPPDataBean.setHippEffectiveDisable(false);
			  }
			  tempTPLHIPPEffectivePeriod.setHippCaseNumber(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID());
			  addHIPPEffectivePeriodList.remove(currentRecord);
			  addHIPPEffectivePeriodList.add(currentRecord, tempTPLHIPPEffectivePeriod);
			  //ESPRD00843680
			  tplHIPPDataBean.setTplHIPPAddEffectivePeriodVO(tempTPLHIPPEffectivePeriod);
			  tplHIPPDataBean.setResultRenderedEffectivePeriod(true); 
			  tplHIPPDataBean.setShowSuccess(true);
			  tplHIPPDataBean.setSaveHippEffRender(true);
			  tplHIPPDataBean.setShowMemberPolicy(false);
			  tplHIPPDataBean.setAddEditHIPPEffPeriodFlag(false);
			  tplHIPPDataBean.setEditHippEffectivePeriod(true);
			  tplHIPPDataBean.setRenderedUpdateHIPPInfo(false);
			  tplHIPPDataBean.setAddHippEffectivePeriodRendered(true);
		  }
		}
		else
		{
		  tplHIPPDataBean.setShowSuccess(false);
		}
	  }
	  catch (Exception e) 
	  {
	  // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in updateHIPPEffectivePeriod ",e);
			}
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
	  }
	  // MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}
	
	/**
	 * This Method is used to resetHIPPEffectivePeriod.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	public void resetHIPPEffectivePeriod() 
	 {
		addHIPPEffectivePeriod();	 	
	 }
	
	/**
	 * This Method is used to resetUpdateHIPPEffectivePeriod.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void resetUpdateHIPPEffectivePeriod()
	{
	  try
	  {
	  	TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO =
			(TPLHIPPEffectivePeriodVO) tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().get(tplHIPPDataBean.getCurrentRecord());
		tplHIPPDataBean.setCoverMbrSk(tplHIPPEffectivePeriodVO.getCoverMBRSK());
		tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveBeginDate(
		 			tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
		tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveEndDate(
		 			tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
		tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveStatus(
		 			tplHIPPEffectivePeriodVO.getHippEffectiveStatus());
		if (tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee() != null) 
		{
		   tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setPolicyAdministrativeFee(
		 				tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee().toString()); 
		}
		tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveStatusDate(
		 			tplHIPPEffectivePeriodVO.getHippEffectiveStatusDate());
		tplHIPPDataBean.setRenderedUpdateHIPPInfo(false);
	 	tplHIPPDataBean.setEditHippEffectivePeriod(true);
	 	tplHIPPDataBean.setAddHippEffectivePeriodRendered(true);
	 	tplHIPPDataBean.setResultRenderedEffectivePeriod(false);
	 	tplHIPPDataBean.setShowMemberPolicy(true);
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	 	/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
	 	tplHIPPDataBean.setCurrentPageId(TPLHIPPEFFECTIVEPERIODFOCUS);
	 	/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	  }
	  catch (Exception e) 
		{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		 // logger.error("Exception in TPLHIPPControllerBean.resetUpdateHIPPEffectivePeriod()", e);    
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in resetUpdateHIPPEffectivePeriod ",e);
			}
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	}

	/**
	 * This Method is used to add attachment for hipp case.
	 * 
	 * @return success String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String addAttachment() 
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
    	/*if(tplHIPPDataBean.getEdmsWrkUnitLevelList().isEmpty()) // GLOBAL ACTION COMMENT
    	{
    		createValidValuesForAttachment();
    	}*/
		// Defect ESPRD00807660 : Clear the VO
		tplHIPPDataBean.setAttachmentsVO(new AttachmentsVO());
        tplHIPPDataBean.setAddAttachmentFlag(false);
		tplHIPPDataBean.setRenderHIPPAttachment(true);
    	tplHIPPDataBean.setShowAddAttachments(true);
		tplHIPPDataBean.setShowEditAttachments(false);
		tplHIPPDataBean.setShowTPLHIPPAttachmentMessages(false);
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	//	tplHIPPDataBean.setCurrentPageId(TPL_HIPP_ATTCHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHIPPDataBean.setCurrentPageId(TPL_HIPP_ATTACHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		return TPLAdministrationConstants.SUCCESS;
	}

	/**
	 * This method is used to edit Attachemnt.
	 * 
	 * @return success String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String editAttachment()
	{
	  try {
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			FacesContext facesContext = FacesContext.getCurrentInstance();
			String rowValue = (String) facesContext.getExternalContext().getRequestParameterMap().get(ROW_INDEX);
			Integer rowValueInt = new Integer(rowValue);
			tplHIPPDataBean.setAttachmentCurrentRecord(rowValueInt.intValue());
			tplHIPPDataBean.setRenderedUpdateAttachment(true);
			tplHIPPDataBean.setShowAttachment(false);
		} catch (Exception exception) {
			logger.debug(exception.getMessage(), exception);
		}
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	  /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		return SUCCESS_STR;
	  /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}


	/**
	 * This method is used to add hipp case
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	/*public void addHIPPCaseInfo() {
		// TODO Auto-generated method stub

	}*/

	/**
	 * This method is used to cancel hipp information.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void cancelUpdateHIPPInfo() {
		TPLHIPPDataBean tplHIPPDataBean = new TPLHIPPDataBean();
		tplHIPPDataBean.setShowHIPPDetails(true);
		tplHIPPDataBean.setRenderedUpdateCancel(true);
		FacesContext facesContext = FacesContext.getCurrentInstance();
		facesContext.getExternalContext().getSessionMap().put(TPLHIPPDataBean.BEAN_NAME_ADDHIPP, tplHIPPDataBean);
	}

	public void cancelAddHIPPInfo() {
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setShowHIPPDetails(false);
		ActionRequest request = (ActionRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
		request.setAttribute("receiveVO2", "ADDHIPPInfo1");
	}

	public void displayaddHippsearchInfo() {
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = new TPLHIPPSearchDataBean();
		FacesContext.getCurrentInstance().getExternalContext().getSessionMap()
				.put(TPLHIPPSearchDataBean.BEAN_NAME, tplHIPPSearchDataBean);
	}

	/**
	 * This method is used to cancel HIPP Effective period of Hipp Case.
	 * 
	 * @return success String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String cancelHIPPEffectivePeriod() {
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setAddHippEffectivePeriodRendered(false);
		tplHIPPDataBean.setShowMemberPolicy(false);
		tplHIPPDataBean.setShowSuccess(false);
		tplHIPPDataBean.setEditHippEffectivePeriod(false);
		tplHIPPDataBean.setAddEditHIPPEffPeriodFlag(false);
		tplHIPPDataBean.setSaveHippEffRender(true);
		//CR ESPRD00915312
		if( null == tplHIPPDataBean.getHippEffectiveBeginDate() 
				|| null== tplHIPPDataBean.getHippEffectiveEndDate()){
			if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null && tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size()>0)
			   {
					populateRecentEffectivePeriodFields();
			   }
		}
		//ESPRD00843680
		tplHIPPDataBean.setHippEffectiveDisable(false);
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		return SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}
	/**
	 * This method is used to cancel HIPP Information details.
	 * 
	 * @return success String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String cancelHIPPInfo()throws IOException
	{
		TPLPolicyDataBean tplPolicyDataBean = getTPLPolicyDataBean();
			tplPolicyDataBean.setShowpolicycovnindividualSuccess(false);
			tplPolicyDataBean.setShowPolicyHolderCoverageSuccess(false);
			//ESPRD00851370 geostan validation
			tplPolicyDataBean.setGeostanFlagForEmployee(false);
			tplPolicyDataBean.setGeostanFlagForPolicyHolder(false);
		
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			tplHIPPDataBean.setShowSuccessPayeeInfo(false);
			tplHIPPDataBean.setShowSuccess(false); //hipp effective period
		 Map sessionMap = FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
		 sessionMap.remove("com.ibm.faces.FACES_MESSAGES");
	     
	     //for defect : 748145
	     FacesContext fc = FacesContext.getCurrentInstance();
	     LettersAndResponsesDataBean letterDataBean = (LettersAndResponsesDataBean) fc
					.getApplication().createValueBinding(
							"#{" + GlobalLetterConstants.LETTER_RESPONSES_DATA_BEAN
									+ "}").getValue(fc);
		 letterDataBean.setRenderEditSection(false);
			//end
		 tplHIPPDataBean.setAddCoverageIndFlag(false);
	     newAddHippInformation();
	     tplHIPPDataBean.setResultRendered(false);
	     Object resObject = FacesContext.getCurrentInstance().getExternalContext().getResponse(); 
	     ActionResponse response = (ActionResponse)resObject;   
	     ActionRequest actionRequest=(ActionRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
         String redirectCosumerContext=actionRequest.getParameter("redirectPortalPageContext");
         if(logger.isDebugEnabled()) {
	         logger.debug("redirectCosumerContext="+redirectCosumerContext);

         }

         if(logger.isInfoEnabled()) {
	         logger.info("redirectCosumerContext="+redirectCosumerContext);

         }

         if(redirectCosumerContext!=null){
				 /* Fix part of TSU. Replace first occurence of "/" else it will form invalid URL */
                 response.sendRedirect(redirectCosumerContext+"wps/myportal/HIPPInformation");
         }else{
                 response.sendRedirect("/wps/myportal/HIPPInformation");
         }	     
	     //response.sendRedirect(urlForCancel);
	     FacesContext.getCurrentInstance().responseComplete();
	    
		 //tplHIPPDataBean.setTabIndex(0);
		 // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	     /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			return SUCCESS_STR;
		 /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		 // MT Platform Code Merge (Merge 1 - Iteration1) ends        

			
	}
	
	public void clearcache() {
		TPLRoutingDataBean tplRoutingDataBean = new TPLRoutingDataBean();
		tplRoutingDataBean.setShowRouting(false);
		tplRoutingDataBean.setShowSucessMessage(false);
		FacesContext facesContext = FacesContext.getCurrentInstance();
		facesContext.getExternalContext().getSessionMap().put("TPLRoutingDataBean", tplRoutingDataBean);
		
	}

	/**
	 * This method is used to save calculate cost benefit amount.
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String calculateCostBenefitAmount()
	{
	 try {
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		logger.debug("entering into calculateCostBenefitAmount --------> ");
		tplHIPPDataBean.setDisableApproveonCalculate(false);// ESPRD01031167
		if(validateCBA(tplHIPPDataBean))
		{				
	 	  TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
		  String hippCaseId = tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID();
		  String hippCaseSequenceNumber = tplHIPPDataBean.getHippCaseSequenceNumber();
		  TPLHIPPCBA tplHIPPCBA = tplHIPPDelegate
							.calculateCBAWorksheet(hippCaseId,new Long(hippCaseSequenceNumber));
		  if(tplHIPPCBA != null)
		  {
		   if(tplHIPPCBA.getFinalCostBenefitAmount() == null && tplHIPPCBA.getPremiumAmount() == null 
			 && tplHIPPCBA.getPolicyDeductibleAmount() == null && tplHIPPCBA.getPolicyAdministrativeFee() == null 
			 && tplHIPPCBA.getTotalCoInsuranceAmount() == null)
		   {
			if(tplHIPPCBA.getCrvdINDIVSummedMedicaidCost() != null && !tplHIPPCBA.getCrvdINDIVSummedMedicaidCost().isEmpty())
			{
			  Iterator itr = tplHIPPCBA.getCrvdINDIVSummedMedicaidCost().iterator();
			  while(itr.hasNext())
			  {
				HIPPCalcIndividual hippCalcIndividual = (HIPPCalcIndividual)itr.next();
				TPLAdministrationHelper.addErrorMessageFromPassesArgs(
						TPLHIPPConstants.TPL_HIPP_MEMBERID_ELIGIBLE,TPLHIPPConstants.ADDHIPPPortletResource,
						new String[] {hippCalcIndividual.getAltID()}, null);
				tplHIPPDataBean.setShowWorkSheet(true);
				tplHIPPDataBean.setDisableApproveonCalculate(true);
			  }
			}
		  }
		  else
		  {
			TPLHIPPConversionHelper tplHIPPConversionHelper = new TPLHIPPConversionHelper();
			TPLHIPPCBAVO tplHIPPCBAVO = tplHIPPConversionHelper.convertHIPPCBADOTOVO(tplHIPPCBA);
			if (tplHIPPCBAVO != null) {
				tplHIPPDataBean.setTplHIPPCBAVO(tplHIPPCBAVO);
				tplHIPPDataBean.setShowWorkSheet(false);
			}
		  }
	     }
		 else
		 {
			tplHIPPDataBean.setTplHIPPCBAVO(new TPLHIPPCBAVO());
			tplHIPPDataBean.setShowWorkSheet(true);
		 }
		}
		else
		{
			tplHIPPDataBean.setShowWorkSheet(true);
		}
	  } catch (TPLHIPPBusinessException hippBusinessException) {
	  // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		  /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("TPLHIPPBusinessException in calculateCostBenefitAmount ",hippBusinessException);
			}
	  } catch (Exception e) {
			if(logger.isErrorEnabled()){
				logger.error("Exception in calculateCostBenefitAmount ",e);
			}
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
	  }
	 	/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		return SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}
	private boolean validateCBA(TPLHIPPDataBean tplHIPPDataBean){
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		//String hippCaseSequenceNumber = tplHIPPDataBean.getHippCaseSequenceNumber();
		boolean validateCBA = true;
		try{
			//String hiipCaseID = tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID();
			if(StringUtils.isEmpty(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID())){
				validateCBA = false;
			}
			if(StringUtils.isEmpty(tplHIPPDataBean.getHippCaseSequenceNumber())){
				validateCBA = false;
			}
			// required fields in payment tab.
			boolean flag = false;
			TPLHIPPPaymentInfoVO tplHIPPPaymentInfoVO = tplHIPPDataBean.getTplHIPPPaymentInfoVO();
			List payeeList = tplHIPPDataBean.getTplAddPayeeList();
			
			if(StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumbeginDate()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYMENT_REQ_CALCULATED, 
						"prembegindate", false, TPLHIPPConstants.ADDHIPPPortletResource);
				flag = true;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
			}
			if(StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumEndDate()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYMENT_REQ_CALCULATED, 
						"premenddate", false, TPLHIPPConstants.ADDHIPPPortletResource);
				flag = true;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
			}
			if(StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumAmount()) || 
					(StringUtils.isNotEmpty(tplHIPPPaymentInfoVO.getPremiumAmount()) && 
							Double.parseDouble(tplHIPPPaymentInfoVO.getPremiumAmount()) <= 0))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYMENT_REQ_CALCULATED, 
						"premiumamount", false, TPLHIPPConstants.ADDHIPPPortletResource);
				flag = true;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
			}
			if(StringUtils.isEmpty(tplHIPPPaymentInfoVO.getFrequency()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYMENT_REQ_CALCULATED, 
						"frequency", false, TPLHIPPConstants.ADDHIPPPortletResource);
				flag = true;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
			}
			if(payeeList.isEmpty())
			{
				TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_PAYMENT_REQ_CALCULATED);
				flag = true;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
			}
			if(flag)
			{			
				validateCBA = false;
			}
			
			// ESPRD01075356 - start
			/*if(!checkMbrMedicaidEligibility(tplHIPPDataBean)){
				validateCBA = false;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
			}*/
			//ESPRD01075356 - end
			
			PolicyVO policyVO = getTPLPolicyDataBean().getPolicyVO();
			List listCovdInd = getTPLPolicyDataBean().getCoveredIndividualList();
			boolean statusFlag = false;
			if(policyVO.getPolicyVoid().equalsIgnoreCase(TRUE))
			{
				statusFlag = false;
			}
			else if (listCovdInd.size() <= TPLAdministrationConstants.ZERO)
			{
				statusFlag = false;
			}
			else
			{		
				for (int i = 0; i <= listCovdInd.size() - 1; i++)
				{
					CoveredIndividualVO coveredIndividualVO = (CoveredIndividualVO) listCovdInd.get(i);	
					if(StringUtils.isNotBlank(coveredIndividualVO.getMemberId()))
					{
						if(!coveredIndividualVO.getStatusCode().equalsIgnoreCase("V"))
						{
							statusFlag = true;
						}		        		        	
					}	
				}		    
			}
			if (!statusFlag){
				TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.COVERED_NOT_EXISTS);
				validateCBA = false;
				tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD01031167
			}
			//GLOBAL ACTION COMMENT
			/*	else
			{
				if(memberEligibility())
				{
					validateCBA = false;
				}
			}*/
		}catch(Exception e) {
			logger.error("Exception in TPLHIPPControllerBean.validateCBA()", e);    
			validateCBA = false;
			tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD1031167
		}
		return validateCBA;
	}
	/**
	 * This method is used to Update HIPP Payee.
	 * 
	 * @return SUCCESS
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	 
	/*private boolean checkMbrMedicaidEligibility(TPLHIPPDataBean tplHIPPDataBean) throws TPLHIPPBusinessException{
		boolean medicaidFlag = true;
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = null;
		String caseEffectiveBeginDate = null;
		String caseEffectiveEndDate = null;
		if(tplHIPPDataBean.getTplHIPPCaseVO() != null
			&& tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPMemberDetailVO() != null 
			&& tplHIPPDataBean.getTplHIPPCaseVO().getTplhippeffectiveperiodvo() != null 
			&& tplHIPPDataBean.getTplHIPPCaseVO().getTplhippeffectiveperiodvo().size() > 0){
			logger.debug("tplHIPPDataBean.getTplHIPPCaseVO().getTplhippeffectiveperiodvo():"+tplHIPPDataBean.getTplHIPPCaseVO().getTplhippeffectiveperiodvo());
			logger.debug("tplHIPPDataBean.getTplHIPPCaseVO().getTplhippeffectiveperiodvo().size():"+tplHIPPDataBean.getTplHIPPCaseVO().getTplhippeffectiveperiodvo().size());
			String mbrId = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPMemberDetailVO().getMemberID();
			String mbrIdType = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPMemberDetailVO().getMemberIDType();
			int currentRow = tplHIPPDataBean.getCurrentRecord();
			tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().get(currentRow);
			if (tplHIPPEffectivePeriodVO != null && mbrId != null && mbrIdType != null){
				caseEffectiveBeginDate = tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate();
				caseEffectiveEndDate = tplHIPPEffectivePeriodVO.getHippEffectiveEndDate();
				TPLHIPPDelegate delegate = new TPLHIPPDelegate();
				logger.debug("mbrId:"+mbrId+", mbrIdType:"+mbrIdType+", caseEffectiveBeginDate:"+caseEffectiveBeginDate+", caseEffectiveEndDate:"+caseEffectiveEndDate);
				medicaidFlag = delegate.getCountOfMbrEligibleMedicaid(mbrId, mbrIdType, caseEffectiveBeginDate, caseEffectiveEndDate);
				if(!medicaidFlag){
					TPLAdministrationHelper.addErrorMessageFromPassesArgs(
						TPLHIPPConstants.TPL_HIPP_MEMBERID_ELIGIBLE, TPLHIPPConstants.ADDHIPPPortletResource,
						new String[] {mbrId}, null);
				}
				logger.debug("medicaidFlag:"+medicaidFlag);
			}
		}
		return medicaidFlag;
	}
*/
	public String updateHIPPPayee() 
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHIPPDataBean.setCurrentPageId(TPL_ADD_PAYEE_FOCUS);
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		/* Commented since added as STRING SUCCESS as Constant */
		//String SUCCESS = "success";
			String SUCCESS = SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		try 
		{
		  List payeeList = tplHIPPDataBean.getTplAddPayeeList();
		  if (!payeeList.isEmpty())
		  {
			if(!validateHIPPPayee(tplHIPPDataBean))
			{
			  int currentRecord = tplHIPPDataBean.getAddPayeeCurrentRecord();
			  TPLHIPPPayeeInfoVO tplHippPayeeInfoVO = new TPLHIPPPayeeInfoVO();
			  TPLHIPPPayeeInfoVO tplDBHippPayeeInfoVO = tplHIPPDataBean.getTplHIPPPayeeInfoVO();
			  // CR ESPRD00679536 -- Begin
			  if(currentRecord > 0)
			  {
				List l = tplHIPPDataBean.getTplAddPayeeList();						
				TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO) l.get(currentRecord - 1);	
				Date currentPayeeBeginDate = dateformatYYYYMMDD.parse(
						                      tplDBHippPayeeInfoVO.getAddPayeeEffectiveBeginDate());
				Date payeeEndDate = dateformatYYYYMMDD.parse(payeeInfoVO.getPayeeEffectiveEndDate());
				//changed for defect :ESPRD00776499
				payeeEndDate = DateUtility.addDayToDate(currentPayeeBeginDate, -1);
				payeeInfoVO.setPayeeEffectiveEndDate(dateformatYYYYMMDD.format(payeeEndDate));
				/*if(DateUtility.compareDate(currentPayeeBeginDate, payeeEndDate) != 1)
				{
					payeeEndDate = DateUtility.addDayToDate(currentPayeeBeginDate, -1);
					payeeInfoVO.setPayeeEffectiveEndDate(dateformatYYYYMMDD.format(payeeEndDate));
				}*/
			  }
			  // End
			  tplHippPayeeInfoVO.setPayeeEffectiveBeginDate(tplDBHippPayeeInfoVO.getAddPayeeEffectiveBeginDate());
		  	  tplHippPayeeInfoVO.setPayeeEffectiveEndDate(tplDBHippPayeeInfoVO.getAddPayeeEffectiveEndDate());
			  tplHippPayeeInfoVO.setPayeeName(tplDBHippPayeeInfoVO.getPayeeName());				
			  tplHippPayeeInfoVO.setEntityIDType(tplDBHippPayeeInfoVO.getEntityIDType());
			  tplHippPayeeInfoVO.setEntityID(tplDBHippPayeeInfoVO.getEntityID());
			  String description=getSourceCodeDescription(tplHIPPDataBean.getEntityTypeList(),
					  							 		tplDBHippPayeeInfoVO.getEntityType());
			  tplHippPayeeInfoVO.setEntityType(description);
			  tplHippPayeeInfoVO.setAddress(tplDBHippPayeeInfoVO.getAddress());
			  tplHippPayeeInfoVO.setCity(tplDBHippPayeeInfoVO.getCity());
			  tplHippPayeeInfoVO.setState(tplDBHippPayeeInfoVO.getState());
			  tplHippPayeeInfoVO.setZip(tplDBHippPayeeInfoVO.getZip());
			  tplHippPayeeInfoVO.setPayeeID(tplDBHippPayeeInfoVO.getPayeeID());
			  tplHippPayeeInfoVO.setPayeeSequenceNumber(tplDBHippPayeeInfoVO.getPayeeSequenceNumber());
			  payeeList.remove(currentRecord);
			  payeeList.add(currentRecord, tplHippPayeeInfoVO);
			  tplHIPPDataBean.setShowSuccessPayeeInfo(true);
			  tplHIPPDataBean.setUpdatePayeeRendered(true);
			  tplHIPPDataBean.setAddPayeeRendered(false);
			  tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(false);
			  tplHIPPDataBean.setSaveHippPayeeRender(true);
			}
		  }
		} 
		catch (Exception e) 
		{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in updateHIPPPayee ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		return SUCCESS;
	}

	/**
	 * This method id used to Save HIPPPayee
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	public String saveHIPPPayee() 
	{
	  TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
	  tplHIPPDataBean.setCurrentPageId(TPL_ADD_PAYEE_FOCUS);
	  try 
	  {
	    if (!validateHIPPPayee(tplHIPPDataBean)) 
		{
		  //TPLHIPPConversionHelper tplHippConversionHelper = new TPLHIPPConversionHelper();
		  List l = tplHIPPDataBean.getTplAddPayeeList();
		  if (l == null)
		  {
			l = new ArrayList();
		  }
		  TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = new TPLHIPPPayeeInfoVO();
		  // CR ESPRD00679536 -- Begin
		  TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = null;
		  TPLHIPPPayeeInfoVO tplDBHIPPPayeeInfoVO = tplHIPPDataBean.getTplHIPPPayeeInfoVO();
		  if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null 
			 && tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size() > 0)
		  {
			int currentRow = tplHIPPDataBean.getCurrentRecord();					
			tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
							.getTplAddHIPPEffectivePeriodList().get(currentRow);
			if(l.size() == 0)
			{
			 /* if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null 
					  && tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size()>0)
			  {	*/											
				tplHIPPPayeeInfoVO.setPayeeEffectiveBeginDate(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
				tplHIPPPayeeInfoVO.setPayeeEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
				tplDBHIPPPayeeInfoVO.setAddPayeeEffectiveBeginDate(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
				tplDBHIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
			  //}
			}
			else
			{
				if(l.size()>=2)
					ACSComparator.sort(l, "getPayeeEffectiveBeginDate", true);
			  Date effEndDate = dateformatYYYYMMDD.parse(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
			  tplHIPPPayeeInfoVO.setPayeeEffectiveBeginDate(tplDBHIPPPayeeInfoVO.getAddPayeeEffectiveBeginDate());
			  boolean flag = true;
			  for(int i = 0; i < l.size(); i++)
			  {						
				TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO) l.get(i);						
				Date currentPayeeBeginDate = dateformatYYYYMMDD.parse(
						                     tplDBHIPPPayeeInfoVO.getAddPayeeEffectiveBeginDate());
				Date payeeBeginDate = dateformatYYYYMMDD.parse(payeeInfoVO.getPayeeEffectiveBeginDate());
				Date payeeEndDate = dateformatYYYYMMDD.parse(payeeInfoVO.getPayeeEffectiveEndDate());
				
				if(DateUtility.between(currentPayeeBeginDate, payeeBeginDate, payeeEndDate)){
					 payeeEndDate = DateUtility.addDayToDate(currentPayeeBeginDate, -1);
					 payeeInfoVO.setPayeeEffectiveEndDate(dateformatYYYYMMDD.format(payeeEndDate));
					 if(l.size()== (i+1)){
						 tplHIPPPayeeInfoVO.setPayeeEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
					 }
				}else if(DateUtility.compareDate(currentPayeeBeginDate,payeeBeginDate)==2 && flag){
					String endDate = dateformatYYYYMMDD.format(DateUtility.addDayToDate(payeeBeginDate, -1));
					tplHIPPPayeeInfoVO.setPayeeEffectiveEndDate(endDate);
					tplDBHIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(endDate);
					flag = false;
				}
				/*if(DateUtility.compareDate(effEndDate, payeeEndDate) == 0)
				{
				  payeeEndDate = DateUtility.addDayToDate(currentPayeeBeginDate, -1);
				  payeeInfoVO.setPayeeEffectiveEndDate(dateformatYYYYMMDD.format(payeeEndDate));
				  break;
				}*/							
			  }					
			 //tplHIPPPayeeInfoVO.setPayeeEffectiveBeginDate(tplDBHIPPPayeeInfoVO.getAddPayeeEffectiveBeginDate());
			//  tplHIPPPayeeInfoVO.setPayeeEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
			}
		  }				
		  // End		
		  tplHIPPPayeeInfoVO.setPayeeName(tplDBHIPPPayeeInfoVO.getPayeeName());				
		  tplHIPPPayeeInfoVO.setEntityIDType(tplDBHIPPPayeeInfoVO.getEntityIDType());
		  tplHIPPPayeeInfoVO.setEntityID(tplDBHIPPPayeeInfoVO.getEntityID());
		  String description=getSourceCodeDescription(tplHIPPDataBean.getEntityTypeList(),
												      tplDBHIPPPayeeInfoVO.getEntityType());
		  tplHIPPPayeeInfoVO.setEntityType(description);				
		  tplHIPPPayeeInfoVO.setAddress(tplDBHIPPPayeeInfoVO.getAddress());
		  tplHIPPPayeeInfoVO.setAddress2(tplDBHIPPPayeeInfoVO.getAddress2());
		  tplHIPPPayeeInfoVO.setCity(tplDBHIPPPayeeInfoVO.getCity());
		  tplHIPPPayeeInfoVO.setState(tplDBHIPPPayeeInfoVO.getState());
		  tplHIPPPayeeInfoVO.setZip(tplDBHIPPPayeeInfoVO.getZip());
		  tplHIPPPayeeInfoVO.setPayeeID(tplDBHIPPPayeeInfoVO.getPayeeID());
		  l.add(tplHIPPPayeeInfoVO);
		  if(l.size()>=2)
				ACSComparator.sort(l, "getPayeeEffectiveBeginDate", true);
		  tplHIPPDataBean.setTplAddPayeeList(l);
		  tplHIPPDataBean.setAddPayeeCurrentRecord(l.size()-1);
		  tplHIPPDataBean.setShowSuccessPayeeInfo(true);
		  tplHIPPDataBean.setAddPayeeRendered(false);
		  tplHIPPDataBean.setUpdatePayeeRendered(true);
		  tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(false);
		  tplHIPPDataBean.setSaveHippPayeeRender(true);
	  }
	 } 
	 catch (Exception e) 
	 {
	 // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in saveHIPPPayee ",e);
			}
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	 }
	 return TPLAdministrationConstants.ADD_PAYEE_SUCCESS;
	}

	/**
	 * This method is used to validateHIPPPayee
	 * 
	 * @return result boolean
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	boolean validateHIPPPayee(TPLHIPPDataBean tplHIPPDataBean)
	{
	  //TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
	  TPLHIPPPayeeInfoVO payeeVO = tplHIPPDataBean.getTplHIPPPayeeInfoVO();
	  TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = null;
	  boolean result = false;
	  if (payeeVO != null) 
	  {
		if(payeeVO.getEntityType() != null && "TC".equalsIgnoreCase(payeeVO.getEntityType()))
		{
		  payeeVO.setEntityIDType("C");
		}
		if(TPLHIPPValidateHelper.validateHippPayment(tplHIPPDataBean))
		{
		 try
		 {
		   //AddPayeeEffectiveBeginDate Validation
			if (StringUtils.isNotEmpty(payeeVO.getAddPayeeEffectiveBeginDate()))
	        {	
			   Date bgdate = TPLHIPPValidatorHelper.dateConverter(payeeVO.getAddPayeeEffectiveBeginDate());
			   if(bgdate!=null){
				   String bdate = TPLAdministrationHelper.dateConverter(bgdate);
				   payeeVO.setAddPayeeEffectiveBeginDate(bdate);
	           }else{
	        	  TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_INVALID_DATE,TPLHIPPConstants.JSP_TPL_HIPP_INVALID_DATE);
	        	  result = true;
	           }
	        }
			if (StringUtils.isNotEmpty(payeeVO.getAddPayeeEffectiveEndDate()))
	        {			
			   Date bgdate = TPLHIPPValidatorHelper.dateConverter(payeeVO.getAddPayeeEffectiveEndDate());
               if(bgdate!=null){
			      String bdate = TPLAdministrationHelper.dateConverter(bgdate);
                  payeeVO.setAddPayeeEffectiveEndDate(bdate);               
		       }else{
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_INVALID_DATE,TPLHIPPConstants.JSP_TPL_HIPP_INVALID_END_DATE);
	        	    result = true;
	           }
	        }
		   if (TPLHIPPValidatorHelper.validatePayeeDates(payeeVO.getAddPayeeEffectiveBeginDate(), payeeVO
						.getAddPayeeEffectiveEndDate()))
		   {
					result = true;
		   }
		   List payeeList = tplHIPPDataBean.getTplAddPayeeList();
		   if(payeeList != null && payeeList.size()>0)
		   {
			 if(StringUtils.isNotEmpty(payeeVO.getAddPayeeEffectiveBeginDate()) && 
				StringUtils.isNotEmpty(payeeVO.getAddPayeeEffectiveEndDate()))
			 {
				 // Commented -- CR 716985
			     /*Iterator payeeItr = payeeList.iterator();
				 boolean dupFlag = false;
				 while(payeeItr.hasNext())
				 {
				   TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeItr.next();							
				   if(payeeInfoVO != null)
				   {		
					try //GLOBAL ACTION COMMENT 
					{
					  Date presBDate = dateformatYYYYMMDD.parse(payeeVO.getAddPayeeEffectiveBeginDate());
					  Date prevBDate = dateformatYYYYMMDD.parse(payeeInfoVO.getPayeeEffectiveBeginDate());
					  if(DateUtility.compareDate(presBDate, prevBDate) == 0)
					  {
						dupFlag = true;
					  }
					  }
					catch(ParseException pe)
					{
						pe.printStackTrace();
					}								
				   }
				 }
				 if(dupFlag)
				 {
				   if(tplHIPPDataBean.isAddPayeeRendered())
				   {								
					 TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_PAYEE_BEGEND_DATE_CHECK,"payeeBeginDate",
										false, TPLHIPPConstants.ADDHIPPPortletResource);
					 result = true;
				   }
				 }*/
				 
				 // CR ESPRD00679536 -- Begin
				/* try
				 {*/
				   Date payeeBeginDate =  dateformatYYYYMMDD.parse(payeeVO.getAddPayeeEffectiveBeginDate());
				   if(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getLastPaymentDate() != null)
				   {
					 Date lastPymtDate =  dateformatYYYYMMDD.parse(
							            tplHIPPDataBean.getTplHIPPPaymentInfoVO().getLastPaymentDate());
								
					 if(lastPymtDate != null)
					 {
						if(DateUtility.compareDate(payeeBeginDate, lastPymtDate) == 2)
					    {
						  TPLAdministrationHelper.addErrorMessageFromPassesArgs(
								TPLHIPPConstants.TPL_HIPP_PYE_BEGDATE,TPLHIPPConstants.ADDHIPPPortletResource,
								new String[] {dateformatYYYYMMDD.format(lastPymtDate)}, "payeeBeginDate");
						  result = true;
						}
					 }
				   }
				   if(tplHIPPDataBean.isUpdatePayeeRendered())
				   {
					  int currentRecord = tplHIPPDataBean.getAddPayeeCurrentRecord();
					  if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null 
										&& tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size() > 0)
					  {
						 int currentRow = tplHIPPDataBean.getCurrentRecord();					
						 tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
											.getTplAddHIPPEffectivePeriodList().get(currentRow);
						 Date effBeginDate  = dateformatYYYYMMDD.parse(
											tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
						 if(currentRecord == 0)
						 {									
						   if(DateUtility.compareDate(effBeginDate, payeeBeginDate) != 0)
						   {
							 TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PYE_CONTINOUS,"payeeBeginDate",
													false, TPLHIPPConstants.ADDHIPPPortletResource);
							 result = true;
						   }
						 }
						 else
						 {
							TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeList.get(currentRecord - 1);
							Date prevPayeeEndDate = dateformatYYYYMMDD.parse(
												payeeInfoVO.getPayeeEffectiveEndDate());
							//changed for defect ESPRD00776499
							
							/*prevPayeeEndDate = DateUtility.addDayToDate(prevPayeeEndDate, +1);
							if(DateUtility.compareDate(payeeBeginDate, prevPayeeEndDate) == 1)
							{
							  TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PYE_CONTINOUS,"payeeBeginDate",
												false, TPLHIPPConstants.ADDHIPPPortletResource);
							  result = true;
							}*/
							Date sysDate = new Date();						
							if(DateUtility.compareDate(prevPayeeEndDate, sysDate) == 2)   {							      
							      TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PYE_CONTINOUS,"payeeBeginDate",
												false, TPLHIPPConstants.ADDHIPPPortletResource);
								  result = true;
							  }	
						  }
					   }							
					}															
				 /*}					
				 catch(ParseException e)
				 {
				   e.printStackTrace();
				 }*/
			    
			  }
		   }
				
		   String caseEffectiveBeginDate = null;
		   String caseEffectiveEndDate = null;
		   if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null && tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size()>0)
		   {
			  int currentRow = tplHIPPDataBean.getCurrentRecord();
			  tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
				  			            .getTplAddHIPPEffectivePeriodList().get(currentRow);
			  if (tplHIPPEffectivePeriodVO != null)
			  {
				caseEffectiveBeginDate = tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate();
				caseEffectiveEndDate = tplHIPPEffectivePeriodVO.getHippEffectiveEndDate();
										
				if (StringUtils.isNotEmpty(caseEffectiveBeginDate) && StringUtils.isNotEmpty(caseEffectiveEndDate)
					 && StringUtils.isNotEmpty(payeeVO.getAddPayeeEffectiveBeginDate())
					 && StringUtils.isNotEmpty(payeeVO.getAddPayeeEffectiveEndDate())) 
				{						
				  if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0044(
						 caseEffectiveEndDate, caseEffectiveBeginDate, payeeVO.getAddPayeeEffectiveBeginDate(), 
						 payeeVO.getAddPayeeEffectiveEndDate()))
				  {
						result = true;
				  }
				}
			  }
			}
				
			/*try //GLOBAL ACTION COMMENT
			{*/
		   if(result == false)
		   {
				TPLHIPPDelegate delegate = new TPLHIPPDelegate();					
				TPLHIPPPayeeInfoVO hIPPPayeeInfoVO = delegate.validateEntityID(payeeVO.getEntityType(), 
							payeeVO.getEntityID(), payeeVO.getEntityIDType());
				if(hIPPPayeeInfoVO != null)
				{	
				  if (hIPPPayeeInfoVO.getPayeeID() == null)
				  {
				         TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_CASE_ADD_ENTITY,ENTITY_ID,
						false, TPLHIPPConstants.ADDHIPPPortletResource);
					 tplHIPPDataBean.setShowAddressDetails(true);
					 result = true;
				  }else if(hIPPPayeeInfoVO.getVendorMasterNumber() == null) {
					 //   ESPRD00808501 :: Add To Display error message 9-1030-3550.
				      TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_CASE_ENTITY_NOVENDERNUM,ENTITY_ID,
						false, TPLHIPPConstants.ADDHIPPPortletResource);
					 tplHIPPDataBean.setShowAddressDetails(true);
					 result = true;
				}						
				  hIPPPayeeInfoVO.setAddPayeeEffectiveBeginDate(payeeVO.getAddPayeeEffectiveBeginDate());
				  hIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(payeeVO.getAddPayeeEffectiveEndDate());
				  hIPPPayeeInfoVO.setPayeeSequenceNumber(payeeVO.getPayeeSequenceNumber());
				  tplHIPPDataBean.setTplHIPPPayeeInfoVO(hIPPPayeeInfoVO);
				}
				else
				{
				  hIPPPayeeInfoVO = new TPLHIPPPayeeInfoVO();
				  if (payeeVO.getAddPayeeEffectiveBeginDate()!=null)
				  {
					hIPPPayeeInfoVO.setAddPayeeEffectiveBeginDate(payeeVO.getAddPayeeEffectiveBeginDate());
				  }
				  if (payeeVO.getAddPayeeEffectiveEndDate()!=null)
				  {
					hIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(payeeVO.getAddPayeeEffectiveEndDate());
				  }
				  hIPPPayeeInfoVO.setEntityID(payeeVO.getEntityID());
				  hIPPPayeeInfoVO.setEntityIDType(payeeVO.getEntityIDType());
				  hIPPPayeeInfoVO.setEntityType(payeeVO.getEntityType());
				  hIPPPayeeInfoVO.setPayeeSequenceNumber(payeeVO.getPayeeSequenceNumber());
				  tplHIPPDataBean.setTplHIPPPayeeInfoVO(hIPPPayeeInfoVO);
				  TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.ENTITY_DETAILS_NOT_FOUND);
				  tplHIPPDataBean.setShowAddressDetails(false);
				  result = true;
			   }
		     }
			}
		 	catch(ParseException e)
		 	{
		 		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
				if(logger.isErrorEnabled()){
					logger.error("ParseException in validateHIPPPayee ",e);
				}
		 	}
			catch(TPLHIPPBusinessException e)
			{
				if(logger.isErrorEnabled()){
					logger.error("TPLHIPPBusinessException in validateHIPPPayee ",e);
				}
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			}
	 	  }		
		  else
		  {
			result = true;
		  }
		}
		return result;
	}

	/**
	 * This method id used to Validate entityID
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void validateEntityID()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setCurrentPageId("tplAddPayeeFocus2");
		try 
		{   //GLOBAL ACTION CHANGE
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfo = tplHIPPDataBean.getTplHIPPPayeeInfoVO();
			if (!validateEntityDetails(tplHIPPDataBean,tplHIPPPayeeInfo)) 
			{
				TPLHIPPDelegate tplHIPPDelegate =new TPLHIPPDelegate();
				String entityType = null;
				String entityIDType = null;
				String entityID = null;
				if (tplHIPPPayeeInfo != null)
				{
					if (tplHIPPPayeeInfo.getEntityID() != null)
					{
						entityID = tplHIPPPayeeInfo.getEntityID();						
					}
					if (tplHIPPPayeeInfo.getEntityType() != null) 
					{
						entityType = tplHIPPPayeeInfo.getEntityType();
						// CR ESPRD00679536 -- Begin
						if("TC".equalsIgnoreCase(entityType))
						{
							tplHIPPPayeeInfo.setEntityIDType("C");
						}
						// End
					}
					if (tplHIPPPayeeInfo.getEntityIDType() != null) 
					{
						entityIDType = tplHIPPPayeeInfo.getEntityIDType();						
					}
					TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = tplHIPPDelegate
							.validateEntityID(entityType, entityID, entityIDType);
					if(tplHIPPPayeeInfoVO != null)
					{
						if (tplHIPPPayeeInfoVO.getPayeeID() == null)
						{
							TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_CASE_ADD_ENTITY,ENTITY_ID,
									false, TPLHIPPConstants.ADDHIPPPortletResource);
						}else if(tplHIPPPayeeInfoVO.getVendorMasterNumber() == null) {
						 //   ESPRD00808501 :: Add To Display error message 9-1030-3550.
						        TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_CASE_ENTITY_NOVENDERNUM,ENTITY_ID,
								false, TPLHIPPConstants.ADDHIPPPortletResource);
						}
						if (tplHIPPPayeeInfo.getAddPayeeEffectiveBeginDate()!=null)
						{
							tplHIPPPayeeInfoVO.setAddPayeeEffectiveBeginDate(
									tplHIPPPayeeInfo.getAddPayeeEffectiveBeginDate());
						}
						if (tplHIPPPayeeInfo.getAddPayeeEffectiveEndDate()!=null)
						{
							tplHIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(
									tplHIPPPayeeInfo.getAddPayeeEffectiveEndDate());
						}
						tplHIPPDataBean.setTplHIPPPayeeInfoVO(tplHIPPPayeeInfoVO);
						tplHIPPDataBean.setShowAddressDetails(true);
					}else if(tplHIPPPayeeInfoVO == null)
					{
						tplHIPPPayeeInfoVO = new TPLHIPPPayeeInfoVO();
						if (tplHIPPPayeeInfo.getAddPayeeEffectiveBeginDate()!=null)
						{
							tplHIPPPayeeInfoVO.setAddPayeeEffectiveBeginDate(
									tplHIPPPayeeInfo.getAddPayeeEffectiveBeginDate());
						}
						if (tplHIPPPayeeInfo.getAddPayeeEffectiveEndDate()!=null)
						{
							tplHIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(
									tplHIPPPayeeInfo.getAddPayeeEffectiveEndDate());
						}
						tplHIPPPayeeInfoVO.setEntityID(tplHIPPPayeeInfo.getEntityID());
						tplHIPPPayeeInfoVO.setEntityIDType(tplHIPPPayeeInfo.getEntityIDType());
						tplHIPPPayeeInfoVO.setEntityType(tplHIPPPayeeInfo.getEntityType());
						tplHIPPDataBean.setTplHIPPPayeeInfoVO(tplHIPPPayeeInfoVO);
						tplHIPPDataBean.setShowAddressDetails(false);
						TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYEE_ENTITYID_INVALID, 
								ENTITY_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);
					}
				}
			}
		} 
		 catch (TPLHIPPBusinessException be)
		{
		//Modified for ESPRD01021230
			/*TPLHIPPDataBean tPlHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			TPLHIPPPayeeInfoVO tPlHIPPPayeeInfo = tPlHIPPDataBean.getTplHIPPPayeeInfoVO();
			if(tPlHIPPPayeeInfo.getEntityID() != null){
			if("error.tpl.hipp.payee.entityid.invalid".equals(be.getMessage()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYEE_ENTITYID_INVALID, 
								ENTITY_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);
			}	
			else
			{
			TPLAdministrationHelper.setMessage(TPLAdministrationConstants.CONNECTION_FAILURE);
			}
			/be.printStackTrace();
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PAYEE_ENTITYID_INVALID, 
					ENTITY_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);
			FacesMessage message = new FacesMessage();
			message.setDetail(be.getMessage());
			FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, message);
			*/
			FacesContext facesContext = FacesContext.getCurrentInstance();
			facesContext.addMessage(null,new FacesMessage(ResourceBundle.getBundle(TPLHIPPConstants.ADDHIPPPortletResource)
			.getString(TPLHIPPConstants.TPL_HIPP_CASE_ADD_ENTITY)));
		}
		
		catch (Exception e) 
		{
			FacesMessage message = new FacesMessage();
			message.setDetail(e.getMessage());
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, message);
		FacesContext.getCurrentInstance().addMessage(ABC_STR, message);
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	}

	/**
	 * This method is used to validateEntityDetails
	 * 
	 * @return result boolean
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	boolean validateEntityDetails(TPLHIPPDataBean tplHIPPDataBean,TPLHIPPPayeeInfoVO payeeVO) 
	{
		//GLOBAL ACTION CHANGE
		/*TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPPayeeInfoVO payeeVO = tplHIPPDataBean.getTplHIPPPayeeInfoVO();*/
		boolean result = false;
		if (payeeVO != null) 
		{
			if(payeeVO.getEntityType() != null && "TC".equalsIgnoreCase(payeeVO.getEntityType()))
			{
				payeeVO.setEntityIDType("C");
			}
			if (StringUtils.isEmpty(payeeVO.getEntityType())) 
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PYE_ENT_TYPE_REQ, 
						"entitytype", false, TPLHIPPConstants.ADDHIPPPortletResource);	
				result = true;
			}			
			if (StringUtils.isEmpty(payeeVO.getEntityIDType())) 
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_ENTITYIDTYPE, 
						"entityidtype", false, TPLHIPPConstants.ADDHIPPPortletResource);	
				result = true;
			}
			if (StringUtils.isEmpty(payeeVO.getEntityID()))
			{
				TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PYE_ENT_ID_REQ, 
						ENTITY_ID, false, TPLHIPPConstants.ADDHIPPPortletResource);	
				result = true;
			}
			
			
			// Commented -- CR 716985
			/*if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0058(payeeVO.getEntityID(), 
					payeeVO.getEntityIDType(), payeeVO.getEntityType())) 
			{
				return true;
			}*/
			// Commented -- CR 716985
			/*if(StringUtils.isNotBlank(payeeVO.getEntityType()) && 
					(payeeVO.getEntityType().equalsIgnoreCase("M")) || 
					(payeeVO.getEntityType().equalsIgnoreCase("P"))) 
			{
				if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0059(payeeVO.getEntityID(), 
						payeeVO.getEntityIDType(), payeeVO.getEntityType()))
				{
					return true;
				}
			}*/
			
			if (!StringUtils.isAlphanumeric(payeeVO.getEntityID())) 
			{
				message("Please enter the data in correct format");
				return true;
			}
		}
		return result;
	}

	/**
	 * This method is used to show add payee.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */

	public void showAddPayee()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		//CR ESPRD00915312
		if( null == tplHIPPDataBean.getHippEffectiveBeginDate() 
				|| null== tplHIPPDataBean.getHippEffectiveEndDate()
				||  tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() == null){
			TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPPEFF_PAYEE);
		}else{
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = new TPLHIPPPayeeInfoVO();
			// CR ESPRD00679536 -- Begin
			TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = null;
			if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null 
					&& tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size() > 0)
			{
				int currentRow = tplHIPPDataBean.getCurrentRecord();					
				tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
				.getTplAddHIPPEffectivePeriodList().get(currentRow);
				if(tplHIPPDataBean.getTplAddPayeeList() != null  
						&& tplHIPPDataBean.getTplAddPayeeList().size() == 0)
				{
					tplHIPPPayeeInfoVO.setAddPayeeEffectiveBeginDate(
							tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
					tplHIPPDataBean.setDisablePayeeField(true);
				}
				else
				{
					tplHIPPDataBean.setDisablePayeeField(false);
				}
				tplHIPPPayeeInfoVO.setAddPayeeEffectiveEndDate(tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
			}
			tplHIPPPayeeInfoVO.setEntityType("");
			// End
			tplHIPPDataBean.setTplHIPPPayeeInfoVO(tplHIPPPayeeInfoVO);
			tplHIPPDataBean.setCommonFieldsRendered(true);
			tplHIPPDataBean.setAddPayeeRendered(true);
			tplHIPPDataBean.setShowSuccessPayeeInfo(false);
			tplHIPPDataBean.setUpdatePayeeRendered(false);
			tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(true);
			tplHIPPDataBean.setSaveHippPayeeRender(false);
			tplHIPPDataBean.setShowDelSuccess(false);
			tplHIPPDataBean.setCurrentPageId(TPL_ADD_PAYEE_FOCUS);
			tplHIPPDataBean.setEntityIDTypeList(new ArrayList());
			tplHIPPDataBean.setDisableEntityIDType(false);
			tplHIPPDataBean.setDisablePayeeApproved(false);
			//commented for defect ESPRD00775840
			//tplHIPPDataBean.setDisablePayeeField(false);
			tplHIPPDataBean.setDisableTplHIIPupdate(false);
			tplHIPPDataBean.setDisablePayeeDelete(false);
		}
	}

	/**
	 * This method is used to hideAddPayee
	 */
	//GLOBAL ACTION COMMENT	
	/*public void hideAddPayee() 
	{
	//	logger.info("TPLHIPPControllerBean::hideAddPayee:: START");	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setAddPayeeRendered(false);
//		logger.info("TPLHIPPControllerBean::hideAddPayee:: END");	
	}*/

	/**
	 * Holds show update payee
	 */
// GLOBAL ACTION COMMENT
	/*public void showUpdatePayee()
	{
		logger.info("TPLHIPPControllerBean::showUpdatePayee:: START");	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setAddPayeeRendered(false);
		tplHIPPDataBean.setUpdatePayeeRendered(true);
		logger.info("TPLHIPPControllerBean::showUpdatePayee:: END");	
	}*/

	/**
	 * This method is used to add letter to hipp case.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	//GLOBAL ACTION COMMENT
	/*public void createLetter()
	{
		

	}*/

	/**
	 * This method is used to cancel corresponde action
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	//GLOBAL ACTION COMMENT
	/*public String cancelLettersAndResponseInfo()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setEditLetterResopnse(false);
		return "success";
	}*/

	/**
	 * This method is used to corresspondence Info for the HIPP Case.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	//GLOBAL ACTION COMMENT
	/*public void getLettersAndResponseInfo() 
	{
		// TODO Auto-generated method stub

	}
*/
	/** Holds view Letter */
	//GLOBAL ACTION COMMENT
	/*public void viewLetter() {
		//	  TODO Auto-generated method stub
	}
*/
	/**
	 * Holds viewLetterRequest
	 */
	//GLOBAL ACTION COMMENT
	/*public void viewLetterRequest() {
		//	  TODO Auto-generated method stub
	}
*/
	/**
	 * @return success
	 */
	//GLOBAL ACTION COMMENT
	/*public String editLettersResponse()
	{
		//logger.info("TPLHIPPControllerBean::editLettersResponse:: START");	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		String rowValue = (String) facesContext.getExternalContext()
				.getRequestParameterMap().get("rowIndex");
		Integer rowValueInt = new Integer(rowValue);
		TPLHIPPCorrespondenceVO tplHIPPCorrespondenceVO = (TPLHIPPCorrespondenceVO) tplHIPPDataBean
				.getLettersNResponseList().get(rowValueInt.intValue());
		tplHIPPDataBean.setCurrentRecordLetters(rowValueInt.intValue());
	//	logger.debug("editLettersResponse --------> ");
		tplHIPPDataBean.setTplHIPPCorrespondenceVO(tplHIPPCorrespondenceVO);
	//	logger.debug("editLettersResponse --------> ");
		tplHIPPDataBean.setEditLetterResopnse(true);
	//	logger.info("TPLHIPPControllerBean::editLettersResponse:: END");	
		return "success";
	}*/

	/**
	 * @return success
	 */
	//GLOBAL ACTION COMMENT
	/*public String saveLettersResponse() 
	{
		logger.info("TPLHIPPControllerBean::saveLettersResponse:: START");	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		
		List lettersNResponseList = tplHIPPDataBean.getLettersNResponseList();

		if (lettersNResponseList.size() > 0)
		{
			int currentRecord = tplHIPPDataBean.getCurrentRecordLetters();
			TPLHIPPCorrespondenceVO tplHIPPCorrespondenceVO = tplHIPPDataBean
					.getTplHIPPCorrespondenceVO();
			lettersNResponseList.remove(currentRecord);
			lettersNResponseList.add(currentRecord, tplHIPPCorrespondenceVO);
		}
		logger.info("TPLHIPPControllerBean::saveLettersResponse:: END"); 
		return "success";
	}*/

	/**
	 * This method is used to reset LettersResponse
	 */
	//GLOBAL ACTION COMMENT
	/*public void resetLettersResponse() 
	{
		TPLHIPPCorrespondenceVO tplHIPPCorrespondenceVO = new TPLHIPPCorrespondenceVO();
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setTplHIPPCorrespondenceVO(tplHIPPCorrespondenceVO);
	}*/

	/**
	 * This method is used to cancel add payee.
	 */
	public void cancelAddPayee() 
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setCommonFieldsRendered(false);
		tplHIPPDataBean.setAddPayeeRendered(false);
		tplHIPPDataBean.setUpdatePayeeRendered(false);
		tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(false);
		tplHIPPDataBean.setSaveHippPayeeRender(true);
		tplHIPPDataBean.setDisableEntityIDType(false);
		tplHIPPDataBean.setDisablePayeeField(false);
		tplHIPPDataBean.setDisableTplHIIPupdate(false);
		tplHIPPDataBean.setDisablePayeeDelete(false);
	}

	/**
	 * This method is used to hide the update Premium Info.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void cancelUpdatePremium()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setUpdatePremiumInfo(false);
	}

	/**
	 * This method is used to hide the update Payee.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void resetUpdatePayee() 
	{
		try 
		{
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			//FacesContext facesContext = FacesContext.getCurrentInstance(); Find Bug Fix
			int rowValueInt = tplHIPPDataBean.getAddPayeeCurrentRecord();
			tplHIPPDataBean.setDisableEntityIDType(false);
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO =  (TPLHIPPPayeeInfoVO)tplHIPPDataBean.getTplAddPayeeList().get(rowValueInt);
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO1 = tplHIPPDataBean.getTplHIPPPayeeInfoVO();//new TPLHIPPPayeeInfoVO();
			tplHIPPPayeeInfoVO1.setAddPayeeEffectiveBeginDate(tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate());
			tplHIPPPayeeInfoVO1.setAddPayeeEffectiveEndDate(tplHIPPPayeeInfoVO.getPayeeEffectiveEndDate());
			// DEFECT FIX ESPRD00558233
			if(StringUtils.isNotBlank(tplHIPPPayeeInfoVO.getEntityType())){
				String entityType[]=tplHIPPPayeeInfoVO.getEntityType().split("-");
				if(entityType != null && entityType.length > 0 )
				{
					tplHIPPPayeeInfoVO1.setEntityType(entityType[0]);	
					if (entityType[0].equalsIgnoreCase("M")) 
					{
						tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getMemberIDTypeList());
					}
					else if (entityType[0].equalsIgnoreCase("P"))
					{
						tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getProviderIDList());
					}		
					else if (entityType[0].equalsIgnoreCase("TC"))
					{
						tplHIPPDataBean.setDisableEntityIDType(true);
						tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getCarrierIdTypeList());
					} 
					else if (entityType[0].equalsIgnoreCase("TP"))
					{
						tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getPolicyHolderIdTypeList());
					} 
					else if (entityType[0].equalsIgnoreCase("TE"))
					{
						tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getEmployerIDTypeList());
					}	
					else
					{
						List list = new ArrayList();			
						list.add(new SelectItem("O", "O-Other", "Other"));
						tplHIPPDataBean.setEntityIDTypeList(list);
					}	
				}
				else{
					tplHIPPPayeeInfoVO1.setEntityType(tplHIPPPayeeInfoVO.getEntityType());					
				}
			}	
			// END 			
			tplHIPPPayeeInfoVO1.setEntityIDType(tplHIPPPayeeInfoVO.getEntityIDType());
			tplHIPPPayeeInfoVO1.setPayeeName(tplHIPPPayeeInfoVO.getPayeeName());
			tplHIPPPayeeInfoVO1.setEntityID(tplHIPPPayeeInfoVO.getEntityID());
			tplHIPPPayeeInfoVO1.setPayeeID(tplHIPPPayeeInfoVO.getPayeeID());
			tplHIPPDataBean.setTplHIPPPayeeInfoVO(tplHIPPPayeeInfoVO1);
			//tplHIPPDataBean.setCurrentRecord(rowValueInt);
			tplHIPPDataBean.setCurrentPageId(TPL_ADD_PAYEE_FOCUS);
			tplHIPPDataBean.setShowSuccessPayeeInfo(false);
		}
		catch (Exception e) 
		{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        

			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in resetUpdatePayee ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	}

	/**
	 * This method is used to reset all fields.
	 * 
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void resetAddPayee() 
	{
		TPLHIPPPayeeInfoVO TplHIPPPayeeInfoVO = new TPLHIPPPayeeInfoVO();
		//TPLHIPPConversionHelper.getTPLHIPPDataBean().setTplHIPPPayeeInfoVO(TplHIPPPayeeInfoVO);
		//Added for defect : ESPRD00775803
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setAddress(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setAddress2(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setCity(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setState(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setZip(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setCounty(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityID(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityIDType(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityType(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityName(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setPayeeID(null);
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setPayeeName(null);
		//added for the defect ESPRD00761898 start		
		TPLHIPPConversionHelper.getTPLHIPPDataBean().getEntityIDTypeList().clear();
		TPLHIPPConversionHelper.getTPLHIPPDataBean().setDisableEntityIDType(false);
		
		//end for the defect ESPRD00761898
		TPLHIPPConversionHelper.getTPLHIPPDataBean().setCurrentPageId(TPL_ADD_PAYEE_FOCUS);
	}

	/**
	 * This method is used to edit hipp payee.
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	public String editPayeeInfo()
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setCurrentPageId("addPayeeFocus");
		boolean result = false;
		try 
		{
			FacesContext facesContext = FacesContext.getCurrentInstance();
			String rowValue = (String) facesContext.getExternalContext()
					.getRequestParameterMap().get(ROW_INDEX);
			Integer rowValueInt = new Integer(rowValue);
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = (TPLHIPPPayeeInfoVO) tplHIPPDataBean
					.getTplAddPayeeList().get(rowValueInt.intValue());
			List editablePayee = new ArrayList();
   		    editablePayee.add(createAuditableFeild("Payee Begin date","hippPayeeBeginDate"));
   		    editablePayee.add(createAuditableFeild("Payee End date","hippPayeeEndDate"));
   		    if(tplHIPPPayeeInfoVO.getAuditKeyList()!=null && !(tplHIPPPayeeInfoVO.getAuditKeyList().isEmpty()))
   		    {
   		    	AuditDataFilter.filterAuditKeys(editablePayee,tplHIPPPayeeInfoVO);   		    	
   		    }
   		    
   		    UIComponent component = TPLAdministrationHelper.findComponentInRoot("auditpayeeid");
			if(component!=null){
				AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component;	 					
				auditHistoryTable.setValue(tplHIPPPayeeInfoVO.getAuditKeyList());
				auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false); 
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate())){
				tplHIPPDataBean.getTplHIPPPayeeInfoVO()
				.setAddPayeeEffectiveBeginDate(tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate());
			}
			if(tplHIPPPayeeInfoVO.getPayeeSequenceNumber()!=null)
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setPayeeSequenceNumber(tplHIPPPayeeInfoVO.getPayeeSequenceNumber());
			}
			if (StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getPayeeEffectiveEndDate()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setAddPayeeEffectiveEndDate(
							tplHIPPPayeeInfoVO.getPayeeEffectiveEndDate());
			}
			if (StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getEntityType()))
			{
				tplHIPPDataBean.setDisableEntityIDType(false);
				String[] str = tplHIPPPayeeInfoVO.getEntityType().split("-");
	    		if(str != null && str.length > 0)
	    		{
	    			tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityType(str[0]);
	    		}			
				if (tplHIPPDataBean.getTplHIPPPayeeInfoVO().getEntityType().equalsIgnoreCase("M")) 
				{
					tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getMemberIDTypeList());
				}
				else
				if (tplHIPPDataBean.getTplHIPPPayeeInfoVO().getEntityType().equalsIgnoreCase("P"))
				{
					tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getProviderIDList());
				} 
				else if (tplHIPPDataBean.getTplHIPPPayeeInfoVO().getEntityType().equalsIgnoreCase("TC"))
				{
					tplHIPPDataBean.setDisableEntityIDType(true);
					tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getCarrierIdTypeList());
				} 
				else if (tplHIPPDataBean.getTplHIPPPayeeInfoVO().getEntityType().equalsIgnoreCase("TP"))
				{
					tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getPolicyHolderIdTypeList());
				} 
				else if (tplHIPPDataBean.getTplHIPPPayeeInfoVO().getEntityType().equalsIgnoreCase("TE"))
				{
					tplHIPPDataBean.setEntityIDTypeList(tplHIPPDataBean.getEmployerIDTypeList());
				} else {
					tplHIPPDataBean.setEntityIDTypeList(new ArrayList());
				} 
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getEntityIDType()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityIDType(tplHIPPPayeeInfoVO.getEntityIDType());
			    if (tplHIPPPayeeInfoVO.getEntityIDType().equalsIgnoreCase("O")){
			    	List list = new ArrayList(); 
			    	list.add(new SelectItem("O", "O-Other", "Other"));
					tplHIPPDataBean.setEntityIDTypeList(list);
			    }
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getEntityID()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityID(tplHIPPPayeeInfoVO.getEntityID());
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getAddress()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setAddress(tplHIPPPayeeInfoVO.getAddress());
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getAddress2()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setAddress2(tplHIPPPayeeInfoVO.getAddress2());
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getCity()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setCity(tplHIPPPayeeInfoVO.getCity());
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getState()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setState(tplHIPPPayeeInfoVO.getState());
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getZip()))
			{
				tplHIPPDataBean.getTplHIPPPayeeInfoVO().setZip(tplHIPPPayeeInfoVO.getZip());
			}
			
			tplHIPPDataBean.getTplHIPPPayeeInfoVO().setPayeeName(tplHIPPPayeeInfoVO.getPayeeName());
			tplHIPPDataBean.getTplHIPPPayeeInfoVO().setPayeeID(tplHIPPPayeeInfoVO.getPayeeID());
			tplHIPPDataBean.getTplHIPPPayeeInfoVO().setAuditKeyList(tplHIPPPayeeInfoVO.getAuditKeyList());
			tplHIPPDataBean.setAddPayeeCurrentRecord(rowValueInt.intValue());
			String beginDate = tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate();
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			SimpleDateFormat sd = new SimpleDateFormat(DATE_FORMAT);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			Date beginDt = sd.parse(beginDate);
			Date sysDate = new Date();
			if (beginDt.before(sysDate))
			{
				tplHIPPDataBean.setDeletepayee(true);
				tplHIPPDataBean.setDeleteupdatepayee(false);
			} 
			else 
			{
				tplHIPPDataBean.setDeletepayee(false);
				tplHIPPDataBean.setDeleteupdatepayee(true);
			}
			tplHIPPDataBean.setShowSuccessPayeeInfo(false);			
			tplHIPPDataBean.setCommonFieldsRendered(true);
			tplHIPPDataBean.setUpdatePayeeRendered(true);
			tplHIPPDataBean.setAddPayeeRendered(false);
			tplHIPPDataBean.setShowAddressDetails(false);
			tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(true);
			tplHIPPDataBean.setSaveHippPayeeRender(false);
			tplHIPPDataBean.setUpdatePayeeRendered(true);
			tplHIPPDataBean.setDisablePayeeDelete(false);
			tplHIPPDataBean.setShowDelSuccess(false);
			if(tplHIPPDataBean.getTplAddPayeeList() != null  
					&& tplHIPPDataBean.getTplAddPayeeList().size() == 1)
			{				
				tplHIPPDataBean.setDisablePayeeField(true);
			}
			else
			{
				tplHIPPDataBean.setDisablePayeeField(false);
			}
			if(tplHIPPDataBean.getPrevEffectiveStatus() != null)
			{
				String previousEffectiveStatus=tplHIPPDataBean.getPrevEffectiveStatus();
				int payeeListSize=tplHIPPDataBean.getTplAddPayeeList().size();	
				// Rule Invocation Context object holds object arrays used in
				// rule execution.
				String ruleId = "TPL0776.0001.01";
				RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
				// Adding object into rule invocation context.
				ruleDelegate.addObject(payeeListSize);
				ruleDelegate.addObject(previousEffectiveStatus);
				// Invoke RIF with ruleid and rule invocation objects.
				RulesResultVO rulesResult = null;
				try {
					rulesResult = ruleDelegate.invokeRule();
				} catch (RulesDelegateException re) {
					if (rule_time.equals(re.getErrorCode())) {
						logger.warn(RULE_EXPIRED + re.getMessage());
						// If needed perform expires logic here
					}
					logger.error(RULESDELEGATE_EXCEPTION + re);
				}
				if (rulesResult.isReturnBooleanValue()) {
					tplHIPPDataBean.setDisablePayeeDelete(true);
				}
				logger.info(RULE_EXECUTION_ENDED + ruleId + "\n");				
				//Rule Invocation Context object holds object arrays used in rule execution.				 
				String ruleId1 = "TPL0777.0001.01";
				RulesDelegate ruleDelegate1 = new RulesDelegate(ruleId1);
				//Adding object into rule invocation context.
				ruleDelegate1.addObject(previousEffectiveStatus);
				//Invoke RIF with ruleid and rule invocation objects.
				RulesResultVO rulesResult1 = null;			                
				try {             		
					rulesResult1 = ruleDelegate1.invokeRule();
				} catch (RulesDelegateException re){
					if(rule_time.equals(re.getErrorCode()))
					{
						logger.warn(RULE_EXPIRED+ruleId1);
						//If needed perform expires logic here  
					}
					logger.error(RULESDELEGATE_EXCEPTION+re);
				}
				logger.info(RULE_EXECUTION_ENDED+ruleId1+"\n");
				if(rulesResult1.isReturnBooleanValue())
				{
					tplHIPPDataBean.setDisablePayeeDelete(true);
				}				
			}
			if(tplHIPPDataBean.getTplhipppremiumlist() != null 
					&& !tplHIPPDataBean.getTplhipppremiumlist().isEmpty())
			{				
				Iterator itr = tplHIPPDataBean.getTplhipppremiumlist().iterator();
				Date payeeBeginDate = dateformatYYYYMMDD.parse(tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate());
				Date payeeEndDate = dateformatYYYYMMDD.parse(tplHIPPPayeeInfoVO.getPayeeEffectiveEndDate());
				while(itr.hasNext())
				{
					TPLHIPPPaymentVO tplHIPPPaymentVO = (TPLHIPPPaymentVO) itr.next();
					if(tplHIPPPaymentVO.getPaymentDate().after(payeeBeginDate) && 
							tplHIPPPaymentVO.getPaymentDate().before(payeeEndDate))
					{
						tplHIPPDataBean.setDisablePayeeDelete(true);
					}				
				}
			}
		} 
		catch (ParseException e) 
		{
			logger.debug(e);
		} 
		catch (Exception e) 
		{
			logger.debug(e);
		}
		return TPLAdministrationConstants.UPDATE_PAYEE_SUCCESS;
	}

	/**
	 * This method used to Delete Payee block.
	 * 
	 * @return TPLAdministrationConstants.POLICY_SUCCESS String
	 */
	
	public String deleteUpdatePayee()
	{
		try 
		{			
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();			
			List payeeList = tplHIPPDataBean.getTplAddPayeeList();
			int deleteRecord = tplHIPPDataBean.getAddPayeeCurrentRecord();
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = (TPLHIPPPayeeInfoVO)payeeList.get(deleteRecord);
			// Commented -- CR 716985
			/*boolean deleteFlag = false;
			if(!(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("P")))
			{				
				TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_PayeeDetail);
				//return TPLHIPPConstants.TPL_HIPP_SUCCESS;
				deleteFlag = true;
			}
			if(StringUtils.isNotEmpty(tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate()) )
			{
				Date sysDate = new Date();
				Date payeeBeginDate = dateformatYYYYMMDD.parse(tplHIPPPayeeInfoVO.getPayeeEffectiveBeginDate());
				if (payeeBeginDate.before(sysDate))
				{					
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_DELETE_PAYEE);
					//return TPLHIPPConstants.TPL_HIPP_SUCCESS;
					deleteFlag = true;
				} 
			}
			if(deleteFlag)
			{
				return TPLHIPPConstants.TPL_HIPP_SUCCESS;
			}*/
			payeeList.remove(deleteRecord);
			//Defect ESPRD00806149 : Set delete HIPPPayeeVo
			tplHIPPDataBean.getDeletePayeeInfo().add(tplHIPPPayeeInfoVO);
			// CR ESPRD00679536 -- Begin
			if(payeeList.size() > 0)
			{
				TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = null;
				if(tplHIPPDataBean.getTplAddHIPPEffectivePeriodList() != null 
						&& tplHIPPDataBean.getTplAddHIPPEffectivePeriodList().size() > 0)
				{					
					int currentRow = tplHIPPDataBean.getCurrentRecord();					
					tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO) tplHIPPDataBean
							.getTplAddHIPPEffectivePeriodList().get(currentRow);
				}
				TPLHIPPPayeeInfoVO payeeInfoVO = null;
				if(payeeList.size() == 1)
				{
					payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeList.get(0);
					payeeInfoVO.setPayeeEffectiveBeginDate(
							tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
					payeeInfoVO.setPayeeEffectiveEndDate(
							tplHIPPEffectivePeriodVO.getHippEffectiveEndDate());
				}
				else
				{
					if(deleteRecord == 0)
					{
						payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeList.get(deleteRecord);
						payeeInfoVO.setPayeeEffectiveBeginDate(
								tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate());
					}
					else
					{
						payeeInfoVO = (TPLHIPPPayeeInfoVO) payeeList.get(deleteRecord - 1);
						payeeInfoVO.setPayeeEffectiveEndDate(
								tplHIPPPayeeInfoVO.getPayeeEffectiveEndDate());
					}
				}
			}
			// End
			tplHIPPDataBean.setAddEditHIPPPayeeInfoFlag(false);
			tplHIPPDataBean.setUpdatePayeeRendered(false);
			tplHIPPDataBean.setCommonFieldsRendered(false);			
			tplHIPPDataBean.setShowDelSuccess(true);
			tplHIPPDataBean.setShowSuccessPayeeInfo(false);
			tplHIPPDataBean.setCurrentPageId(TPL_ADD_PAYEE_FOCUS);
		} 
		catch (Exception e) 
		{			
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in deleteUpdatePayee ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

			logger.error(e);
		}
		return TPLHIPPConstants.TPL_HIPP_SUCCESS;
	}

   
	/**
	 * This method used to Delete Payee block.
	 * 
	 * @return TPLAdministrationConstants.POLICY_SUCCESS String
	 */
	//GLOBAL ACTION COMMENT
	/*public void deletePayee()
	{
		logger.info("TPLHIPPControllerBean::deletePayee:: START");
		TPLAdministrationHelper
				.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_DELETE_PAYEE);
		logger.info("TPLHIPPControllerBean::deletePayee:: END");
	}*/
	
	/**
	 * 
	 */
	//GLOBAL ACTION COMMENT
/*	public void showHIPPDetails() {
		logger.info("TPLHIPPControllerBean::showHIPPDetails:: START");
		TPLHIPPDataBean tplHIPPDataBean = new TPLHIPPDataBean();
		tplHIPPDataBean.setRenderHippDetails(true);
		FacesContext facesContext = FacesContext.getCurrentInstance();
		facesContext.getExternalContext().getSessionMap()
				.put("TPLHIPPDataBean", tplHIPPDataBean);
		logger.info("TPLHIPPControllerBean::showHIPPDetails:: END");
	}
*/
	/**
	 * This method is used to show Update Premium Information
	 */
	public void showUpdatePremiumInfo() 
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		//List premiumList = tplHIPPDataBean.getTplhipppremiumlist(); Find Bug Fix
		FacesContext facesContext = FacesContext.getCurrentInstance();
		String rowValue = (String) facesContext.getExternalContext()
				.getRequestParameterMap().get(ROW_INDEX);
		Integer rowValueInt = new Integer(rowValue);
		TPLHIPPPaymentVO tplHIPPPaymentVO = (TPLHIPPPaymentVO) tplHIPPDataBean
				.getTplhipppremiumlist().get(rowValueInt.intValue());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO().setTcn(
				tplHIPPPaymentVO.getTcn());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO()
				.setRaNumber(tplHIPPPaymentVO.getRaNumber());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO()
				.setReimbersementAmount(
						tplHIPPPaymentVO.getReimbersementAmount());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO()
				.setPaymentDate(tplHIPPPaymentVO.getPaymentDate());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO()
				.setDosBeginDate(tplHIPPPaymentVO.getDosBeginDate());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO()
				.setDosEndDate(tplHIPPPaymentVO.getDosEndDate());
		tplHIPPDataBean.getTplHIPPPaymentInfoVO().getTplHIPPPaymentVO()
		.setAuditKeyList(tplHIPPPaymentVO.getAuditKeyList());
		
		// Added for Defect # ESPRD00867153 : Start
		UIComponent component = TPLAdministrationHelper.findComponentInRoot("hippPremiumAuditId");
		if(component!=null){
			AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component ;
			auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false);	
			auditHistoryTable.setValue(tplHIPPPaymentVO.getAuditKeyList());
		}
		// Added for Defect # ESPRD00867153 : End
		
		tplHIPPDataBean.setUpdatePremiumInfo(true);
		tplHIPPDataBean.setEditHippPremiumInfo(true);
	}

	/**
	 * validates all the required fields in the hipp search
	 * 
	 * @return boolean for validating hipp search
	 */
	public boolean validateHippSearch() 
	{
		boolean hippSearchFlag = true;
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		TPLHIPPSearchCriteriaVO tplHIPPSearchCriteriaVO = tplHIPPSearchDataBean.getTplHIPPSearchCriteriaVO();
		if(!TPLHIPPValidateHelper.validateMandatoryFields()){
        	hippSearchFlag = false;
        }
        //Deffect Fix:ESPRD00088547
        if(StringUtils.isNotEmpty(tplHIPPSearchCriteriaVO.getMemberDOB())){
           	if(!EnterpriseCommonValidator.validateDate(tplHIPPSearchCriteriaVO.getMemberDOB())){
           		
           	  TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
						"dateOfBirth", false, TPLHIPPConstants.ADDHIPPPortletResource);
               		hippSearchFlag = false;
               	}
        }
        if(StringUtils.isNotEmpty(tplHIPPSearchCriteriaVO.getApplicationDate())){
           	if(!EnterpriseCommonValidator.validateDate(tplHIPPSearchCriteriaVO.getApplicationDate()))
           	{
           		// Added for Defect ESPRD00585189
           		TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_INVALID_DATE, 
						"applicationDate", false, TPLHIPPConstants.ADDHIPPPortletResource);
              	hippSearchFlag = false;
            }
        }
     	return hippSearchFlag;
	}

	/**
	 * This method is used to setHIPPCaseResultVO
	 * 
	 * @param
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String setHIPPCaseResultVO() {
		
		TPLHIPPSearchDataBean tplHIPPSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		String rowValue = (String) facesContext.getExternalContext()
									.getRequestParameterMap().get(ROW_INDEX);
		Integer rowValueInt = null;
		if (StringUtils.isNotEmpty(rowValue)) {
			rowValueInt = new Integer(rowValue);
		}
		List searchResultList = tplHIPPSearchDataBean.getSearchResultList();
		
		if (searchResultList.size() > 0) {
			
			if (rowValueInt != null) {
				ActionRequest request = (ActionRequest) FacesContext
										.getCurrentInstance().getExternalContext().getRequest();
				TPLHIPPSearchResultVO tplHIPPSearchResultVO = (TPLHIPPSearchResultVO) searchResultList
						.get(rowValueInt.intValue());
				
				//CR640833
				TPLAdministrationHelper administrationHelper = new TPLAdministrationHelper();
				administrationHelper.logEventInquiry(TPLAdministrationConstants.PORTLET_NAME_HIPP, tplHIPPSearchResultVO.getHippCaseId(), getUserID());
				String caseId= tplHIPPSearchResultVO.getHippCaseId();
				  boolean lockFlag=false;
	                //THIS IS FOR LOCK TABLE
	                
	             try {
	                	LockDelegete lockDelegete=new LockDelegete();
						lockFlag =lockDelegete.lockExist(TPLAdministrationConstants.TABLE_NAME_HIPP,caseId,null);
						if(lockFlag){
							TPLAdministrationHelper.setErrorMessage(EnterpriseMessageConstants.ERR_GLB_DATA_CHANGED_TRY_AGAIN);
							return "";
						}
							
					} catch (EnterpriseBaseBusinessException e) {
						
						// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
					//	logger.error("Exception in TPLHIPPControllerBean.setHIPPCaseResultVO()", e);    
						/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
						if(logger.isErrorEnabled()){
							logger.error("EnterpriseBaseBusinessException in setHIPPCaseResultVO ",e);
						}
						/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
						// MT Platform Code Merge (Merge 1 - Iteration1) ends        

					}
				PortletSession pSession = (PortletSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);
				pSession.setAttribute("HIPP_UPDATE","YES", pSession.APPLICATION_SCOPE);
				request.setAttribute("resultVO", caseId);
			}
		}
		return "";
	}
	/**
	 * This method is used to addHippInfo
	 * 
	 * @param
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void addHippInfo(){
		logger.debug("TPLHIPPControllerBean::addHippInfo:: START");
		FacesContext facesContext = FacesContext.getCurrentInstance();
			String rowValue = (String) facesContext.getExternalContext()
											.getRequestParameterMap().get("ACTION_NAME");
			if("sourceAction".equalsIgnoreCase(rowValue))
			{				
				ActionRequest request = (ActionRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
				request.setAttribute("resultVO", "ADD"); 
				PortletSession pSession = (PortletSession) facesContext.getExternalContext().getSession(true);
		     	pSession.setAttribute("HIPP", "SEARCHADDHIPP", pSession.APPLICATION_SCOPE);
			}
	}

	/**
	 * This method is used to displayaddHippInformation
	 * 
	 * @param
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	//GLOBAL ACTION COMMENT
	/*public void displayaddHippInformation() {
		//logger.info("TPLHIPPControllerBean::displayaddHippInformation:: START"); 
		TPLHIPPDataBean tplHIPPDataBean = new TPLHIPPDataBean();
		tplHIPPDataBean.setShowHIPPDetails(true);
		tplHIPPDataBean.setRenderedAddCancel(true);
		FacesContext.getCurrentInstance().getExternalContext().getSessionMap()
				.put(TPLHIPPDataBean.BEAN_NAME_ADDHIPP, tplHIPPDataBean);
		//logger.info("TPLHIPPControllerBean::displayaddHippInformation:: END"); 
	}*/

	/**
	 * This method is used to getHIPPCaseDetail
	 * 
	 * @param tplHIPPSearchResultVO
	 *            TPLHIPPSearchResultVO
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void getHIPPCaseDetail(TPLHIPPSearchResultVO tplHIPPSearchResultVO)
	{
		try 
		{	//GLOBAL ACTION COMMENT
			//String caseID = tplHIPPSearchResultVO.getHippCaseId();			
			getTPLHIPPCaseDetails(tplHIPPSearchResultVO.getHippCaseId());
		}
		catch (Exception e) 
		{			
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("Exception in getHIPPCaseDetail ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			logger.error(e);
			FacesMessage message = new FacesMessage();
			message.setDetail(e.getMessage());
				/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			FacesContext.getCurrentInstance().addMessage(ABC_STR, message);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */

			//FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, message);
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        

		}
	}
	
	/**
	 * This method is used to getTPLHIPPCaseDetails
	 * 
	 * @param caseID
	 *            String
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public void getTPLHIPPCaseDetails(String caseID)
	{
		logger.debug("TPLHIPPControllerBean::getTPLHIPPCaseDetails:: START"); 
		TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
		//TPLHippDetail hippCase = null;
		TPLHIPPCaseVO tplHIPPCaseVO = null;
		TPLHIPPDetailsVO tplHIPPDetailsVO = null;
		//ESPRD00851370 geostan validation
		TPLPolicyDataBean tplPolicyDataBean = getTPLPolicyDataBean();
		tplPolicyDataBean.setGeostanFlagForEmployee(false);
		tplPolicyDataBean.setGeostanFlagForPolicyHolder(false);
		tplPolicyDataBean.setEmpAddressValidateMsg(false); 
		tplPolicyDataBean.setAddressLine1ValidateMsg(false);
		tplPolicyDataBean.setEmpAddressLine2ValidateMsg(false);
		//ESPRD00952118
		TPLHIPPConversionHelper.getTPLHIPPDataBean().getDeletePayeeInfo().clear();
		try
		{
			tplHIPPDetailsVO = tplHIPPDelegate.getHIPPCase(caseID);
			TPLHIPPConversionHelper tplHIPPConversionHelper = new TPLHIPPConversionHelper();
			tplHIPPCaseVO = tplHIPPConversionHelper.convertHIPPCaseDOtoVO(tplHIPPDetailsVO);
			//for defect : 748145
		    LettersAndResponsesDataBean letterDataBean = getDataBeanFromContext();
		    //Added this condition to clear letter when we go via menu level and search another hippcase
			if( letterDataBean.getLetterGenerationRequests() !=null && ! letterDataBean.getLetterGenerationRequests().isEmpty())
			{
				letterDataBean.getLetterGenerationRequests().clear();
			}
			letterDataBean.setRenderEditSection(false);
				//end
			//GLOBAL ACTION COMMENT
			//hippCase=tplHIPPDetailsVO.getTplHippDetail();
			//Routing
			TPLHippDetail tplHIPPCaseDO = tplHIPPDetailsVO.getTplHippDetail();
			TPLRoutingDOConvertor tplRoutingDOConvertor=new TPLRoutingDOConvertor();
			List listOfRoutingVOs=tplRoutingDOConvertor.convertListOfRoutingDOs(tplHIPPCaseDO);	
			if(listOfRoutingVOs!=null && listOfRoutingVOs.size()>0){
				getRoutingDataBean().setListOfTPLRoutingVOs(listOfRoutingVOs);
				getRoutingDataBean().setRenderNoData(false);
			}else if (getRoutingDataBean().getListOfTPLRoutingVOs() != null
					&& getRoutingDataBean().getListOfTPLRoutingVOs().size() > 0) {
				getRoutingDataBean().getListOfTPLRoutingVOs().clear();
			}
			if (tplHIPPCaseVO != null)
			{
				TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
				tplHIPPDataBean.setLettersLoaded(false);  
				tplHIPPDataBean.setTplHIPPCaseVO(tplHIPPCaseVO);
				tplHIPPDataBean.setNotesCheckMark(false);
				TPLHIPPMemberDetailVO detailVO = tplHIPPCaseVO.getTplHIPPMemberDetailVO();
				if(detailVO!=null)
				{
				if(StringUtils.isNotEmpty(tplHIPPCaseVO.getTplHIPPMemberDetailVO().getMemberIDType()) )
				{
				String memberIdTypeDesc = getSourceCodeDescription(tplHIPPDataBean.getMemberIDTypeList(),
							tplHIPPCaseVO.getTplHIPPMemberDetailVO().getMemberIDType());
					tplHIPPDataBean.setMemberIdTypeDesc(memberIdTypeDesc);
				}
				}
				if(detailVO != null && detailVO.getMemberID() != null)
				{	
					// Defect ESPRD00495001 start		
					if(StringUtils.isNotEmpty(detailVO.getDob()))
					{
						detailVO.setDob(TPLAdministrationHelper.dateTimeStampConverter(detailVO.getDob()));	
					}													
					//ESPRD00495001 end
					// Defect  ESPRD00495021 start
					//GLOBAL ACTION COMMENT
					/*StringBuffer ssnFormate = new StringBuffer();
					String hiphen = "-";*/
					if(detailVO.getSsn()!=null && detailVO.getSsn().length()==9)
					{
						/*ssnFormate.append(detailVO.getSsn().substring(0,3)).append(hiphen);
						ssnFormate.append(detailVO.getSsn().substring(3,5)).append(hiphen);
						ssnFormate.append(detailVO.getSsn().substring(5,9));*/
						detailVO.setSsn(TPLAdministrationHelper.getSSNFormat(detailVO.getSsn()));
					}
					//EOF ESPRD00495021
					if(detailVO.getMemberDetailsList() != null && !detailVO.getMemberDetailsList().isEmpty())
					{
						Iterator memberDetailsListItr = detailVO.getMemberDetailsList().iterator();
						while(memberDetailsListItr.hasNext())
						{
							MemberDetailsListVO memberDetailsListVO =(MemberDetailsListVO)memberDetailsListItr.next();							
							//GLOBAL ACTION CHANGE
							if(StringUtils.isNotEmpty(memberDetailsListVO.getLob()))
							{												
							   memberDetailsListVO.setLob(getSourceCodeDescription(tplHIPPDataBean.getLobCodeList(), memberDetailsListVO.getLob()));
							}
							if(StringUtils.isNotEmpty(memberDetailsListVO.getProgramCode()))
							{												
								memberDetailsListVO.setProgramCode(getSourceCodeDescription(
										tplHIPPDataBean.getCoeCodeList(), memberDetailsListVO.getProgramCode()));
							}
						}
					}
					tplHIPPDataBean.setShowMemberDetails(true);
				}
				else
				{	
					TPLAdministrationHelper.setAddHIPPInfo(TPLAdministrationConstants.MEMBER_ID_INVALID);								
					tplHIPPDataBean.setShowMemberDetails(false);
				}
				// populating worker details
				if(StringUtils.isNotBlank(tplHIPPCaseVO.getTplHIPPWokerVO().getWorkerID()))
				{
					/*if(StringUtils.isNotBlank(tplHIPPCaseVO.getTplHIPPWokerVO().getPhoneNumber()))
					{
						tplHIPPCaseVO.getTplHIPPWokerVO().setPhoneNumber(getPhoneFormat(tplHIPPCaseVO.getTplHIPPWokerVO().getPhoneNumber(),
								tplHIPPCaseVO.getTplHIPPWokerVO().getPhoneNumber().length()));
					}*/					
					tplHIPPDataBean.setShowWorkerDetails(true);
				}
				
				if(tplHIPPCaseVO.getTplhippeffectiveperiodvo() != null)
				{
				  if(tplHIPPCaseVO.getTplhippeffectiveperiodvo().size() > 0)
				  {
					Iterator iterator = tplHIPPCaseVO.getTplhippeffectiveperiodvo().iterator();
					while (iterator.hasNext()) {
					  TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO)iterator.next();
					  // CR ESPRD00679536 -- Begin
					  if(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplHippPaymentList() != null 
						 && !tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplHippPaymentList().isEmpty())
					  {
						 sortHippData("asc","column2",
								tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplHippPaymentList());
						 List premiumList = tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplHippPaymentList();
						 if(premiumList.size() == 1)
						 {
							TPLHIPPPaymentVO tplHIPPPaymentVO = (TPLHIPPPaymentVO) premiumList.get(0);
							tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().setLastPaymentDate(
											dateformatYYYYMMDD.format(tplHIPPPaymentVO.getPaymentDate()));
						 }
						 else
						 {
							TPLHIPPPaymentVO tplHIPPPaymentVO = (TPLHIPPPaymentVO) premiumList.get(0);
							Date maxDate = tplHIPPPaymentVO.getPaymentDate();
							for(int i = 1; i < premiumList.size(); i++)
							{
								tplHIPPPaymentVO = (TPLHIPPPaymentVO) premiumList.get(i);
								if(DateUtility.compareDate(tplHIPPPaymentVO.getPaymentDate(), maxDate) == 1)
								{
							 	  maxDate = tplHIPPPaymentVO.getPaymentDate();
								}
							}
							tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().setLastPaymentDate(dateformatYYYYMMDD.format(maxDate));
						 }
					   }							
					 }
					 // End
					tplHIPPDataBean.setTplAddHIPPEffectivePeriodList(tplHIPPCaseVO.getTplhippeffectiveperiodvo());
					populateRecentEffectivePeriodFields();
				  }
				}
					
				tplHIPPDataBean.setLetterbutton(false);
				if (StringUtils.isNotEmpty(tplHIPPCaseVO.getHippCaseStatus())) 
				{
					if (tplHIPPCaseVO.getHippCaseStatus().equalsIgnoreCase("C")) 
					{
						tplHIPPDataBean.setCaseBeginDate(tplHIPPCaseVO.getCaseBeginDate());
						tplHIPPDataBean.setCaseEndDate(tplHIPPCaseVO.getCaseEndDate());
						tplHIPPDataBean.setCaseStatus(tplHIPPCaseVO.getHippCaseStatus());	
						tplHIPPDataBean.setWorkerID(tplHIPPCaseVO.getTplHIPPWokerVO().getWorkerID());
					}
					if (tplHIPPCaseVO.getHippCaseStatus().equalsIgnoreCase("A")) 
					{
						tplHIPPDataBean.setCaseBeginDate(tplHIPPCaseVO.getCaseBeginDate());
						tplHIPPDataBean.setCaseEndDate(tplHIPPCaseVO.getCaseEndDate());
						tplHIPPDataBean.setCaseStatus(tplHIPPCaseVO.getHippCaseStatus());						
					}
				}
				
				if (tplHIPPDataBean.getTplHIPPCorbaDetailsVO() != null) 
				{					
					if (tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getCorbaEffectiveDate() != null) 
					{
						tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setCorbaEffectiveDate(tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getCorbaEffectiveDate()); 
					}
					if (tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getUnder39WeekExtension() != null) 
					{
						tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setUnder39WeekExtension(tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getUnder39WeekExtension()); 
					}
					if (tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getSelected() != null) 
					{
						tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setSelected(tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getSelected());
						if(tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getSelected().equalsIgnoreCase("Y"))
						{
							tplHIPPDataBean.setCorbaEffectiveDateRendered(true);						
						}						
					}
					if (tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getSelectedValue() != null) 
					{
						tplHIPPDataBean.getTplHIPPCorbaDetailsVO().setSelectedValue(tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getSelectedValue());
						if(tplHIPPDataBean.getTplHIPPCorbaDetailsVO().getSelectedValue().equalsIgnoreCase("Y"))
						{
							tplHIPPDataBean.setWeekExtension39Rendered(true);						
						}
					}
				}
				tplHIPPDataBean.setAddMode(false);
				tplHIPPDataBean.setUpdateMode(true);
				tplHIPPDataBean.setShowMemberDetails(true);
				tplHIPPDataBean.setShowHIPPDetails(true);
				tplHIPPDataBean.setShowWorkSheet(true);
				tplHIPPDataBean.setRenderedUpdateCancel(true);
				FacesContext.getCurrentInstance().getExternalContext()
						.getSessionMap().put(TPLHIPPDataBean.BEAN_NAME_ADDHIPP, tplHIPPDataBean);
				//Notes_IssueFix
				//GLOBAL ACTION CHANGE
				/*if(tplHIPPCaseDO.getNoteSet()!= null && tplHIPPCaseDO.getNoteSet().getNoteSetSK() != null){
					tplHIPPDataBean.setNoteSetSK(tplHIPPCaseDO.getNoteSet().getNoteSetSK());
					tplHIPPDataBean.setNotesCheckMark(true);
				}*/
				if(tplHIPPCaseDO.getNoteSet()!= null)
				{
					if(tplHIPPCaseDO.getNoteSet().getNoteSetSK() != null)
					{
						tplHIPPDataBean.setNoteSetSK(tplHIPPCaseDO.getNoteSet().getNoteSetSK());
						tplHIPPDataBean.setNotesCheckMark(true);
					}
					else 
					{
						tplHIPPDataBean.setNotesCheckMark(false);
					}
				}
			}
		}
		catch (TPLHIPPBusinessException e) 
		{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		//	logger.error("Exception in TPLHIPPControllerBean.getTPLHIPPCaseDetails()", e);  
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("TPLHIPPBusinessException in getTPLHIPPCaseDetails ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			logger.debug(e);
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
	}
	public void sortHippData(final String sortOrder,
            final String columnName, List dataList)
    {
        Comparator comparator = new Comparator()
        {
            public int compare(Object obj1, Object obj2)
            {
            	TPLHIPPPaymentVO data1 = (TPLHIPPPaymentVO) obj1;
            	TPLHIPPPaymentVO data2 = (TPLHIPPPaymentVO) obj2;
                boolean ascending = "asc".equals(sortOrder);
                if (columnName == null)
                {
                    return 0;
                }
                if ("column2".equals(columnName))
                {
                    if (null == data1.getTcn())
                    {
                        data1.setTcn("");
                    }
                    if (null == data2.getTcn())
                    {
                        data2.setTcn("");
                    }
                    //Modified for ESPRD00434853
                    return ascending ? data1.getTcn().trim().compareToIgnoreCase(
                            data2.getTcn().trim()) : data2
                            .getTcn().trim().compareToIgnoreCase(data1.getTcn().trim());
                }
                return 0;
            }
        };
        Collections.sort(dataList, comparator);
    }
	
	 /**
     * This method is used to get the Routing Data Bean.
     * 
     * @return RoutingDataBean : RoutingDataBean object.
     */
    public static TPLRoutingDataBean getRoutingDataBean()
    {
         //EnterpriseLogger logger = EnterpriseLogFactory.getLogger(TPLHIPPControllerBean.class);
        FacesContext fc = FacesContext.getCurrentInstance();
        return ((TPLRoutingDataBean) fc.getApplication().createValueBinding(
                ContactManagementConstants.BINDING_BEGIN_SEPARATOR
                        + TPLRoutingDataBean.BEAN_NAME
                        + ContactManagementConstants.BINDING_END_SEPARATOR)
                .getValue(fc));
    }
		
	

	/**
	 * @return Returns the hippEffectivePeriodColumnSortFlag.
	 */
	public boolean[] getHippEffectivePeriodColumnSortFlag() {
		return hippEffectivePeriodColumnSortFlag;
	}

	/**
	 * @param hippEffectivePeriodColumnSortFlag
	 *            The hippEffectivePeriodColumnSortFlag to set.
	 */
	public void setHippEffectivePeriodColumnSortFlag(
			boolean[] hippEffectivePeriodColumnSortFlag) {
		this.hippEffectivePeriodColumnSortFlag = hippEffectivePeriodColumnSortFlag;
	}

	/**
	 * @return Returns the letterRequestColumnSortFlag.
	 */
	public boolean[] getLetterRequestColumnSortFlag() {
		return letterRequestColumnSortFlag;
	}

	/**
	 * @param letterRequestColumnSortFlag
	 *            The letterRequestColumnSortFlag to set.
	 */
	public void setLetterRequestColumnSortFlag(
			boolean[] letterRequestColumnSortFlag) {
		this.letterRequestColumnSortFlag = letterRequestColumnSortFlag;
	}

	/**
	 * @return Returns the memberDetailsColumnSortFlag.
	 */
	public boolean[] getMemberDetailsColumnSortFlag() {
		return memberDetailsColumnSortFlag;
	}

	/**
	 * @param memberDetailsColumnSortFlag
	 *            The memberDetailsColumnSortFlag to set.
	 */
	public void setMemberDetailsColumnSortFlag(
			boolean[] memberDetailsColumnSortFlag) {
		this.memberDetailsColumnSortFlag = memberDetailsColumnSortFlag;
	}

	/**
	 * @return Returns the memberPolicyColumnSortFlag.
	 */
	public boolean[] getMemberPolicyColumnSortFlag() {
		return memberPolicyColumnSortFlag;
	}

	/**
	 * @param memberPolicyColumnSortFlag
	 *            The memberPolicyColumnSortFlag to set.
	 */
	public void setMemberPolicyColumnSortFlag(
			boolean[] memberPolicyColumnSortFlag) {
		this.memberPolicyColumnSortFlag = memberPolicyColumnSortFlag;
	}

	/**
	 * This method is used to validate Entity for the payer payee CR-2537.
	 * 
	 * @return SUCCESS
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	public String validateEntity() 
	{
		logger.debug("TPLHIPPControllerBean::validateEntity:: END"); 
		TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		try
		{
			TPLHIPPPayeeInfoVO tplHIPPPayeeInfo = hippDataBean.getTplHIPPPayeeInfoVO();
			String entityType = null;
			String entityIDType = null;
			String entityID = null;
			if (tplHIPPPayeeInfo != null)
			{
				if (tplHIPPPayeeInfo.getEntityID() != null)
				{
					entityID = tplHIPPPayeeInfo.getEntityID();
				}
				if (tplHIPPPayeeInfo.getEntityIDType() != null)
				{
					entityIDType = tplHIPPPayeeInfo.getEntityIDType();
				}
				if (tplHIPPPayeeInfo.getEntityIDType() == null) 
				{
					entityType = tplHIPPPayeeInfo.getEntityIDType();
				}
				if (tplHIPPPayeeInfo.getPayeeID() == null)
				{
					Locale locale = null;
					FacesContext facesContext = FacesContext.getCurrentInstance();
					locale = facesContext.getViewRoot().getLocale();
					FacesMessage facesMessage = new FacesMessage(ResourceBundle
							.getBundle(TPLHIPPConstants.ADDHIPPPortletResource,locale)
							.getString(TPLHIPPConstants.TPL_HIPP_CASE_ADD_ENTITY));
					facesContext.addMessage(null, facesMessage);
				}
				TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
				TPLHIPPPayeeInfoVO tplHIPPPayeeInfoVO = tplHIPPDelegate.validateEntityID(entityType, 
																		 entityID, entityIDType);				
				hippDataBean.setTplHIPPPayeeInfoVO(tplHIPPPayeeInfoVO);
				hippDataBean.setShowAddressDetails(true);
				//hippDataBean.setShowAddressDetails(true);
			}
		}
		catch (Exception e)
		{
			logger.error(e);
			FacesMessage message = new FacesMessage();
			message.setDetail(e.getMessage());
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		/*	FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, message);
		}
		
		return SUCCESS;*/
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			FacesContext.getCurrentInstance().addMessage(ABC_STR, message);
		}
		
		return SUCCESS_STR;
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        


	}

	/**
	 * Holds addNewHIPPInfo
	 */
	//GLOBAL ACTION COMMENT
	/*public void addNewHIPPInfo() {
		logger.info("TPLHIPPControllerBean::addNewHIPPInfo:: START"); 
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setAddMode(true);
		tplHIPPDataBean.setUpdateMode(false);
		tplHIPPDataBean.setShowMemberDetails(false);
		logger.info("TPLHIPPControllerBean::addNewHIPPInfo:: END"); 
	}*/

	/**
	 * @return Returns the link2Show.
	 */
	//GLOBAL ACTION COMMENT
	/*public String getLink2Show() {

		logger.info("TPLHIPPControllerBean::getLink2Show:: START"); 
		Map links2Hide = getPermissions();

		String deletePermission = (String) links2Hide.get("casetype");
		if (deletePermission != null) {
			deletePermission = deletePermission.trim();
			if ((links2Hide != null) && (deletePermission.equalsIgnoreCase("W")))
			{
				TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
				tplHIPPDataBean.setDisableAddLink(false);
			}
		}
		logger.info("TPLHIPPControllerBean::getLink2Show:: END"); 
		return link2Show;
	}*/

	/**
	 * @param link2Show
	 *            The link2Show to set.
	 */
	//GLOBAL ACTION COMMENT
	/*public Map getPermissions() {
		 
		Map linksMap = new HashMap();
		//String userid = "123"; 
		//FieldAccessControl fieldAccessControlImpl = new FieldAccessControl(); Find Bug Fix
		//String ssnpermissions = "H";
		ArrayList linksList2Pass = new ArrayList();
		linksList2Pass.add("casetype");
		linksMap.put("UpdateBenefitPlan", "W");
		return linksMap;
	}*/

	/**
	 * @param link2Show
	 *            The link2Show to set.
	 *///GLOBAL ACTION COMMENT
	/*public void setLink2Show(String link2Show) {
		this.link2Show = link2Show;
	}*/
	
	
	/**
	 * @param value
	 *            ValueChangeEvent
	 */
	public void valueChangeEventEntityIDType(ValueChangeEvent value)
	
	{
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityIDType("");
		tplHIPPDataBean.getEntityIDTypeList().clear();
		List list = new ArrayList(); 
		String selectedValue = (String) value.getNewValue();
		if (selectedValue.equalsIgnoreCase("M")) 
		{		
			list.add(new SelectItem("", "", ""));
			list.addAll(tplHIPPDataBean.getMemberIDTypeList());
			tplHIPPDataBean.setDisableEntityIDType(false);
		}
		else if (selectedValue.equalsIgnoreCase("P"))
		{
			list.add(new SelectItem("", "", ""));
			list.addAll(tplHIPPDataBean.getProviderIDList());
			tplHIPPDataBean.setDisableEntityIDType(false);
		}		
		else if (selectedValue.equalsIgnoreCase("TC"))
		{
			tplHIPPDataBean.getTplHIPPPayeeInfoVO().setEntityIDType("C");
			list.addAll(tplHIPPDataBean.getCarrierIdTypeList());
			tplHIPPDataBean.setDisableEntityIDType(true);
		} 
		else if (selectedValue.equalsIgnoreCase("TP"))
		{
			list.add(new SelectItem("", "", ""));
			list.addAll(tplHIPPDataBean.getPolicyHolderIdTypeList());
			tplHIPPDataBean.setDisableEntityIDType(false);
		} 
		else if (selectedValue.equalsIgnoreCase("TE"))
		{
			list.add(new SelectItem("", "", ""));
			list.addAll(tplHIPPDataBean.getEmployerIDTypeList());
			tplHIPPDataBean.setDisableEntityIDType(false);
		}	
		else
		{
			list.add(new SelectItem("O", "O-Other", "Other"));
			tplHIPPDataBean.setEntityIDTypeList(list);
			tplHIPPDataBean.setDisableEntityIDType(false);
		}
		tplHIPPDataBean.setEntityIDTypeList(list);
		//logger.info("TPLHIPPControllerBean::valueChangeEventEntityIDType:: END"); 
	}
	
	public void message(String message)
	{
		FacesMessage facesMessage = new FacesMessage();
		facesMessage.setDetail(message);
	// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	//	FacesContext.getCurrentInstance().addMessage(ABC_INSTANCE_STRNG, facesMessage);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		FacesContext.getCurrentInstance().addMessage(ABC_STR, facesMessage);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
	// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}
	
	/**
	 * This method is used to edit hipp payee.
	 * 
	 * @return success
	 * @generated "UML to Java V1.4
	 *            (com.ibm.xtools.transform.uml2.java.internal.UML2JavaTransform)"
	 */
	
	public String populateCBWHistoryDetails()
	{	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		String rowValue = (String) facesContext.getExternalContext()
				.getRequestParameterMap().get(ROW_INDEX);
		
		Integer rowValueInt = new Integer(rowValue);
				
		TPLHIPPCBAVO tplHIPPCBAVO = (TPLHIPPCBAVO) tplHIPPDataBean.getTplHIPPCaseVO()
			.getListOfCBAHistory().get(rowValueInt.intValue());		
			
		tplHIPPDataBean.setTplHIPPCBAVO(tplHIPPCBAVO);
		
		tplHIPPDataBean.setCalculateFlag(true);		
		return TPLAdministrationConstants.SUCCESS;
	}
	
	
	public boolean validateEffectiveDatesforApproved(Date beginDate, Date endDate,TPLHIPPDataBean tplHIPPDataBean)
	{
		boolean flag = false;
		//GLOBAL ACTION CHANGE
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO();
		//String status = tplHIPPEffectivePeriodVO.getHippEffectiveStatus();
		List hippEffectivePeriodList = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList();
		if(hippEffectivePeriodList != null && hippEffectivePeriodList.size() > 0)
		{
		   TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO1 =
					(TPLHIPPEffectivePeriodVO)hippEffectivePeriodList.get(tplHIPPDataBean.getCurrentRecord());
		  //Defect : ESPRD00089819
		  if(tplHIPPEffectivePeriodVO1.getHippEffectiveStatus().equalsIgnoreCase("A"))
		  {		
		    try 
		    {
			 SimpleDateFormat sd = new SimpleDateFormat(DATE_FORMAT);
			 /* Date beginDt = sd.parse(beginDate);  
			  Date endDt = sd.parse(endDate);*/
			  if(beginDate.compareTo(sd.parse(tplHIPPEffectivePeriodVO1.getHippEffectiveBeginDate()))!=0 || 
					  endDate.compareTo(sd.parse(tplHIPPEffectivePeriodVO1.getHippEffectiveEndDate()))!=0 )
			  {					
				 //Modified for defect ESPRD00899689
				  //TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_PRE_BEG_END_CHECK);
				 TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLHIPPConstants.TPL_HIPP_PRE_BEG_END_CHECK, "hiddenBeginDate" , false , TPLHIPPConstants.ADDHIPPPortletResource);
			 	 flag = true;
			  }
			  if(StringUtils.isNotEmpty(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee()))
			  {
				 Double d = new Double(tplHIPPEffectivePeriodVO.getPolicyAdministrativeFee());
				 if(new Double(tplHIPPEffectivePeriodVO1.getPolicyAdministrativeFee()).compareTo(d) != 0)
				 {
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_ADMIN_FEE);
					flag = true;
				 }
			  }
			}
			catch (ParseException e) 
			{
				logger.debug(e);
			}
		  }
		}
		return flag;
	}
	
	// Commented -- CR 716985
	/*public boolean validatePayeeDatesForApproved(TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO)
	{
		boolean flag = false;		
				
		if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("A"))
		{					
			TPLHIPPPaymentInfoVO tplHIPPPaymentInfoVO = tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO();
			//List payeeList = tplHIPPPaymentInfoVO.getTplAddPayeeList();
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			if(StringUtils.isNotEmpty(tplHIPPDataBean.getPrevEffectiveStatus()) && 
					tplHIPPDataBean.getPrevEffectiveStatus().equalsIgnoreCase("A"))
			{				
				if(StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumbeginDate()) || 
						StringUtils.isEmpty(tplHIPPPaymentInfoVO.getPremiumEndDate()))
				{
					TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_PRE_BEGEND_DATE_CHANGE, "prembegindate");
					flag = true;
				}
				else
				{
					try 
					{	
						Date prevBDate = dateformatYYYYMMDD.parse(tplHIPPDataBean.getPremiumBeginDate());
						Date presBDate = dateformatYYYYMMDD.parse(tplHIPPPaymentInfoVO.getPremiumbeginDate());
						Date prevEDate = dateformatYYYYMMDD.parse(tplHIPPDataBean.getPremiumEndDate());
						Date presEDate = dateformatYYYYMMDD.parse(tplHIPPPaymentInfoVO.getPremiumEndDate());
						if(!(prevBDate.compareTo(presBDate)==0) || !(prevEDate.compareTo(presEDate)==0))
						{
							TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_PRE_BEGEND_DATE_CHANGE,"prembegindate");
							flag = true;
						}	
					}
					catch(ParseException pe)
					{
						logger.error(pe);
					}
				}				
			}			
		}
		return flag;
	}*/
	
	//TPL0306.0001.01
	public boolean validationWhenApproved(TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO)
	{
		logger.debug("TPLHIPPControllerBean::validationWhenApproved:: START"); 
		boolean flag = false;	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();	
		TPLHIPPPaymentInfoVO tplHIPPPaymentInfoVO = tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO();
		TPLHIPPPayeeInfoVO	tplHIPPPayeeInfoVO=null;
		//The below line commented for ::ESPRD00791471 and replaced with databean payeelist
		//List payeeList = tplHIPPPaymentInfoVO.getTplAddPayeeList();
		List beanPayeeList=tplHIPPDataBean.getTplAddPayeeList();
		if (StringUtils.isEmpty(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getFrequency()))
		{						
			flag = true;
		}
		boolean premflag=false;
		/**
		 * The below if condition  is added for the defect :::ESPRD00791471
		 */
		
		if(null!=tplHIPPDataBean.getTplHIPPPaymentInfoVO().getPremiumAmount())
		{
		if(logger.isDebugEnabled()) {
			logger.debug("Here the tplHIPPPaymentInfoVO.getPremiumAmount is not null"+tplHIPPDataBean.getTplHIPPPaymentInfoVO().getPremiumAmount());

		}

		 premflag = TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0057(tplHIPPDataBean.getTplHIPPPaymentInfoVO().getPremiumAmount().trim(), "A");
		}
		if(premflag)
		{
			flag = true;
		}
		
		/*
		 * This payeeList is replaced with databeanpayeelist for the defect :::ESPRD00791471
		 */
		//if(payeeList.isEmpty())
		if(beanPayeeList==null && beanPayeeList.isEmpty())
		{
			TPLAdministrationHelper.setAddHIPPInfoMessageToId(TPLAdministrationConstants.ENTIYID_ENTITYTYPE_ENTITYIDTYPE_NULL,
					"entitytype", false, TPLHIPPConstants.HIPPSEARCHPORTLETRESOURCE);
			flag = true;
		}
		PolicyVO policyVO = getTPLPolicyDataBean().getPolicyVO();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	//	if(policyVO.getPend().equalsIgnoreCase(TRUE) || policyVO.getPolicyVoid().equalsIgnoreCase(TRUE))
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		if(policyVO.getPend().equalsIgnoreCase(TRUE_STR) || policyVO.getPolicyVoid().equalsIgnoreCase(TRUE_STR))
		{
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		
			TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_POLICY_REQ_ACTIVE);
			flag = true;
		}
		if(StringUtils.isNotBlank(policyVO.getPolicyNumber()) || 
				(policyVO.getTplPolicyCarrierVO() != null &&  
						StringUtils.isNotBlank(policyVO.getTplPolicyCarrierVO().getCarrierID())) ||
						(getTPLPolicyDataBean().getCoveredIndividualList() != null && 
								getTPLPolicyDataBean().getCoveredIndividualList().size() > 0))  
		{
			if(TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0060(tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate(),
					tplHIPPEffectivePeriodVO.getHippEffectiveEndDate(),
					policyVO.getBeginDate(), policyVO.getEndDate()))
			{
				flag = true;
			}	
		}
		else
		{			
			TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.TPL_HIPP_POL_REQ);
			flag = true;
		}		
		if(memberEligibility(tplHIPPDataBean))
		{
			flag = true;
		}
		return flag;
	}
	
	 //Infinite CR Implementation:{1825}
    /**
     * Used to get user permissions
     */
    public Map getUserPermission()
    {
    	Map linksMap = new HashMap();
    	String userid = getUserID();
    	if(logger.isDebugEnabled()) {
	    	logger.debug("Inside TPLHIPPControllerBean userid::" + userid);

    	}

    	FieldAccessControl fieldAccessControlImpl = new FieldAccessControl();
    	if(logger.isDebugEnabled()) {
	    	logger.debug("fieldAccessControlImpl::" + fieldAccessControlImpl);

    	}

    	String ssnpermissions ="";	
    	ArrayList linksList2Pass = new ArrayList();
    	linksList2Pass.add(TPLAdministrationConstants.UPDATE_HIIP_PAGE);
    	try 
		{
    		linksMap =  fieldAccessControlImpl.getActionLinkPermission(linksList2Pass,userid);
    	} 
    	catch (SecurityFLSServiceException e) 
		{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
    		 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("SecurityFLSServiceException in getUserPermission ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
    		e.getCause();
    		if(logger.isErrorEnabled()) {
	    		logger.error("Exception has come:"+e.getMessage());

    		}

    	}
    	if(logger.isDebugEnabled()) {
	    	logger.debug("linksMap in TPLHIPPControllerBean"+linksMap);

    	}
	// MT Platform Code Merge (Merge 1 - Iteration1) ends        

    	//linksMap.put("/Enterprise/UpdateHIIPPage","u");
    	return linksMap;
     }

   
      /**
       * Used to render or disable links based on permission.
       *
       */
    public void link2Show()
    {
    	/* Added PARTIAL as part of p1 pmd violation */
    	final String  PARTIAL = "partial";
    	
    	final String  FULL ="full";
	    Map links2Hide = getUserPermission();
	    FieldAccessControl fieldAccessControlImpl = new FieldAccessControl();
	  	Set keys = links2Hide.keySet();
	  	Iterator keyitr = keys.iterator();
	  	TPLHIPPDataBean dataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
	  	//dataBean.setDeleteFlag(true);
	  	//dataBean.setDisableTplHIIPupdate(true);
	  	String ruleId = "TPL0273.0001.01";
	  	RulesDelegate ruleDelegate = new RulesDelegate(ruleId);
	  	while( keyitr. hasNext() )
	  	{
	  		String linkName=(String)keyitr.next();	
	  		String linkPermission=(String)links2Hide.get(linkName);
	  		String TPL_UPDATE_HIIP_PAGE=TPLAdministrationConstants.UPDATE_HIIP_PAGE;
	  	//Rule Invocation Context object holds object arrays used in rule execution.

			// Adding object into rule invocation context.
			ruleDelegate.addObject(TPL_UPDATE_HIIP_PAGE);
			ruleDelegate.addObject(linkName);

			// Invoke RIF with ruleid and rule invocation objects.
			RulesResultVO rulesResult = null;
			try {
				rulesResult = ruleDelegate.invokeRule();

	  		if ( linkPermission != null )
	  		{
	  			linkPermission = linkPermission.trim();	
	  			
	  			if(rulesResult.isReturnBooleanValue())
	  			{
	  				
	  				//if(!("u".equalsIgnoreCase(linkPermission)))
	  				if(("r".equalsIgnoreCase(linkPermission)))
	  				{	    				
	  					logger.debug("TPLHippControllerBean Accesspermission*******NOT NULL Permission*******"+linkPermission);
	  					dataBean.setDisableTplHIIPupdate(true);  
	  					// setting policy related links
	  					getTPLPolicyDataBean().setRenderPolicyCopyLink(false);
    					getTPLPolicyDataBean().setDisableTplLabel(true);
    					getTPLPolicyDataBean().setDisableMedicare(true);
    					getTPLPolicyDataBean().setDisableMasCopyForSecurity(true);
	  					try
						{
	  						String maskPriv = fieldAccessControlImpl.getFiledAccessPermission(
	  								TPLHIPPConstants.TPL_HIPP_FIELD_MASKING, getUserID());
	  						logger.debug(">>TPLHippControllerBean ------MASK_PRIVILEGES----->"+maskPriv);
	  						if(maskPriv==null || !TPLHIPPConstants.MASK_PRIVILEGES.equalsIgnoreCase(maskPriv))
	  						{    					
	  							dataBean.setPartialMask(PARTIAL);
	  							dataBean.setFullMask(FULL);
	  							dataBean.setFullMaskRender(true);
	  							// setting policy related links
	  							getTPLPolicyDataBean().setPartialMask(PARTIAL);
    							getTPLPolicyDataBean().setFullMask(FULL);
    							getTPLPolicyDataBean().setFullMaskBooleanValue(true);
	  						}
						}
	  					catch(SecurityFLSServiceException e)
						{
	  						logger.error("Exception in TPLHIPPControllerBean.link2Show()", e);    
	  						e.getCause();
	  						
						}
	  				}
	  				if("d".equalsIgnoreCase(linkPermission))//100
	  				{
	  					logger.debug("**TPLHippControllerBean Accesspermission***"+linkPermission);
	  					dataBean.setDeleteFlag(true);
	  					// setting policy related links
	  					getTPLPolicyDataBean().setDeleteFlag(true);
	  				}
	  			}
	  		} 
	  		else 
	  		{
	  			if(rulesResult.isReturnBooleanValue())
	  			{

	  				dataBean.setDisableTplHIIPupdate(true);
	  				// setting policy related links
  					getTPLPolicyDataBean().setRenderPolicyCopyLink(false);
					getTPLPolicyDataBean().setDisableTplLabel(true);
					getTPLPolicyDataBean().setDisableMedicare(true);
					getTPLPolicyDataBean().setDisableMasCopyForSecurity(true);
	  				try
					{
	  					String maskPriv = fieldAccessControlImpl.getFiledAccessPermission(
	  							TPLHIPPConstants.TPL_HIPP_FIELD_MASKING, getUserID());
	  					logger.debug(">>------MASK_PRIVILEGES----->"+maskPriv);
	  					if(maskPriv==null || !TPLHIPPConstants.MASK_PRIVILEGES.equalsIgnoreCase(maskPriv))
	  					{    					
	  						dataBean.setPartialMask(PARTIAL);
	  						dataBean.setFullMask(FULL);
                            dataBean.setFullMaskRender(true);
	  						// setting policy related links
  							getTPLPolicyDataBean().setPartialMask(PARTIAL);
							getTPLPolicyDataBean().setFullMask(FULL);
							getTPLPolicyDataBean().setFullMaskBooleanValue(true);
	  					}
					}
	  				catch(SecurityFLSServiceException e)
					{
	  						logError("SecurityFLSServiceException in link2Show ",e);
	  					e.getCause();
	  					
					}
	  			}
	  		}
			}catch (RulesDelegateException re){
                if(rule_time.equals(re.getErrorCode())&&logger.isDebugEnabled())
				 {
					logger.warn("Rule Expired::::"+ruleId);
					//If needed perform expires logic here  
				 }
                if(logger.isDebugEnabled()){
				  logger.info("RulesDelegateException::::"+re);
                }
         }
	  	}
    }
    //GLOBAL ACTION COMMENT
    /*private String loadHIPPuserPermission;
	
	*//**
	 * @return Returns the loadHIPPuserPermission.
	 *//*
	public String getLoadHIPPuserPermission() {
		link2Show();
		return loadHIPPuserPermission;
	}
	*//**
	 * @param loadHIPPuserPermission The loadHIPPuserPermission to set.
	 *//*
	public void setLoadHIPPuserPermission(String loadHIPPuserPermission) {
		this.loadHIPPuserPermission = loadHIPPuserPermission;
	}*/
	
	public boolean validateDisbursementDates()
	{
		//logger.info("TPLHIPPControllerBean::validateDisbursementDates:: START"); 
		boolean flag = false;
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		List payeeList = tplHIPPDataBean.getTplAddPayeeList();
		TPLHIPPPaymentInfoVO paymentInfo = tplHIPPDataBean.getTplHIPPPaymentInfoVO();
		
		if(payeeList != null && payeeList.size()>0)
		{
			
			if(StringUtils.isNotEmpty(paymentInfo.getDisbursementBeginDate()) && 
					StringUtils.isNotEmpty(paymentInfo.getDisbursementEndDate()))
			{
								
				Date beginDateToCompare =  null;
				Date endDateToCompare =  null;				
				try 
				{
					TPLHIPPPayeeInfoVO payeeInfoVO = (TPLHIPPPayeeInfoVO)payeeList.get(0);
					if(payeeInfoVO != null)
					{		
							
						beginDateToCompare = dateformatYYYYMMDD.parse(payeeInfoVO.getPayeeEffectiveBeginDate());
						endDateToCompare = dateformatYYYYMMDD.parse(payeeInfoVO.getPayeeEffectiveEndDate());						
					}
					for(int i = 1; i<payeeList.size(); i++)
					{
						TPLHIPPPayeeInfoVO payeeInfoVO1 = (TPLHIPPPayeeInfoVO) payeeList.get(i);							
						if(payeeInfoVO1 != null)
						{		
							Date beginTemp = dateformatYYYYMMDD.parse(payeeInfoVO1.getPayeeEffectiveBeginDate());
							Date endTemp = dateformatYYYYMMDD.parse(payeeInfoVO1.getPayeeEffectiveEndDate());
							
							if(beginTemp.before(beginDateToCompare))
							{
								beginDateToCompare = beginTemp;
							}
							if(endTemp.after(endDateToCompare))
							{
								endDateToCompare = endTemp;
							}	
						}
					}
					//GLOBAL ACTION CHAGNE
					if(beginDateToCompare != null && endDateToCompare !=null){
					if (TPLHIPPValidatorHelper.validateTPLHIPPMNTHIPP0049(
							paymentInfo.getDisbursementBeginDate(),
							paymentInfo.getDisbursementEndDate(),
							beginDateToCompare,endDateToCompare))
					{
						flag = true;
					}
					}
					
				}			
				catch(ParseException pe)
				{
					logger.debug(pe);
				}	
			}
		}
						
		return flag;
	}
	public boolean stateAuthMemberValidation(String memberID, String memberIDType)
	{
		boolean myFlag = true;
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// getting hippeffective begin and end dates.
		List hippEffectiveReriodlit = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList();
		Date hippbdate = null;
		Date hippedate = null;
		if(hippEffectiveReriodlit != null)
		{
			int currentRecord = tplHIPPDataBean.getCurrentRecord();
			TPLHIPPEffectivePeriodVO hIPPEffectivePeriodVO = 
				(TPLHIPPEffectivePeriodVO)hippEffectiveReriodlit.get(currentRecord);			
			hippbdate = TPLAdministrationHelper.dateConverter(hIPPEffectivePeriodVO.getHippEffectiveBeginDate(),null);
			hippedate = TPLAdministrationHelper.dateConverter(hIPPEffectivePeriodVO.getHippEffectiveEndDate(), null);
		}
		String caseBeginDate = tplHIPPDataBean.getTplHIPPCaseVO().getCaseBeginDate().toString();
		String caseEndDate = tplHIPPDataBean.getTplHIPPCaseVO().getCaseEndDate().toString();
		String memberId = memberID;
		String memberIdType = memberIDType;
		
		TPLHIPPMemberDetailVO tplHIPPMemberDetailVOResult = null;
		try
		{
			// Calling validateMember delegate to get COESPAN details
			TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();	
			tplHIPPMemberDetailVOResult = tplHIPPDelegate
					.validateMember(memberId, memberIdType, caseBeginDate, caseEndDate);	
			
			if(tplHIPPMemberDetailVOResult != null )			
			{
				if(tplHIPPMemberDetailVOResult.getMemberDetailsList() != null 
						&& tplHIPPMemberDetailVOResult.getMemberDetailsList().size()>0)
				{
					List memberDetailList =tplHIPPMemberDetailVOResult.getMemberDetailsList();
					Iterator memberDetailItr = memberDetailList.iterator();
					while(memberDetailItr.hasNext())			
					{
						try
						{
							MemberDetailsListVO memberDetailsListVO =(MemberDetailsListVO)memberDetailItr.next() ;
							SimpleDateFormat fromDateFormat = new SimpleDateFormat(DATE_FORMAT);
							String COEbeginDate1 = memberDetailsListVO.getBeginDate();
							String COEbeginEnd1 = memberDetailsListVO.getEndDate();
							
							Date COEbeginDate = fromDateFormat.parse(COEbeginDate1);
							Date COEendDate = fromDateFormat.parse(COEbeginEnd1);
							if(!(hippbdate.after(COEbeginDate) &&  hippbdate.before(COEendDate)) 
									|| !(hippedate.after(COEbeginDate) &&  hippedate.before(COEendDate)))
							{
								myFlag = false;
								logger.debug("Member must be eligible for a State authorized program >> message");
								TPLAdministrationHelper.addErrorMessageFromPassesArgs(
										TPLHIPPConstants.TPL_HIPP_MEMBERID_ELIGIBLE,TPLHIPPConstants.ADDHIPPPortletResource,
										new String[] {memberId}, null);		
										tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD01031167
							}					
						}
						catch (ParseException pe) 
						{
							logger.debug(pe);					
						}
					}
				}
				else
				{
					myFlag = false;
					TPLAdministrationHelper.addErrorMessageFromPassesArgs(
							TPLHIPPConstants.TPL_HIPP_MEMBERID_ELIGIBLE,TPLHIPPConstants.ADDHIPPPortletResource,
							new String[] {memberId}, null);
							tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD01031167
				}
			}
		}
		catch(TPLHIPPBusinessException e)
		{
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			//logger.error("Exception in TPLHIPPControllerBean.stateAuthMemberValidation()", e);   
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("TPLHIPPBusinessException in stateAuthMemberValidation ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
		return myFlag;
	}
	
	
	public boolean memberEligibility(TPLHIPPDataBean tplHIPPDataBean)
	{
		boolean myFlag = false;
		
		//TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		String appMemID = tplHIPPDataBean.getTplHIPPCaseVO().getTplHIPPMemberDetailVO().getMemberID();
		
		try
		{
			TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
			String hippCaseId = tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseID();
			String hippCaseSequenceNumber = tplHIPPDataBean.getHippCaseSequenceNumber();
			TPLHIPPCBA tplHIPPCBA = tplHIPPDelegate 
					.calculateCBAWorksheet(hippCaseId,new Long(hippCaseSequenceNumber));
			
			if(tplHIPPCBA != null)
			{
				if(tplHIPPCBA.getFinalCostBenefitAmount() == null && tplHIPPCBA.getPremiumAmount() == null 
						&& tplHIPPCBA.getPolicyDeductibleAmount() == null && tplHIPPCBA.getPolicyAdministrativeFee() == null 
						&& tplHIPPCBA.getTotalCoInsuranceAmount() == null)
				{
					myFlag = true;
					if(tplHIPPCBA.getCrvdINDIVSummedMedicaidCost() != null && !tplHIPPCBA.getCrvdINDIVSummedMedicaidCost().isEmpty())
					{
						Iterator itr = tplHIPPCBA.getCrvdINDIVSummedMedicaidCost().iterator();
						while(itr.hasNext())
						{
							HIPPCalcIndividual hippCalcIndividual = (HIPPCalcIndividual)itr.next();
							TPLAdministrationHelper.addErrorMessageFromPassesArgs(
									TPLHIPPConstants.TPL_HIPP_MEMBERID_ELIGIBLE,TPLHIPPConstants.ADDHIPPPortletResource,
									new String[] {hippCalcIndividual.getAltID()}, null);
							tplHIPPDataBean.setShowWorkSheet(true);
							tplHIPPDataBean.setDisableApproveonCalculate(true);//ESPRD01031167
							
							if(tplHIPPDataBean.getTplHIPPCBAVO() != null && 
									"A".equalsIgnoreCase(tplHIPPDataBean.getTplHIPPCBAVO().getHippCaseStatus()))
							{
								if(hippCalcIndividual.getAltID().equalsIgnoreCase(appMemID))
								{
									TPLAdministrationHelper.setAddHIPPInfo(TPLHIPPConstants.MEMBER_NOT_ELIGIBLE);
								}
							}							
						}
					}					
				}
			}
		}
		catch (TPLHIPPBusinessException hippBusinessException) {
			 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
			if(logger.isErrorEnabled()){
				logger.error("TPLHIPPBusinessException in memberEligibility ",hippBusinessException);
			}
			logger.debug(hippBusinessException);
		} catch (Exception e) {
			if(logger.isErrorEnabled()){
				logger.error("Exception in memberEligibility ",e);
			}
			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
			logger.debug(e);
		}
		return myFlag;
	}
	
	
	// this property was added for IPC
	//Commenting as part of PMD violation
	//private boolean hippSearch;
	
	/**
	 * @return Returns the hippSearch.
	 */
	public boolean isHippSearch() 
	{	
		//System.out.println("TPLHIPPControllerBean::isHippSearch:: START"); 
		/*TPLHIPPSearchResultVO tplHIPPSearchResultVO = 
			(TPLHIPPSearchResultVO) facesContext.getExternalContext().getSessionMap().get("recieveVO");
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		tplHIPPDataBean.setShowHIPPDetails(true);
     	if(tplHIPPSearchResultVO != null)
     	{     		
 			getHIPPCaseDetail(tplHIPPSearchResultVO);
 			facesContext.getExternalContext().getSessionMap().remove("recieveVO");
		    return  true;
     	}*/
		/*if(!tplHIPPDataBean.isHippSearch())
		{
			
		}*/
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		//tplHIPPDataBean.setTabIndex(0);
		FacesContext facesContext = FacesContext.getCurrentInstance();
		if(facesContext.getExternalContext() != null && facesContext.getExternalContext().getSessionMap() != null)
		{
			String tplHIPPCasseID = 
				(String) facesContext.getExternalContext().getSessionMap().get("recieveVO");	
			tplHIPPDataBean.setHippSearch(true);
			tplHIPPDataBean.setShowHIPPDetails(true);
			if(StringUtils.isNotBlank(tplHIPPCasseID) && !tplHIPPCasseID.equals("ADD"))
	     	{    
	     		getTPLHIPPCaseDetails(tplHIPPCasseID);
	 			facesContext.getExternalContext().getSessionMap().remove("recieveVO");
			    return  true;
	     	}else{
	     		 facesContext.getExternalContext().getSessionMap().remove("recieveVO");
	     		 return  true;
	     	}
		}
		    	
	    return false;
	}
	
	/**
	 * @param hippSearch The hippSearch to set.\
	 * Commenting as part of PMD violation
	 */
/*	public void setHippSearch(boolean hippSearch) 
	{
		this.hippSearch = hippSearch;
	}
	*/
	public void valueChangeEventForPolicy() 
	{

		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		
		tplHIPPDataBean.setPolicyChangedInd(true);	
		//for defect ESPRD00725499
		tplHIPPDataBean.setCurrentPageId("tplApplicantMemberPolicyFocus");	
	}


	
//	private String policySelected;
	
	
	/**
	 * @return Returns the policySelected.
	 */
	public String getPolicySelected() 
	{	
		TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		TPLHIPPEffectivePeriodVO tempTPLHIPPEffectivePeriod = new TPLHIPPEffectivePeriodVO();		
		addPolicyInfo(tempTPLHIPPEffectivePeriod,tplHIPPDataBean);		
		tplHIPPDataBean.setTempTPLHIPPEffectivePeriodVO(tempTPLHIPPEffectivePeriod);
		tplHIPPDataBean.setPolicyChangedInd(false);
		return "";
	}
	/**
	 * @param policySelected The policySelected to set.
	 */
	//Commented for PMD P1 violation fix.
	/*public void setPolicySelected(String policySelected) {
		this.policySelected = policySelected;
	}*/
	
	/**
     * This method is used to set Policy Details List.
     * 
     * @param policyVO
     *            PolicyVO
     */

    private void setDataBeanListsFromPolicyVO(PolicyVO policyVO)
    {
        if (policyVO.getPolicyPeriodCoverageVOSet() != null)
        {
            List policyPeriodCoverageVOList = new ArrayList();
            policyPeriodCoverageVOList.addAll(policyVO.getPolicyPeriodCoverageVOSet());
            getTPLPolicyDataBean().setPolicyPeriodCoverageList(policyPeriodCoverageVOList);
        }
        if (policyVO.getPolicyHolderVO().getPolicyHolderCoverageVOSet() != null)
        {
            List policyHolderCoverageVOList = new ArrayList();
            policyHolderCoverageVOList.addAll(policyVO.getPolicyHolderVO().getPolicyHolderCoverageVOSet());
            getTPLPolicyDataBean().setPolicyHolderCoverageList(policyHolderCoverageVOList);
        }
        if (policyVO.getPolicyHolderVO().getCoveredIndividualVOSet() != null)
        {
            List coveredIndividualVOList = new ArrayList();
            coveredIndividualVOList.addAll(policyVO.getPolicyHolderVO().getCoveredIndividualVOSet());
            getTPLPolicyDataBean().setCoveredIndividualList(coveredIndividualVOList);
        }
        if (policyVO.getPolicyAttachmentVOSet() != null)
        {
            List policyAttachmentsVOList = new ArrayList();
            policyAttachmentsVOList.addAll(policyVO.getPolicyAttachmentVOSet());
            getTPLPolicyDataBean().setPolicyAttachList(policyAttachmentsVOList);
        }
    }
    
    public void populateRecentEffectivePeriodFields()
    {
    	TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
    	List effPerlist = tplHIPPDataBean.getTplAddHIPPEffectivePeriodList(); 
		if(effPerlist !=null && effPerlist.size()>0)
		{
			Date beginDateToCompare =  null;
			Date endDateToCompare =  null;
			int recentRecord = 0;
			TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO1 = (TPLHIPPEffectivePeriodVO)effPerlist.get(0);
			if(tplHIPPEffectivePeriodVO1 != null)
			{
				beginDateToCompare = TPLAdministrationHelper.dateConverter(tplHIPPEffectivePeriodVO1.getHippEffectiveBeginDate(), null);				
			}
			for(int i = 1; i<effPerlist.size(); i++)
			{
				TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO2 = (TPLHIPPEffectivePeriodVO) effPerlist.get(i);				
				Date beginDateTemp = TPLAdministrationHelper.dateConverter(tplHIPPEffectivePeriodVO2.getHippEffectiveBeginDate(), null);
				if(beginDateTemp.after(beginDateToCompare) )
				{
					beginDateToCompare = beginDateTemp;
					recentRecord = i;
				}
			}
			/*if(tplHIPPDataBean.getCurrentRecord()>0)
			{
				System.out.println("populateRecentEffectivePeriodFields<<<<< >>>>>>>>>    "+recentRecord);
				recentRecord = tplHIPPDataBean.getCurrentRecord();
			}*/		
			tplHIPPDataBean.setCurrentEffective(recentRecord);
			TPLHIPPEffectivePeriodVO tplHIPPEffectivePeriodVO = (TPLHIPPEffectivePeriodVO)effPerlist.get(recentRecord);
			tplHIPPDataBean.setHippEffectiveBeginDate(TPLAdministrationHelper.dateConverter(
					tplHIPPEffectivePeriodVO.getHippEffectiveBeginDate(), null));
			tplHIPPDataBean.setHippEffectiveEndDate(TPLAdministrationHelper.dateConverter(
					tplHIPPEffectivePeriodVO.getHippEffectiveEndDate(), null));
			tplHIPPDataBean.setCoverMbrSk(tplHIPPEffectivePeriodVO.getCoverMBRSK());
			if(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus()!=null
					&& tplHIPPEffectivePeriodVO.getHippEffectiveStatus()!=null){
			if(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus().equalsIgnoreCase("A")
					&& tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("A")){
				tplHIPPDataBean.setAddCoverageIndFlag(true);
			}
			}
			if(tplHIPPEffectivePeriodVO.getPolicySk() != null && tplHIPPEffectivePeriodVO.getPolicySk().longValue() > 0)
			{	
				TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
				policyController.getPolicyDetails(tplHIPPEffectivePeriodVO.getPolicySk());
				if(tplHIPPEffectivePeriodVO.getHippAdditionalCoveredIndividualList() != null 
						&& !tplHIPPEffectivePeriodVO.getHippAdditionalCoveredIndividualList().isEmpty())
				{
					List coveredIndList = getTPLPolicyDataBean().getCoveredIndividualList();
					Iterator nonMemberCoveredlist = tplHIPPEffectivePeriodVO.getHippAdditionalCoveredIndividualList().iterator();
					while(nonMemberCoveredlist.hasNext())
					{
						//GLOBAL ACTION CHANGE 
						coveredIndList.add((CoveredIndividualVO)nonMemberCoveredlist.next());
					}
				}				
			}
			if (tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO() != null) 
			{
				tplHIPPDataBean.setTplHIPPPaymentInfoVO(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO());				
				tplHIPPDataBean.setTplAddPayeeList(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplAddPayeeList());
				tplHIPPDataBean.setTplhipppremiumlist(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getTplHippPaymentList());
				tplHIPPDataBean.setCalculateFlag(false);
			}
			if("A".equalsIgnoreCase(tplHIPPEffectivePeriodVO.getHippEffectiveStatus()))
			{					
				tplHIPPDataBean.setPremiumBeginDate(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getPremiumbeginDate());
				tplHIPPDataBean.setPremiumEndDate(tplHIPPEffectivePeriodVO.getTplHIPPPaymentInfoVO().getPremiumEndDate());
				tplHIPPDataBean.setDisableForApproved(true);	
				if(tplHIPPDataBean.isAddHippEffectivePeriodRendered())
				{						
					FacesContext facesContext = FacesContext.getCurrentInstance();
					UIViewRoot uiViewRoot = facesContext.getViewRoot();					
					HtmlSelectOneMenu effStatus = (HtmlSelectOneMenu) uiViewRoot.findComponent(
						"addHippInfo:hippcaseTab:hippCaseInfo:addHippEffectivePeriod:hippEffectiveStatus");
					if(effStatus != null)
					{
						effStatus.setValue("A");
					}
					tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveStatus("A");									
					tplHIPPDataBean.getTplHIPPAddEffectivePeriodVO().setHippEffectiveStatusDate(
							TPLContactManagementHelper.dateConverter(new Date()));
				}				
			}
			else
			{
				tplHIPPDataBean.setPremiumBeginDate("");
				tplHIPPDataBean.setPremiumEndDate("");
				tplHIPPDataBean.setDisableForApproved(false);
			}
			//modified for defect - ESPRD00843781
			//if("C".equalsIgnoreCase(tplHIPPEffectivePeriodVO.getHippEffectiveStatus()) )
			if(tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_CLOSED) 
					|| tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase(TPLAdministrationConstants.HIPP_DENIED))
			{
				tplHIPPDataBean.setDisableForClosed(true);
			}
			else
			{
				tplHIPPDataBean.setDisableForClosed(false);
			}
			//end
			if("C".equalsIgnoreCase(tplHIPPEffectivePeriodVO.getHippEffectiveStatus())
					|| "A".equalsIgnoreCase(tplHIPPEffectivePeriodVO.getHippEffectiveStatus()))
			{
				tplHIPPDataBean.setPrevEffectiveStatus(tplHIPPEffectivePeriodVO.getHippEffectiveStatus());				
			}
			if(tplHIPPDataBean.getTplHIPPCaseVO().getListOfCBAHistory() != null && !tplHIPPDataBean.getTplHIPPCaseVO().getListOfCBAHistory().isEmpty())
			{
				Iterator historyListIterator = tplHIPPDataBean.getTplHIPPCaseVO().getListOfCBAHistory().iterator();
				while(historyListIterator.hasNext())
				{
					TPLHIPPCBAVO tplHIPPCBAVO = (TPLHIPPCBAVO) historyListIterator.next();					
					if(tplHIPPCBAVO.getHippCaseSequenceNumber().equalsIgnoreCase(
							tplHIPPEffectivePeriodVO.getHippCaseSeqNumber()))
					{						
						if(tplHIPPCBAVO.getHippCaseStatus().equalsIgnoreCase("A") 
								&& tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("A"))
						{
							tplHIPPDataBean.setTplHIPPCBAVO(tplHIPPCBAVO);
							tplHIPPDataBean.setCalculateFlag(true);
						}
						else if(tplHIPPCBAVO.getHippCaseStatus().equalsIgnoreCase("D") 
								&& tplHIPPEffectivePeriodVO.getHippEffectiveStatus().equalsIgnoreCase("D"))
						{
							tplHIPPDataBean.setTplHIPPCBAVO(tplHIPPCBAVO);
						}
					}
				}
			}
			tplHIPPDataBean.setHippCaseSequenceNumber(tplHIPPEffectivePeriodVO.getHippCaseSeqNumber());
			tplHIPPDataBean.setCurrentRecord(recentRecord);
			tplHIPPDataBean.setRecentFlag(true);
		}
    }
    
    public String getDescFromCode(List validList, String code)
    {
        String shortDesc = "";
        if (validList != null)
        {
            Iterator validIterator = validList.iterator();
            SelectItem item = null;
            while (validIterator.hasNext())
            {
                item = (SelectItem) validIterator.next();
                if (item != null
                        && item.getValue() != null
                        && StringUtils.equalsIgnoreCase(code, item.getValue()
                                .toString()))
                {
                	if(item.getDescription()!=null){                		
                    shortDesc = item.getDescription();
                }
                	else{
                	shortDesc=item.getLabel();
                	}
                }
            }
        }
        return shortDesc;
    }    
    
    /**
     * This method is used to perform the IPC operation from CarrierDtails
     * Portlet to Financial Entity Portlet
     * 
     * @return String
     */
    public String goToFinancialDetailsPortlet()
    {
        final FacesContext facesContext = FacesContext.getCurrentInstance();
        final Map map = facesContext.getExternalContext()
                .getRequestParameterMap();
        final Map requestScope = (Map) facesContext.getApplication()
                .createValueBinding("#{requestScope}").getValue(facesContext);
        ActionRequest request = (ActionRequest) 
		FacesContext.getCurrentInstance().getExternalContext().getRequest();	  
        if (map != null && !map.isEmpty())
        {
            String payeeID = map.get("payeeID").toString();
            requestScope.remove("PayeeIDParam");
            if (StringUtils.isNotBlank(payeeID) && !"NULL".equalsIgnoreCase(payeeID))
            {
            	if(logger.isInfoEnabled()) {
	            	logger.info("in goToFinancialDetailsPortlet not MAP payeeID"+payeeID);

            	}

                //requestScope.put("PayeeIDParam", payeeID);
            	request.setAttribute("PayeeIDParam", payeeID);
            }
        }
        return "";
    }
    
    private Object getDataBean(String dataBeanName)
    {
    	FacesContext fc = FacesContext.getCurrentInstance();
        String valueBindingStr = TPLRecoveryCaseConstants.HASHBRACE + dataBeanName + TPLRecoveryCaseConstants.CLOSEBRACE;
        Object dataBeanObj = null;
        dataBeanObj = fc.getApplication().getVariableResolver().resolveVariable(fc,dataBeanName);
        if(dataBeanObj == null)
        {
        	dataBeanObj = fc.getApplication().createValueBinding(valueBindingStr).getValue(fc);
        }
        return dataBeanObj;
    }
    
    //private String loadReferenceData;
	/**
	 * @return Returns the loadReferenceData.
	 */
	public void getLoadReferenceData(TPLHIPPDataBean tplHIPPDataBean)
	{
		logger.debug("TPLHIPPControllerBean::getLoadRefernceData::START");
	  ReferenceServiceDelegate referenceServiceDelegate = new ReferenceServiceDelegate();
	  ReferenceDataSearchVO criteria = new ReferenceDataSearchVO();
	  ReferenceDataListVO dataList = null;
	  List tempList = new ArrayList();
	  TPLPolicyControllerBean policyControllerBean =  new TPLPolicyControllerBean();
	  policyControllerBean.populateValidValues();
      try 
	  {
	    tempList.add(getInputCriteria(ReferenceServiceDataConstants.B_ALT_ID_TY_CD,FunctionalAreaConstants.MEMBER));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.T_HIPP_STAT_CD,FunctionalAreaConstants.TPL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_CMN_ENTY_TY_CD,FunctionalAreaConstants.TPL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.P_ALT_ID_TY_CD_TPL,FunctionalAreaConstants.PROVIDER));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.T_HIPP_FREQ_TY_CD,FunctionalAreaConstants.TPL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.B_CURR_ALT_ID_TY_CD, FunctionalAreaConstants.MEMBER));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.B_COE_CD, FunctionalAreaConstants.MEMBER));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.R_LOB_CD, FunctionalAreaConstants.REFERENCE));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_ENTITY_ID_TYPE_26,FunctionalAreaConstants.TPL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_ENTITY_ID_TYPE_27,FunctionalAreaConstants.TPL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_ENTITY_ID_TYPE_28,FunctionalAreaConstants.TPL));
		//GLOBAL ACTION CHANGE
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_DEPT_WORK_UNIT_SK,FunctionalAreaConstants.GENERAL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_EDMS_DOC_TYPE_CD,FunctionalAreaConstants.GENERAL));
		tempList.add(getInputCriteria(ReferenceServiceDataConstants.G_WORK_UNIT_TY_CD,FunctionalAreaConstants.CONTACT_MGMT));
		//GLOBAL ACTION CHANGE
		HashMap map = null; 
		criteria.setInputList(tempList);
		dataList = referenceServiceDelegate.getReferenceData(criteria);
		if (dataList != null) 
		{
		   map = dataList.getResponseMap();
		   tplHIPPDataBean.setMemberIDTypeList(getValidData(map,
				ReferenceServiceDataConstants.B_ALT_ID_TY_CD, FunctionalAreaConstants.MEMBER));
		   tplHIPPDataBean.setHippStatusCodeList(getValidData(map, 
				ReferenceServiceDataConstants.T_HIPP_STAT_CD, FunctionalAreaConstants.TPL));
		   tplHIPPDataBean.setMemIdTypeList(getValidData(map,
				ReferenceServiceDataConstants.B_CURR_ALT_ID_TY_CD, FunctionalAreaConstants.MEMBER));				
		   tplHIPPDataBean.setEntityTypeList(getValidData(map,
				ReferenceServiceDataConstants.G_CMN_ENTY_TY_CD, FunctionalAreaConstants.TPL));
		   tplHIPPDataBean.setProviderIDList(getValidData(map,
				ReferenceServiceDataConstants.P_ALT_ID_TY_CD_TPL, FunctionalAreaConstants.PROVIDER));
		   tplHIPPDataBean.setFrequencyList(getValidData(map,
				ReferenceServiceDataConstants.T_HIPP_FREQ_TY_CD, FunctionalAreaConstants.TPL));
		   tplHIPPDataBean.setCoeCodeList(getValidData(map,
				ReferenceServiceDataConstants.B_COE_CD,	FunctionalAreaConstants.MEMBER));
		   tplHIPPDataBean.setLobCodeList(getValidData(map,
				ReferenceServiceDataConstants.R_LOB_CD,	FunctionalAreaConstants.REFERENCE));
		   tplHIPPDataBean.setCarrierIdTypeList(getValidData(map,
				ReferenceServiceDataConstants.G_ENTITY_ID_TYPE_27, FunctionalAreaConstants.TPL));
		   tplHIPPDataBean.setPolicyHolderIdTypeList(getValidData(map,
				ReferenceServiceDataConstants.G_ENTITY_ID_TYPE_28, FunctionalAreaConstants.TPL));
		   tplHIPPDataBean.setEmployerIDTypeList(getValidData(map,
				ReferenceServiceDataConstants.G_ENTITY_ID_TYPE_26, FunctionalAreaConstants.TPL));
		   //GLOBAL ACTION CHANGE
		   tplHIPPDataBean.setEdmsWrkUnitLevelList(getValidData(map,
					ReferenceServiceDataConstants.G_DEPT_WORK_UNIT_SK, FunctionalAreaConstants.GENERAL));
		   tplHIPPDataBean.setEdmsDocTypeList(getValidData(map,
					ReferenceServiceDataConstants.G_EDMS_DOC_TYPE_CD, FunctionalAreaConstants.GENERAL));
		   getRoutingDataBean().setRefListOfWorkUnitTypes(getValidData(map,
					ReferenceServiceDataConstants.G_WORK_UNIT_TY_CD, FunctionalAreaConstants.CONTACT_MGMT));
		   //GLOBAL ACTION CHANGE
		   // tplHIPPDataBean.setSystemListFlag(false);
			if(tplHIPPDataBean.getTplHIPPCaseVO()!=null)
			{
			  if (tplHIPPDataBean.getTplHIPPCaseVO().getCaseEndDate()==null)
			  {
				 tplHIPPDataBean.getTplHIPPCaseVO().setCaseEndDate("12/31/9999");
			  }
			  if (StringUtils.isEmpty(tplHIPPDataBean.getTplHIPPCaseVO().getHippCaseStatus()))
			  {
				 tplHIPPDataBean.getTplHIPPCaseVO().setHippCaseStatus("P");
			  }
			}
		  }
		} catch (SystemListNotFoundException se) {
			logger.debug(se);
		} catch (Exception ex) {
			logger.debug(ex);
		}
		//return loadReferenceData;
    }
	/**
	 * @param loadReferenceData The loadReferenceData to set.
	 */
	/*public void setLoadReferenceData(String loadReferenceData) {
		this.loadReferenceData = loadReferenceData;
	}*/
	
	
	private final List getValidData(Map map, String referenceDataConstant, String functionalArea) {
		List validList = new ArrayList(10);
		if (map != null) {
			List validValuesList = (List) map.get(functionalArea + "#"+ referenceDataConstant);
			int validValuesListSize = validValuesList.size();
			for (int i = 0; i < validValuesListSize; i++) {
				ReferenceServiceVO refVo = (ReferenceServiceVO) validValuesList.get(i);
				validList.add(new SelectItem(refVo.getValidValueCode(), refVo
						.getValidValueCode()+ "-" + refVo.getShortDescription(), refVo
						.getShortDescription()));
			}
		}
		return validList;
	}
	
	/**
	 * This method sets input criteria for reference service.
	 * 
	 * @param referenceDataConstant
	 *            Reference Data Constant used.
	 * @param functionalArea
	 *            Functional Area Code used.
	 * @return InputCriteria Input Criteria used.
	 */
	private final InputCriteria getInputCriteria(String referenceDataConstant, String functionalArea) {
		InputCriteria inputCriteria = new InputCriteria();
		inputCriteria.setFunctionalArea(functionalArea);
		inputCriteria.setElementName(referenceDataConstant);
		return inputCriteria;
	}
	
	//private String loadReferenceDataForSearch;
	/**
	 * @return Returns the loadReferenceDataForSearch.
	 */
	public void getLoadReferenceDataForSearch()
	{
		logger.info("TPLHIPPControllerBean::getLoadReferenceDataForSearch::BEGIN");
		ReferenceServiceDelegate referenceServiceDelegate = new ReferenceServiceDelegate();
		ReferenceDataSearchVO criteria = new ReferenceDataSearchVO();
		ReferenceDataListVO dataList = null;//Find Bug Fix
		// Temporary list used in loading of drop down values.
		List tempList = new ArrayList();
		try {
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.T_MEM_TAB_CD,	FunctionalAreaConstants.TPL));
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.T_HIPP_CASE_TAB_CD,FunctionalAreaConstants.TPL));		
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.T_HIPP_PLYHLDR_TAB_CD, FunctionalAreaConstants.TPL));
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.T_CARR_TAB_CD, FunctionalAreaConstants.TPL));
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.T_CARR_WKR_TAB_CD, FunctionalAreaConstants.TPL));
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.T_HIPP_STAT_CD, FunctionalAreaConstants.TPL));
			tempList.add(getInputCriteria(
					ReferenceServiceDataConstants.B_ALT_ID_TY_CD, FunctionalAreaConstants.MEMBER));		
			
			HashMap map = null;
			criteria.setInputList(tempList);
			dataList = referenceServiceDelegate.getReferenceData(criteria);
			if (dataList != null) {
				map = dataList.getResponseMap();
				TPLHIPPSearchDataBean tplHIPPSearchDataBean=TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
				tplHIPPSearchDataBean.setSearchByList(getValidData(map,
						ReferenceServiceDataConstants.T_MEM_TAB_CD,FunctionalAreaConstants.TPL));						
				tplHIPPSearchDataBean.setHippCaseNumberList(getValidData(map,
						ReferenceServiceDataConstants.T_HIPP_CASE_TAB_CD, FunctionalAreaConstants.TPL));
				tplHIPPSearchDataBean.setPolicyHolderList(getValidData(map,
						ReferenceServiceDataConstants.T_HIPP_PLYHLDR_TAB_CD,FunctionalAreaConstants.TPL));
				tplHIPPSearchDataBean.setCarrierList(getValidData(map,
						ReferenceServiceDataConstants.T_CARR_TAB_CD,FunctionalAreaConstants.TPL));
				tplHIPPSearchDataBean.setWorkerList(getValidData(map,
						ReferenceServiceDataConstants.T_CARR_WKR_TAB_CD, FunctionalAreaConstants.TPL));
				tplHIPPSearchDataBean.setHippStatusCodeList(getValidData(map,
						ReferenceServiceDataConstants.T_HIPP_STAT_CD, FunctionalAreaConstants.TPL));
				tplHIPPSearchDataBean.setMemberIDTypeList(getValidData(map,
						ReferenceServiceDataConstants.B_ALT_ID_TY_CD, FunctionalAreaConstants.MEMBER));
				//tplHIPPSearchDataBean.setSystemListFlag(false);
			}
		} catch (SystemListNotFoundException se) {
			logger.debug(se);
		} catch (Exception ex) {
			logger.debug(ex);
		} 
		//return loadReferenceDataForSearch;
	}
	/**
	 * @param loadReferenceDataForSearch The loadReferenceDataForSearch to set.
	 */
	/*public void setLoadReferenceDataForSearch(String loadReferenceDataForSearch) {
		this.loadReferenceDataForSearch = loadReferenceDataForSearch;
	}*/
	
	public TPLAttachmentDataBean getTPLAttachmentDataBean() 
	{
		FacesContext facesContext = FacesContext.getCurrentInstance();
		TPLAttachmentDataBean attachmentDataBean = (TPLAttachmentDataBean)facesContext.getApplication().
		getVariableResolver().resolveVariable(facesContext, TPLAttachmentDataBean.BEAN_NAME);		
		if (attachmentDataBean == null){
			attachmentDataBean = (TPLAttachmentDataBean) facesContext
				.getApplication().createValueBinding("#{" + TPLAttachmentDataBean.BEAN_NAME + "}")
				.getValue(facesContext);
		}		
		
		return attachmentDataBean;
	}
	
	/**
     * author:: Yashwanth K
     * @return
     */
    public String doAuditKeyListOperation()
    {
    	logger.debug("inside doAuditKeyListOperation");
    	TPLHIPPDataBean hippdatabean=TPLHIPPConversionHelper.getTPLHIPPDataBean();
    	hippdatabean.setAuditLogFlag(true);
    	hippdatabean.setAuditLogFlagforpolicy(true);
    	try
		{
    		// For hipp case main
    		List editableHippCase = new ArrayList();
    		editableHippCase.add(createAuditableFeild("HIPP Case Status","statusCode"));
    		editableHippCase.add(createAuditableFeild("Case Begin Date","coverageBeginDate"));
    		editableHippCase.add(createAuditableFeild("Case End Date","coverageEndDate"));
    		editableHippCase.add(createAuditableFeild("Worker ID Assigned","responsibleUserID"));
    		editableHippCase.add(createAuditableFeild("Cobra Indicator","cobraIndicator"));
    		editableHippCase.add(createAuditableFeild("Cobra Date","cobraDate"));
    		editableHippCase.add(createAuditableFeild("39 Week Ext Indicator","hipp39WeekExtInd"));
    		editableHippCase.add(createAuditableFeild("39 Week Ext Date","hipp39WeekExtDate"));
    		
    		TPLHIPPCaseVO caseVO = hippdatabean.getTplHIPPCaseVO();
    		
    		if(caseVO.getAuditKeyList() != null && !caseVO.getAuditKeyList().isEmpty())
    		{
    			AuditDataFilter.filterAuditKeys(editableHippCase, caseVO);
    		}
    		// For hipp payment main
    		List editableHippPayment = new ArrayList();
    		editableHippPayment.add(createAuditableFeild("Authorization Required","authRequiredInd"));
    		editableHippPayment.add(createAuditableFeild("Authorized","authInd"));
    		editableHippPayment.add(createAuditableFeild("Additional Disbursement Amount","additionalAmount"));
    		editableHippPayment.add(createAuditableFeild("Additional Disbursement Begin Date","additionalBeginDate"));
    		editableHippPayment.add(createAuditableFeild("Additional Disbursement End Date","additionalEndDate"));
    		editableHippPayment.add(createAuditableFeild("Premium Begin Date","premBeginDate"));
    		editableHippPayment.add(createAuditableFeild("Premium End Date","premEndDate"));
    		editableHippPayment.add(createAuditableFeild("Premium Amount","premAmount"));
    		editableHippPayment.add(createAuditableFeild("Frequency","frequency"));
    		
    		TPLHIPPPaymentInfoVO paymentInfoVO = hippdatabean.getTplHIPPPaymentInfoVO();
    		
    		if(paymentInfoVO.getAuditKeyList() != null && !paymentInfoVO.getAuditKeyList().isEmpty())
    		{
    			AuditDataFilter.filterAuditKeys(editableHippPayment, paymentInfoVO);
    			caseVO.getAuditKeyList().addAll(paymentInfoVO.getAuditKeyList());
    		}
    		
    		//Added code for the Defect ESPRD00807075
    		if(caseVO.getAuditKeyList() != null && !caseVO.getAuditKeyList().isEmpty())
    		{
    			UIComponent component = TPLAdministrationHelper.findComponentInRoot("mainAuditlogId");
    			if(component!=null){
    				AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component;	
    				logger.debug("caseVO.getAuditKeyList()=========ALL"+caseVO.getAuditKeyList().size());        			
    				auditHistoryTable.setValue(caseVO.getAuditKeyList());			
    				auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false); 
    			}
    			else{
    				logger.debug("======carrierVO====Before Filter Empty===");
    			}	
    		}
    		
    		// calling policy related audit information
    		/*TPLPolicyControllerBean policyController =  new TPLPolicyControllerBean();
    		policyController.doAuditKeyListPolicy();
    		
    		PolicyVO policyVO = getTPLPolicyDataBean().getPolicyVO();
    		
    		if(policyVO.getAuditKeyList() != null && !policyVO.getAuditKeyList().isEmpty())
    		{    			
    			caseVO.getAuditKeyList().addAll(policyVO.getAuditKeyList());
    		}*/
    		//System.out.println("AuditKeyList 2-->"+caseVO.getAuditKeyList().size());
    		//For Letters
    		//ESPRD00795036 - Commented and moved to LetterAndResponseControllerBean
    		/*LettersAndResponsesDataBean lettersAndResponsesDataBean=getLettersDataBeanFromContext();
    		List lettersList= lettersAndResponsesDataBean.getLetterGenerationRequests();
    		if(lettersList!=null && lettersList.size()>0)
    		{
    		 	Iterator auditKeyIt = lettersList.iterator();
	    		 	List editableLetters = new ArrayList();
	    		 	editableLetters.add(createAuditableFeild("Notify via Alert","notifyAlertUser"));
	    		 	editableLetters.add(createAuditableFeild("Alert Based On","alertBasedOnTableName"));
	    		 	editableLetters.add(createAuditableFeild("Send Alert # of Days","sendAlertDaysCode"));
	    		 	editableLetters.add(createAuditableFeild("Explanation","explanationText"));
	    		 	while(auditKeyIt.hasNext()){
	    		 		LetterGenerationInputVO  letterGenerationInputVO = (LetterGenerationInputVO)auditKeyIt.next();
	    		 		if(letterGenerationInputVO.getAuditKeyList()!=null && !(letterGenerationInputVO.getAuditKeyList().isEmpty())){
	    		 			AuditDataFilter.filterAuditKeys(editableLetters,letterGenerationInputVO);
	    		 		}
	    		 		String letersindex = lettersAndResponsesDataBean.getSelectedIndex();
	    		 		if(letersindex!=null && letersindex.trim().length()>0){
	    		 			lettersAndResponsesDataBean.setLetterGenerationInputVO((LetterGenerationInputVO)lettersList.get(Integer.parseInt(letersindex)));
	    		 	}
    		 	}
    		 }	
    		 UIComponent component = TPLAdministrationHelper.findComponentInRoot("mainAuditlogId");
			if(component!=null){
				AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component;	 					
				auditHistoryTable.setValue(caseVO.getAuditKeyList());
				auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false); 
			}*/
		}
    	catch(Exception e)
		{
				logError("Exception in doAuditKeyListOperation ",e);
    	}
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
    //	return SUCCESS;
		return "Success";
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

    }
	
	/**
	 * author:: Yashwanth K
	 * @param feildName
	 * @param domainAttributeName
	 * @return
	 */
	private AuditableField createAuditableFeild(String feildName,String domainAttributeName)
	{
	//	logger.info("Inside createAuditableFeild");
	
		AuditableField auditableField = new AuditableField();
		auditableField.setFieldName(feildName);
		auditableField.setDomainAttributeName(domainAttributeName);
		return auditableField;
	
	}
	
	/**
	 * This operation is used to find the component in root by passing id.
	 * 
	 * @param id :
	 *            String object.
	 * @return UIComponent : UIComponent object.
	 */
	public UIComponent findComponentInRoot(String id)
	{
	 //   logger.info("findComponentInRoot");
	    UIComponent component = null;
	    FacesContext context = FacesContext.getCurrentInstance();
	
	    if (context != null)
	    {
	        UIComponent root = context.getViewRoot();
	        component = findComponent(root, id);
	    }
	    return component;
	}
	
	/**
	 * This operation is used to find the component by passing id.
	 * 
	 * @param base :
	 *            View root component of the jsp.
	 * @param id :
	 *            Id of the component from jsp.
	 * @return UIComponent object.
	 */
	public UIComponent findComponent(UIComponent base, String id)
	{
	    // Is the "base" component itself the match we are looking for?
	    if (id.equals(base.getId()))
	    {
	        return base;
	    }
	
	    // Search through our facets and children
	    UIComponent component = null;
	    UIComponent result = null;
	    Iterator cmpIterator = base.getFacetsAndChildren();
	
	    while (cmpIterator.hasNext() && (result == null))
	    {
	        component = (UIComponent) cmpIterator.next();
	        if (id.equals(component.getId()))
	        {
	            result = component;
	            break;
	        }
	        result = findComponent(component, id);
	        if (result != null)
	        {
	            break;
	        }
	    }
	    return result;
	}
	/**
     * This method Opens the MaintainEntity Page from Search Corres Entity.
     */
    public void addEntityFromHIPPInformation()
    {
       // FacesContext fc = FacesContext.getCurrentInstance();
       // String fromPageName = "TPLHIPP";

        //fc.getExternalContext().getRequestMap().put("MaintainEntity","TPLHIPP");
        ActionRequest request = (ActionRequest) 
		FacesContext.getCurrentInstance().getExternalContext().getRequest();	 
        request.setAttribute("MaintainEntity","TPLHIPP");
       /* logger.debug("value in req map  for frompagename - "
                + fc.getExternalContext().getRequestMap().get("MaintainEntity").toString());*/
       
    }
    
    /**
     * This method is used to send the IPC details to the EDMS
     * 
     * @return String
     */
    public String openDocumentRepository()
    {
    	logger.debug(" Inside openDocumentRepository ");
    	TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
    	/* Small save Big Save start */
    	hippDataBean.setRenderHIPPAttachment(false);  	
    	/*Small save Big Save end*/
        
        EnterpriseEDMSSearchCriteriaVO edmsSearchCriteiaVo = new EnterpriseEDMSSearchCriteriaVO();        
        edmsSearchCriteiaVo.setModuleName("TPLt");
        edmsSearchCriteiaVo.setFuncAreaCode("T1");
        edmsSearchCriteiaVo.setActionParameterName("sendEDMSSearchiCriteriaAction");

        /* Implementation of defect ESPRD00436796 */
        ActionRequest request = (ActionRequest) 
				FacesContext.getCurrentInstance().getExternalContext().getRequest();        
        request.setAttribute("EDMSSearchCriteria", edmsSearchCriteiaVo); 
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
      //  hippDataBean.setCurrentPageId(TPL_HIPP_ATTCHMENT_FOCUS);
	     /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		hippDataBean.setCurrentPageId(TPL_HIPP_ATTACHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
  		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

        return "";
    }
    /**
     * This method is used to perform cancel operation for Carrier attachments 
     * 
     * @return String
     */
    public String cancelAttachments()
    {
    	TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
    	/* Small save Big Save start */
    	hippDataBean.setShowEditAttachments(false);
    	hippDataBean.setRenderHIPPAttachment(false);  
    	hippDataBean.setAttachmentSuccessMessage(false);
    	
    	hippDataBean.setShowTPLHIPPAttachmentMessages(false);
    	
    	hippDataBean.setEdmswrkflg(false);
    	hippDataBean.setEdmstypf(false);
    	hippDataBean.setAttFile(false);
    	hippDataBean.setAttDes(false);
    	
    	/*Small save Big Save end*/
        
        if (hippDataBean.isShowAddAttachments())
        {
        	hippDataBean.setShowAddAttachments(false);
        }
        if (hippDataBean.isShowEditAttachments())
        {
        	hippDataBean.setShowEditAttachments(false);
        }
        return TPLAdministrationConstants.SUCCESS;
    }
    /**
     * This Method is used to View the Attachment details in EDIT (or) UPDATE
     * JSP whenever the user clicks on the row in a Span in JSP.
     * 
     * @return String
     */
    public String viewAttachments()
    {
    	TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
    	hippDataBean.setRenderHIPPAttachment(true);
    	hippDataBean.setShowTPLHIPPAttachmentMessages(false);
    	//createValidValuesForAttachment();
    	FacesContext facesContext = FacesContext.getCurrentInstance();
    	String rowValue = (String) facesContext.getExternalContext().getRequestParameterMap().get(ROW_INDEX);
    	Integer rowIndex = new Integer(rowValue);
        int attchIndex = rowIndex.intValue();
       
        hippDataBean.setAttachmentIndex(rowValue);
        AttachmentsVO attach = null;
        AttachmentsVO tempAttachment = new AttachmentsVO();
        attach = (AttachmentsVO) hippDataBean.getAttachmentVOList().get(attchIndex);
       
        try
        {
            BeanUtils.copyProperties(tempAttachment, attach);
            //          Infinite Defect Implementation
            //hippDataBean.getAttachmentsVO().setAuditKeyList(tempAttachment.getAuditKeyList());
            if (tempAttachment.isDetachFlag())
            {
            	hippDataBean.setDetachFlag(true);
            }
            else
            {
            	hippDataBean.setDetachFlag(false);
            }
            /*UIComponent component = TPLAdministrationHelper.findComponentInRoot("carrierAttachmentAuditlogId");
           	if(component!=null)
           	{
	           	AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component ;
	           	auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false);	
           	}*/
           	List editableAttachment = new ArrayList();
   		 	editableAttachment.add(createAuditableFeild("Description","attachmentDescription"));
   		    editableAttachment.add(createAuditableFeild("Date Added","attachmentCreatedDate"));
   		    editableAttachment.add(createAuditableFeild("Added By","attachmentAddedByName"));
   		    editableAttachment.add(createAuditableFeild("File Name","attachmentFileName"));   
   		
   		 	if(tempAttachment.getAuditKeyList() != null && 
   		 		!tempAttachment.getAuditKeyList().isEmpty())
   		 	{
   		 		AuditDataFilter.filterAuditKeys(editableAttachment, tempAttachment);
   		 	}
			UIComponent component = TPLAdministrationHelper.findComponentInRoot("AttachementsAuditId");
			if(component!=null)
			{	
				AuditHistoryTable auditHistoryTable = (AuditHistoryTable)component;	 					
				auditHistoryTable.setValue(tempAttachment.getAuditKeyList());
				auditHistoryTable.getAuditLogControllerBean().setPlusMinusFlag(false); 
			}
			// Defect ESPRD00807660 : Set the focus
			hippDataBean.setCurrentPageId(TPL_HIPP_ATTCHMENT_FOCUS);
        }
        catch (IllegalAccessException e)
        {
				logError("IllegalAccessException in viewAttachments ",e);
        }
        catch (InvocationTargetException e)
        {
				logError("InvocationTargetException in viewAttachments ",e);
        }
        catch(Exception e)
		{
				logError("Exception in viewAttachments ",e);
		}
        /*if (hippDataBean.isShowAddAttachments())
        {
        	tempAttachment.setAttachAuditTimeStampStr( new Date().toString());
        }*/
        hippDataBean.setAttachmentsVO(tempAttachment);
        
        hippDataBean.setShowEditAttachments(true);
        hippDataBean.setShowAddAttachments(false);
        
        hippDataBean.setShowTPLHIPPAttachmentMessages(false);
		//doAuditKeyListOperationForCarrierAttachment();
        return TPLAdministrationConstants.SUCCESS;
    }
    
    /**
	 * This method is used to save the Attachment information
	 * 
	 * @return String
	 */

	public String uploadFile() 
	{
		
		/* Added as part of P1 PMD violatiom */
		final String EXCEPTION_UPLOAD_FILE ="Exception in TPLHIPPControllerBean.uploadFile()";
		TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	//	hippDataBean.setCurrentPageId(TPL_HIPP_ATTCHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		hippDataBean.setCurrentPageId(TPL_HIPP_ATTACHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		String msg = "";
		AttachmentsVO attachment = hippDataBean.getAttachmentsVO();
		if (getFileupload1() != null && getFileupload1().getFilename() != null
				&& !getFileupload1().getFilename().equals("")
				&& getFileupload1().getFilename().length() != 0) {
			attachment.setFileName(getFileupload1().getFilename());
		}
		hippDataBean.setEdmswrkflg(false);
		hippDataBean.setEdmstypf(false);
		hippDataBean.setAttFile(false);
		hippDataBean.setAttDes(false);
		hippDataBean.setShowTPLHIPPAttachmentMessages(false);
		if (requiredFldsAvbl(attachment)) 
		{
			//adede code for the CR
    		attachment.getAddedBy();
    		if(logger.isDebugEnabled()) {
	    		logger.debug("EdmsDocType -: " + attachment.getEdmsDocType());
	    		logger.debug("EdmsWrkUnitLevel -: " + attachment.getEdmsWrkUnitLevel());
	    		logger.debug("getAddedBy -: " + getUserID());

    		}

    		EDMSQuickSearchProcessDelegate edmsQuickSearchProcessDelegate = null;
    		try {
    			edmsQuickSearchProcessDelegate = new EDMSQuickSearchProcessDelegate();
    		} catch (EDMSQuickSearchBusinessException e1) {
    			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
    			if(logger.isErrorEnabled()){
    				logger.error("EDMSQuickSearchBusinessException in uploadFile ",e1);
    			}
    			/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
    		}
    		String status = null;
    		if (attachment.getEdmsDocType() != null
    				&& attachment.getEdmsWrkUnitLevel() != null
    				&& getUserID() != null) {
    			try {
    				status = edmsQuickSearchProcessDelegate.getEDMSPrivilegeQuery(
    						getUserID(), attachment.getEdmsDocType(), attachment
    						.getEdmsWrkUnitLevel());
    			} catch (EDMSQuickSearchBusinessException e) {
    				logger.debug("Exception -: While getting user privilege status");
    				 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
    				if(logger.isErrorEnabled()){
    					logger.error("EDMSQuickSearchBusinessException While getting user privilege status ",e);
    				}
    				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
    			}
    		}
    		if(logger.isDebugEnabled()) {
	    		logger.debug("status after delegate call = " + status);

    		}

    		if (status != null) 
    		{
    			if (status.equals("1")) 
    			{
    				logger.debug("User Privileged to UPLOAD Attachment");
			//
		  try 
		  {
			 String uploadFilePath = null;
			 String description = null;
 			 HtmlFileupload file = null;

			if (hippDataBean.isShowAddAttachments()) 
			{
			  file = getFileupload1();
			  if (file != null) 
			  {
				 String fileName = file.getFilename();
				 String mineType = file.getMimetype();
				 ContentElement newFile = (ContentElement) file.getValue();
				 if (newFile != null) 
				 {
					FacesContext fct = FacesContext.getCurrentInstance();
					fct.getApplication().setMessageBundle(
						  "com.acs.enterprise.mmis.operations.tpladministration.view.nl.OPR_TPL_CommonAttachment");
					ResourceBundle bundle = TPLContactManagementHelper.resourceBundle(fct);
					//CR ESPRD00800460
					/*String extension = bundle.getString("acceptable.attach.files");
					String[] totalExt = null;*/
					String fileExtension = null;
					if (fileName != null && !(fileName.equalsIgnoreCase(""))) 
					{
					   int index = fileName.lastIndexOf(".");
					   if (index != -1) 
					   {
						  fileExtension = fileName.substring(index + 1, fileName.length());
					   } else {
							   fileExtension = "";
					   }
					}
					SystemListDelegate systemListDelegate = new SystemListDelegate();
					boolean validFile = true;
					List systemList = systemListDelegate.getSystemListDtlStrtVal(
					 						Long.valueOf("183") ,"G1");
					
					if(null!=systemList && !systemList.isEmpty() 
					 			&& systemList.contains(fileExtension))
					{
					   	validFile = false;
					   	if(logger.isInfoEnabled()) {
						   	logger.info("invaid file selecte"+fileExtension);

					   	}

					}
					/*if ((extension != null) && !(extension.equalsIgnoreCase(""))) 
					 {
						totalExt = extension.split(",");
					 }
					 boolean validFile = false;
					if ((totalExt != null) && (totalExt.length > 0)) 
					{
					   for (int i = 0; i < totalExt.length && !(validFile); i++) 
					   {
						 if (fileExtension != null && !(fileExtension.equalsIgnoreCase(""))
											&& fileExtension.equalsIgnoreCase(totalExt[i])) 
						  {
							  validFile = true;
					  	  }
					    }
					 }*/
					 if (validFile) 
					 {
						byte[] byteArray = newFile.getContentValue();
								
						if (byteArray != null && byteArray.length > 0) 
						{
					 	  int maxSizeInMB = 0;
						  String maxSize = bundle.getString("acceptable.attach.file.size");

 						  if ((maxSize != null)&& !(maxSize.equalsIgnoreCase(""))) {
								   maxSizeInMB = Integer.parseInt(maxSize);
						   }

						 if (byteArray.length <= (maxSizeInMB * (Integer
									.parseInt(TPLMaintainContactManagementUIConstants.MAX_ONE_MB_SIZE)))) 
						  {
							if (attachment != null) 
							{
							  String filepath = attachment.getFileName();
							  int scanResult;
							  boolean totalSizeCheck = false;
							  //newly added
							  totalSizeCheck = checkTotalSizeOfAttachedFiles(attachment,	maxSizeInMB,
													hippDataBean.getAttachmentVOList());
							  if (!totalSizeCheck) 
							  {
								String errorMsg="";
								boolean skipScan = true;
								String strSkipScan = null;
								try 
								{
								  /** Holds the initial Context */
								  InitialContext initialContext = new InitialContext();
								 /** skipScan variable should configured in Server thru JNDI */
								  strSkipScan = (String) initialContext
								  				.lookup(TPLMaintainContactManagementUIConstants.SKIP_SCAN);
								} catch (Exception e) {
								// MT Platform Code Merge (Merge 1 - Iteration1) Starts        

									 if(logger.isDebugEnabled()) {
										 logger.debug("########FacesGenericPortletr#######"+ e.getMessage());

									 }

									 /* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
										if(logger.isErrorEnabled()){
											logger.error("Exception in uploadFile ",e);
										}
									/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
									// MT Platform Code Merge (Merge 1 - Iteration1) Starts        

								}

							// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
							//	if ((strSkipScan != null) && (strSkipScan.equalsIgnoreCase(FALSE))) {
								/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
								if ((strSkipScan != null) && (strSkipScan.equalsIgnoreCase(FALSE_STR))) {
							
									skipScan = false;
								}
								/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
								// MT Platform Code Merge (Merge 1 - Iteration1) ends        

								scanResult = VirusScanUtility
											.scanFileBeforeUpload(byteArray,fileName,skipScan);
									
								if (scanResult == 0) 
								{
								  description = attachment.getDescription();
								  Date atdate = new Date();
								  Format formatter = new SimpleDateFormat("MM/dd/yyyy  hh:mm a");
								  String attachDate = formatter.format(atdate);
								  attachment.setDateAdded(attachDate);
								  attachment.setFile1(byteArray);
								  attachment.setAddedBy(getUserID());
								  String fileSeparator = "\\"; 
								  fileName = fileName.substring(
											fileName.lastIndexOf(fileSeparator) + 1, fileName.length());
								  String actualFileName = fileName.substring(0, fileName.lastIndexOf("."));
								  String finalFileName = actualFileName+ "."+ fileExtension;
								  attachment.setFileName(finalFileName);
								  //for local save: remove when checking in
								  String finalPathToWPS = writeToSan(byteArray,finalFileName);
								  attachment.setFinalPath(finalPathToWPS);
								  /** Updating Cascade Key that EDMS uses to save
								    *  attachments into Document Management Systems.
								    */
										 
								  String cascadeOne = getSystemParameter(ContactManagementConstants.CASCADE_ONE_CODE);
								  String cascadeThree = getSystemParameter(ContactManagementConstants.CASCADE_THREE_CODE);
								  if ((cascadeOne == null || cascadeOne.length() == 0)) {
									   cascadeOne = "ACS_NH";
								  }
								  if (cascadeThree == null || cascadeThree.length() == 0) {
 									  cascadeThree = "UPLOAD";
  								  }
								  //Set the Cascade Key for the attachments
								  StringBuffer cascadeBuffer = new StringBuffer();
								  /*
								   * added frwrdSlashChar as part of PMD p1 violation
								   */
								   // MT Platform Code Merge (Merge 1 - Iteration1) Starts        
								 /* String frwrdSlashChar = "/";
								  cascadeBuffer.append(cascadeOne).append(frwrdSlashChar)
											   .append(attachment.getEdmsWrkUnitLevel())
											   .append(frwrdSlashChar).append(cascadeThree)
											   .append(frwrdSlashChar).append(attachment.getEdmsDocType());*/
								   /* PMD Violations - P1 Fix - AppendCharacterWithChar -- Changed By 424467 Starts */
								  cascadeBuffer.append(cascadeOne).append('/')
											   .append(attachment.getEdmsWrkUnitLevel())
											   .append('/').append(cascadeThree)
											   .append('/').append(attachment.getEdmsDocType());
								  /* PMD Violations - P1 Fix - AppendCharacterWithChar -- Changed By 424467 Ends */
									// MT Platform Code Merge (Merge 1 - Iteration1) ends        

								  String cascadeKey = cascadeBuffer.toString();
								  hippDataBean.getAttachmentVOList().add(attachment);
								  Integer index =Integer.valueOf(hippDataBean.getAttachmentVOList().size() - 1);
								  hippDataBean.setAttachmentIndex(index.toString());
								}
								else if (scanResult == -1) 
								{
								   errorMsg = bundle.getString(TPLMaintainContactManagementUIConstants.ERR_FILE_VIRUS_FOUND);
								} else {
									errorMsg = bundle.getString(
											   TPLMaintainContactManagementUIConstants.ERR_FILE_SCAN);
								}
								FacesMessage fc = new FacesMessage(errorMsg);
								String clientId = null;
								UIComponent uiComponent = TPLContactManagementHelper
												.findComponentInRoot("fileupload1");
								if (uiComponent != null) {
									clientId = uiComponent.getClientId(fct);
								}
								fct.addMessage(clientId, fc);
								hippDataBean.setShowTPLHIPPAttachmentMessages(true);
								hippDataBean.setShowUnSucessMessage(false);//aaaaaaaaaaaaa
								//hippDataBean.setShowAddAttachments(false);
								//hippDataBean.setShowEditAttachments(true);
								hippDataBean.setAttachmentsVO(new AttachmentsVO());
							 } else {
								  TPLContactManagementHelper.setErrorMessage(
											TPLMaintainContactManagementUIConstants.ATTACH_MESSAGE);
							 }
						   }
						 } else{
								TPLContactManagementHelper.setErrorMessage(
										TPLMaintainContactManagementUIConstants.INVALID_FILE_SIZE,
										TPLMaintainContactManagementUIConstants.ATTACH_UPLOAD_ID,
										null, null);
						 }
					  } else {
						 	  TPLContactManagementHelper.setErrorMessage(
										TPLMaintainContactManagementUIConstants.CASE_ATTACHED_FILE_SIZE_ZERO,
										TPLMaintainContactManagementUIConstants.ATTACH_UPLOAD_ID,
										null, null);
						}

					} else {
							TPLContactManagementHelper.setErrorMessage(
										TPLMaintainContactManagementUIConstants.INVALID_FILE_TYPE,
										TPLMaintainContactManagementUIConstants.ATTACH_UPLOAD_ID,
										null, null);
					  }
					} else {
							TPLContactManagementHelper.setErrorMessage(
									TPLMaintainContactManagementUIConstants.ATTACH_MESSAGE,
									TPLMaintainContactManagementUIConstants.ATTACH_UPLOAD_ID,
									null, null);
						}
					}
				} else if (hippDataBean.isShowEditAttachments()) {

					AttachmentsVO tempAttachVO = hippDataBean.getAttachmentsVO();
					int editAttachmentIndex = new Integer(hippDataBean.getAttachmentIndex()).intValue();
					hippDataBean.getAttachmentVOList().remove(editAttachmentIndex);
					hippDataBean.getAttachmentVOList().add(editAttachmentIndex, tempAttachVO);
					hippDataBean.getAttachmentVOList().remove(hippDataBean.getAttachmentIndex() + 1);
					TPLContactManagementHelper
							.setErrorMessage(TPLMaintainContactManagementUIConstants.SAVE_SUCCESS_MSG,
							 null, null, null);
					hippDataBean.setShowTPLHIPPAttachmentMessages(true);
				}

			} catch (EnterpriseBaseBusinessException e) {
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			//	logger.error(EXCEPTION_UPLOAD_FILE, e);    
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
				if(logger.isErrorEnabled()){
					logger.error("EnterpriseBaseBusinessException in uploadFile ",e);
				}
				if(logger.isDebugEnabled()) {
					logger.debug("Exception while uploading Attachments" + e);

				}
			}
			catch (IOException e) {
			//	logger.error(EXCEPTION_UPLOAD_FILE, e);    
				if(logger.isErrorEnabled()){
					logger.error("IOException in uploadFile ",e);
				}
				/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
				if(logger.isDebugEnabled()) {
					logger.debug("Exception while uploading Attachments" + e);

				}
				// MT Platform Code Merge (Merge 1 - Iteration1) ends        

			}
			//ESPRD00349838
			msg = TPLMaintainContactManagementUIConstants.SUCCESS;
			//ESPRD00349838
		} 		
    			else if (status.equals("0")) {
    				logger.debug("abc User Not Privileged to UPLOAD attachment");
    				hippDataBean.setShowUnSucessMessage(true);
    				hippDataBean.setShowTPLHIPPAttachmentMessages(false);
    				msg = "";
    			} else if (status.equals("CI")) {
    				logger.debug("12 Docfinity server is DOWN.. Try after some time...");
    				msg = "";
    			}
    		} else {
    			hippDataBean.setShowUnSucessMessage(true);
    			hippDataBean.setShowTPLHIPPAttachmentMessages(false);
    			logger.debug("#### status IS NULL ###");
    		}
		}	
		return msg;
	}	
	
	/**
	 * Reqired filed validation for add attachment
	 * @param attachment
	 * @return
	 */
	private boolean requiredFldsAvbl(AttachmentsVO attachment)
	{
		
        boolean fldsAvbl = true;
       
        TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
        
        if (isNullOrEmptyField(attachment.getDescription()))
        {
        	if (hippDataBean.isShowAddAttachments()==true){
	            fldsAvbl = false;
	            setErrorMessage(TPLAdministrationConstants.DESCRIPTION_REQUIRED,
	            		TPLAdministrationConstants.JSP_DESCRIPTION_FILE_UPLOAD);
	            hippDataBean.setAttDes(true);
	            
        	}else{
        		fldsAvbl = false;
        		setErrorMessage(TPLAdministrationConstants.DESCRIPTION_REQUIRED,"attach_desc1");
        	}
        }
        if (hippDataBean.isShowAddAttachments()==true)
        {
        	if (attachment.getFile1() == null || attachment.getFile1().length==0)        	
            {
            	TPLContactManagementHelper.setErrorMessage(
    					TPLMaintainContactManagementUIConstants.ATTACH_MESSAGE,
    					TPLMaintainContactManagementUIConstants.ATTACH_UPLOAD_ID,
    					null, null); 
            	hippDataBean.setAttFile(true);
        	}
        	if (isNullOrEmptyField(attachment.getEdmsWrkUnitLevel()))
            {
                fldsAvbl = false;
                /*setErrorMessage(TPLAdministrationConstants.EDMS_WORKUNIT_REQUIRED,
                		TPLAdministrationConstants.JSP_EDMS_WORKUNIT_FILE_UPLOAD);*/
                TPLAdministrationHelper.addErrorMessage(TPLAdministrationConstants.EDMS_WORKUNIT_REQUIRED, 
                		TPLAdministrationConstants.TPL_CARRIER_PROPERTIES, "edmswrkunitlevel");
                hippDataBean.setEdmswrkflg(true);
            }
            if (isNullOrEmptyField(attachment.getEdmsDocType()))
            {
                fldsAvbl = false;
                /*setErrorMessage(TPLAdministrationConstants.EDMS_DOCUMENTTYPE_REQUIRED,
                		TPLAdministrationConstants.JSP_EDMS_DOCUMENTTYPE_FILE_UPLOAD);*/
                TPLAdministrationHelper.addErrorMessage(TPLAdministrationConstants.EDMS_DOCUMENTTYPE_REQUIRED, 
                		TPLAdministrationConstants.TPL_CARRIER_PROPERTIES, TPLAdministrationConstants.JSP_EDMS_DOCUMENTTYPE_FILE_UPLOAD);
                hippDataBean.setEdmstypf(true);
            }
        }        
       
        
		return fldsAvbl;
	}
	private void setErrorMessage(String message,String jspId)
    {    	
        FacesContext facesContext = FacesContext.getCurrentInstance();
        facesContext.getApplication().setMessageBundle(
                TPLAdministrationConstants.TPL_CARRIER_PROPERTIES);
        ResourceBundle bundle = resourceBundle(facesContext);
        String errorMsg = bundle.getString(message);
        if (StringUtils.isBlank(jspId))
        {
            facesContext.addMessage(null, new FacesMessage(errorMsg));
        }
        else
        {
            UIComponent uiComp = findComponentInRoot(jspId);          
           
            facesContext.addMessage(uiComp.getClientId(facesContext), new FacesMessage(errorMsg));
        }
    }
    /**
     * This Method is used to Map to Resource Bundle.
     * 
     * @param facesContext
     *            FacesContext
     * @return ResourceBundle after mapping
     */
    public static ResourceBundle resourceBundle(FacesContext facesContext)
    {

        facesContext = FacesContext.getCurrentInstance();
        UIViewRoot root = facesContext.getViewRoot();
        String messageBundle = facesContext.getApplication().getMessageBundle();
        Locale locale = root.getLocale();
        ResourceBundle bundle = ResourceBundle.getBundle(messageBundle, locale);

        return bundle;
    }
    
    /** holds the HtmlFileUpload object */
    //protected transient HtmlFileupload fileupload1;
    /**
     * This method is used to get the HtmlFileupload object
     * 
     * @return HtmlFileupload It returns the HtmlFileupload object
     */
    protected HtmlFileupload getFileupload1()
    {
    	HtmlFileupload fileupload1= null;
        fileupload1 = (HtmlFileupload) TPLAdministrationHelper
                    .findComponentInRoot("fileupload1");
        return fileupload1;
    }
    /**
	 * @param fileupload1 The fileupload1 to set.
	 */
	/*public void setFileupload1(HtmlFileupload fileupload1) {
		this.fileupload1 = fileupload1;
	}*/
	
	/**
	 * @param attachmentVO
	 * @param maxSizeInMB
	 * @param attachmentList
	 * @throws EnterpriseBaseBusinessException
	 */
	private boolean checkTotalSizeOfAttachedFiles(AttachmentsVO attachmentVO, 
			int maxSizeInMB, List attachmentList) throws EnterpriseBaseBusinessException 
	{
		double totalSize = 0.0;
		boolean totalSizeChck=false;
		for(int i=0; i < attachmentList.size(); i++)
		{
			AttachmentsVO alreadyAttachedFile = (AttachmentsVO) attachmentList.get(i);
			if(alreadyAttachedFile.getFile1()!=null){
				double size = alreadyAttachedFile.getFile1().length;
				totalSize = totalSize + size;
			}
		}

		if (attachmentVO.getFile1() != null && !(attachmentVO.getFile1().length == 0))
		{
		 	totalSize = totalSize + attachmentVO.getFile1().length;
		}

		if (totalSize >= (maxSizeInMB * (Integer
				.parseInt(TPLMaintainContactManagementUIConstants.MAX_ONE_MB_SIZE)))) 
		{
			totalSizeChck=true;
		}
		return totalSizeChck;
	}
	/**
	 * @throws Exception
	 */
	private String getSystemParameter(String cascadeKey)
	{
		logger.debug("Method Start ::: TPLHIPPControllerBean.getSystemParameter");
		String cascadeVal = "";
		SystemParameterDelegate systemParameterDelegate = new SystemParameterDelegate();
		//External -API Modified for System Parameter 
		List systemParameterDetail = new ArrayList();
	
		try {		
			systemParameterDetail =systemParameterDelegate.getSystemParameterDetailForTPL(new Long(cascadeKey),
					ContactManagementConstants.FUNCTIONAL_AREA_CODE);

		} catch (SystemParameterNotFoundException sytemParmNotFoundExec) {
			setErrorMessage(ContactManagementConstants.ERR_SW_SEVERE_FAILURE,
					new Object[] {}, MessageUtil.ENTMESSAGES_BUNDLE, null);		
		}
		if(systemParameterDetail != null && systemParameterDetail.size() > 0 )
		{
			SystemParameterInfo parameterInfo=(SystemParameterInfo)systemParameterDetail.get(0);
			if (parameterInfo !=null && parameterInfo.getValueData() != null)
			{
				cascadeVal =parameterInfo.getValueData();
			}
		}
		logger.debug("Method End ::: TPLHIPPControllerBean.getSystemParameter");
		return cascadeVal;
	}
	/**
     * This method used for setting error display messages.
     * 
     * @param errorName :
     *            String errorName.
     * @param arguments :
     *            Array of Object. Parameters to be passed to the message
     * @param messageBundle :
     *            String messageBundle.
     * @param componentId :
     *            String componentId.
     */
    private void setErrorMessage(String errorName, Object[] arguments,
            String messageBundle, String componentId)
    {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        UIViewRoot root = facesContext.getViewRoot();
        Locale locale = root.getLocale();
        String clientId = null;

        facesContext.getApplication().setMessageBundle(messageBundle);
        String errorMsg = MessageUtil.format(messageBundle, errorName,
                arguments, locale);
        FacesMessage fc = new FacesMessage();
        fc.setDetail(errorMsg);

        if (componentId != null)
        {
            UIComponent uiComponent = findComponentInRoot(componentId);
            clientId = uiComponent.getClientId(facesContext);
        }
        
        facesContext.addMessage(clientId, fc);
    }
    /**
	 *
	 * @param fileContent
	 * @param fileName File name being attached (Not full path)
	 * @return
	 * @throws EnterpriseBaseBusinessException
	 */
	public String writeToSan(byte[] fileContent, String fileName) throws EnterpriseBaseBusinessException
	{
		/* added FILE_SEPARATOR as part of pmd p1 violation */
		final String FILE_SEPARATOR = "file.separator";
		
		String uploadFilePath = null;
	    String finalPathToWPS = null;
	    String uploadFileNameMode = "prod";
	    ConfigurationLoader cl = ConfigurationLoader.getInstance();
	    Properties props = cl.getAttachmentConfigProperties();
	    String osName = System.getProperty("os.name");
	    if (osName.startsWith("Windows")){
	        uploadFilePath = props.getProperty(TPLMaintainContactManagementUIConstants.WINDOWS_PATH);
	    }else {	    	
			uploadFilePath = props.getProperty(TPLMaintainContactManagementUIConstants.UNIX_PATH);
	    }
	    if(uploadFilePath != null) {
	    	uploadFilePath = uploadFilePath.trim();
	    }
	    byte emptyArray3[] = {};
	    if (fileContent != null && !Arrays.equals(fileContent, emptyArray3)) { 
	    	ExternalContext context  = FacesContext.getCurrentInstance().getExternalContext();
			PortletSession session = (PortletSession) context.getSession(true);
			String sanUserSessionDir = (String) session.getAttribute(ContactManagementConstants.LOG_CORR_ATTACHMENT_SAN_DIRECTORY);
			if(sanUserSessionDir!=null){
				sanUserSessionDir=sanUserSessionDir.trim();
			}
			if (sanUserSessionDir == null){
				PortletRequest portletRequest = (PortletRequest)context.getRequest();
				String userId = getLoggedInUserID(portletRequest); 
		    	Format formatter = new SimpleDateFormat("MMddyyyyhhmmssSSS");
		    	String dateAppended = formatter.format(new Date());
		    	String uploadSanLocation = "";
		    	String uploadSanLocationJndi = "attachment_san_location";
		    	try {
					/** Holds the initial Context */
					InitialContext initialContext = new InitialContext();
					uploadSanLocation =(String) initialContext.lookup(uploadSanLocationJndi);
					if (uploadSanLocation == null){
						uploadSanLocation = uploadFilePath; // If no JNDI lookup, use from property file.
					}
				} catch (NamingException e1) {
					uploadSanLocation = uploadFilePath; // If no JNDI lookup, use from property file.
				}
				String cmUploadFileNameModeJndi = "attachment_simulation_mode";
				String dirToUse = uploadSanLocation + System.getProperty(FILE_SEPARATOR) + userId +  dateAppended;
				try {
					/** Holds the initial Context */
					InitialContext initialContext = new InitialContext();
					uploadFileNameMode =(String) initialContext.lookup(cmUploadFileNameModeJndi);
					if ((uploadFileNameMode != null) && (uploadFileNameMode.equalsIgnoreCase("test")))
					{
						String nonGpfsFileUploadDir = props.getProperty(TPLMaintainContactManagementUIConstants.NON_GPFS_FILE_UPLOAD_DIR);
						dirToUse = uploadSanLocation + System.getProperty(FILE_SEPARATOR) + nonGpfsFileUploadDir;
					}
				} catch (NamingException namingException) {
					logger.error(namingException.getMessage(), namingException);
				}
		    	File dirOnSan = new File(dirToUse);
		    	if (!dirOnSan.exists()){
		    		boolean dirCreated = dirOnSan.mkdir();
		    		if (!dirCreated){
		    		   	throw new EnterpriseBaseBusinessException("err.fileattach.write.ioexception", "SAN directory to write Attachments couldn't be created:" + dirToUse);
		    		}
		    	}
		    	sanUserSessionDir = dirToUse;
		    	session.setAttribute(ContactManagementConstants.LOG_CORR_ATTACHMENT_SAN_DIRECTORY, dirToUse);
			}
			if ((uploadFileNameMode != null) && (uploadFileNameMode.equalsIgnoreCase("test")))
			{
				if(sanUserSessionDir!=null){
					sanUserSessionDir=sanUserSessionDir.trim();
				}
				String testFileName = "";
				TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
				// Test file names are used when writing in test mode. Using test file name 1 or 2 alternately
				if (hippDataBean.getAttachmentVOList().size()/2 == 0){
					testFileName = props.getProperty(TPLMaintainContactManagementUIConstants.NON_GPFS_FILE_UPLOAD_TEST_FILE_1);
				} else {
					testFileName = props.getProperty(TPLMaintainContactManagementUIConstants.NON_GPFS_FILE_UPLOAD_TEST_FILE_2);
				}
				finalPathToWPS = sanUserSessionDir +  System.getProperty(FILE_SEPARATOR) + testFileName;
			} else{
			    if(sanUserSessionDir!=null){
					sanUserSessionDir=sanUserSessionDir.trim();
				}
				finalPathToWPS = sanUserSessionDir +  System.getProperty(FILE_SEPARATOR) + fileName;
			}			
			File file1 = new File(finalPathToWPS);
			try {
				FileOutputStream fs = new FileOutputStream(file1);
				fs.write(fileContent);
				fs.close();
			} catch (IOException e) {
				if(logger.isDebugEnabled()) {
					logger.debug("IOException during file write to SAN:" + finalPathToWPS);

				}

				throw new EnterpriseBaseBusinessException("err.fileattach.write.ioexception", "IOException during file write to SAN:" + finalPathToWPS);
			}
	  	} else {
	    	if(logger.isDebugEnabled()) {
		    	logger.debug("Empty file content for " +  fileName + ". No file written.");

	    	}

		  	throw new EnterpriseBaseBusinessException("err.fileattach.file.size.zer", "Empty file content. File not uploaded.");
	    }
	    return finalPathToWPS;
	}
	/**
	 * This will create the valid values
	 */ //GLOBAL ACTION CHANGE
	/*private void createValidValuesForAttachment() 
	{
		InputCriteria inputCriteria = null;
		List list = null;
		HashMap map = null; //Find Bug Fix
		ReferenceDataSearchVO referenceDataSearch = null;
		ReferenceServiceDelegate referenceServiceDelegate = null;
		ReferenceDataListVO referenceDataListVO = null;

		inputCriteria = new InputCriteria();
		inputCriteria.setFunctionalArea(FunctionalAreaConstants.GENERAL);
		inputCriteria.setElementName(ReferenceServiceDataConstants.G_DEPT_WORK_UNIT_SK);
		list = new ArrayList();
		list.add(inputCriteria);

		inputCriteria = new InputCriteria();
		inputCriteria.setFunctionalArea(FunctionalAreaConstants.GENERAL);
		inputCriteria.setElementName(ReferenceServiceDataConstants.G_EDMS_DOC_TYPE_CD);
		list.add(inputCriteria);
		referenceDataSearch = new ReferenceDataSearchVO();
		referenceDataSearch.setInputList(list);
		referenceServiceDelegate = new ReferenceServiceDelegate();
		//Pass the list to the delegate
		try
		{
			referenceDataListVO = referenceServiceDelegate.getReferenceData(referenceDataSearch);
			//for displaying retrieved values
			map = referenceDataListVO.getResponseMap();
			list = (List) map.get(FunctionalAreaConstants.GENERAL + "#"	+ ReferenceServiceDataConstants.G_DEPT_WORK_UNIT_SK);
			List wrkUnitLevelList = new ArrayList();
			List docTypeList = new ArrayList();
			for (Iterator i = list.iterator(); i.hasNext();)
			{
				ReferenceServiceVO refVo = (ReferenceServiceVO) i.next();
				wrkUnitLevelList.add(new SelectItem(refVo.getValidValueCode(),
						refVo.getValidValueCode() + "-"	+ refVo.getShortDescription()));
			}
			TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			hippDataBean.setEdmsWrkUnitLevelList(wrkUnitLevelList);
			
			list = (List) map.get(FunctionalAreaConstants.GENERAL + "#" + ReferenceServiceDataConstants.G_EDMS_DOC_TYPE_CD);
			for (Iterator i = list.iterator(); i.hasNext();)
			{
				ReferenceServiceVO refVo = (ReferenceServiceVO) i.next();
				docTypeList.add(new SelectItem(refVo.getValidValueCode(), refVo
						.getValidValueCode() + "-" + refVo.getShortDescription()));
			}			
			hippDataBean.setEdmsDocTypeList(docTypeList);
		}
		catch (ReferenceServiceRequestException e)
		{
			e.printStackTrace();
			logger.error(e.getMessage(), e);
		}
		catch (SystemListNotFoundException e)
		{
			e.printStackTrace();
			logger.error(e.getMessage(), e);
		}
	}*/
	/**
     * It is used to hide the Attachment block
     * 
     * @return String
     */
    public String detachAttachment()
    {
    	TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
        if (hippDataBean.isShowEditAttachments())
        {
            AttachmentsVO tempAttachVO = hippDataBean.getAttachmentsVO();
            tempAttachVO.setDetachFlag(true);
            tempAttachVO.setDbRecord(true);
            tempAttachVO.setExistDoc(true);
            //Infinite Defect Implementation:{ ESPRD00291307 }
            hippDataBean.getAttachmentVOList().add(
                    Integer.parseInt(hippDataBean.getAttachmentIndex()),tempAttachVO );
            hippDataBean.getAttachmentVOList().remove(
                    Integer.parseInt(hippDataBean.getAttachmentIndex())+1 );
            cancelAttachments();
            hippDataBean.setShowTPLHIPPAttachmentMessages(true);
            setErrorMessage(TPLAdministrationConstants.TPL_CARRIER_ATTACH_DETACH_SUCCESS);
        }
        return TPLAdministrationConstants.SUCCESS;
    }
    /**
     * This method displays error messages in the jsp pages.
     * 
     * @param message
     *            String
     */
    private void setErrorMessage(String message)
    {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        facesContext.getApplication().setMessageBundle(TPLAdministrationConstants.TPL_CARRIER_PROPERTIES);
        ResourceBundle bundle = resourceBundle(facesContext);
        String errorMsg = bundle.getString(message);
        FacesMessage fm = new FacesMessage(errorMsg);
        facesContext.addMessage(null, fm);
    }
    
    public String saveEditedAttachment()
	{	
		TPLHIPPDataBean hippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		AttachmentsVO attachmentsVO = hippDataBean.getAttachmentsVO();
		if(requiredFldsAvbl(attachmentsVO)) {
			int attchIndex = Integer.parseInt(hippDataBean.getAttachmentIndex());
			hippDataBean.getAttachmentVOList().set(attchIndex, attachmentsVO);
			hippDataBean.setShowTPLHIPPAttachmentMessages(true);	
		}
		// Defect ESPRD00807660 : Set the focus			
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        

	//	hippDataBean.setCurrentPageId(TPL_HIPP_ATTCHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		hippDataBean.setCurrentPageId(TPL_HIPP_ATTACHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		return ContactManagementConstants.RENDER_SUCCESS;
	}
    
    /**
	 * This method get LettersDataBean object.
	 * 
	 * @return LettersAndResponsesDataBean.
	 */
	public final LettersAndResponsesDataBean getLettersDataBeanFromContext() {

		logger.debug("Inside getDataBeanFromContext");
		FacesContext fc = FacesContext.getCurrentInstance();
		LettersAndResponsesDataBean letterTemplateDataBean = (LettersAndResponsesDataBean) fc
				.getApplication().createValueBinding(
						"#{" + GlobalLetterConstants.LETTER_RESPONSES_DATA_BEAN	+ "}").getValue(fc);
		return letterTemplateDataBean;
	}
	
	public void sortHippSearch(ActionEvent event)
    {
		TPLHIPPSearchDataBean tplHippSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		TPLHIPPSearchCriteriaVO tplHIPPSearchCriteriaVO =tplHippSearchDataBean.getTplHIPPSearchCriteriaVO();
		tplHippSearchDataBean.setTplCurrentPageId("hippsearch123");
		EnterpriseSearchResultsVO enterpriseSearchResultsVO = null;
		TPLHIPPDelegate tplHIPPDelegate = new TPLHIPPDelegate();
		String SORT_NO = "sortNo", COLUMN = "column";
		boolean[] sortFlagTemp = new boolean[] { true, true, true, true, true, true,
		 		true, true, true, true, true, true, true, true, true, true, true, true};
		try 
		{
			tplHippSearchDataBean=TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
			FacesContext facesContext = FacesContext.getCurrentInstance();
			Map map = facesContext.getExternalContext().getRequestParameterMap();
			String paramName = map.get(SORT_NO).toString();
			String column = map.get(COLUMN).toString();
			// heap dump fix
			tplHippSearchDataBean.setSearchRowIndex(0);
			tplHippSearchDataBean.setStartRecord(0);
			tplHIPPSearchCriteriaVO.setSortColumn(column);
			tplHIPPSearchCriteriaVO.setStartIndex(0);
			//ESPRD00903946
			sortFlagTemp[Integer.parseInt(paramName)] = false;	
			tplHippSearchDataBean.setSearchColumnSortFlag(sortFlagTemp);
			if ((Integer.parseInt(paramName)) % 2 == 0) {
				tplHIPPSearchCriteriaVO.setAscending(true);
			} else {
				tplHIPPSearchCriteriaVO.setAscending(false);
			}
			enterpriseSearchResultsVO = tplHIPPDelegate.searchHIPPCase(tplHIPPSearchCriteriaVO.getSearchType(), tplHIPPSearchCriteriaVO);
			ArrayList resultList = enterpriseSearchResultsVO.getSearchResults();
			if (resultList.size() > 1) {
				 procesSearchResultForDisplay(tplHippSearchDataBean,enterpriseSearchResultsVO);
				 setRenderingForSearchDisplay(tplHippSearchDataBean,enterpriseSearchResultsVO,false);
			}
		} catch (TPLHIPPBusinessException hippBusinessException){
			logger.debug(hippBusinessException);
			tplHippSearchDataBean.setTplHIPPSearchResultDisplay(false);
			FacesContext facesContext = FacesContext.getCurrentInstance();
			facesContext.addMessage(null,new FacesMessage(ResourceBundle.getBundle(
					TPLRecoveryCaseConstants.RECOVERYSEARCHPortletResource)
					 .getString(TPLRecoveryCaseConstants.TPL_RECOVERY_NO_RECORDS)));
		} catch (Exception e) {
			if(logger.isDebugEnabled()) {
				logger.debug("Exception::::::::: " + e.getMessage());

			}

			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			message(MESSAGE_STR);
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

		}
    }
	//Not Using
	/*private void sortHippSearchData(final boolean sortOrder, final String columnName, List dataList)
	{
	  Comparator comparator = new Comparator()
      {
        public int compare(Object obj1, Object obj2)
        {
        	TPLHIPPSearchResultVO data1 = (TPLHIPPSearchResultVO) obj1;
        	TPLHIPPSearchResultVO data2 = (TPLHIPPSearchResultVO) obj2;           
            
            if (columnName == null)
            {
                return 0;
            }
            if (TPLAdministrationConstants.SORT_HIPP_APPLICANT_ID.equals(columnName))
				{            	
					if (null == data1.getApplicantSysID())
					{
						data1.setApplicantSysID(null);
					}
					if (null == data2.getApplicantSysID())
					{
						data2.setApplicantSysID(null);
					}
					return sortOrder ? data1.getApplicantSysID().compareTo(
					data2.getApplicantSysID()) : data2.getApplicantSysID()
					.compareTo(data1.getApplicantSysID());
				}
            if (TPLAdministrationConstants.SORT_HIPP_APPLICANT_NAME.equals(columnName))
    				{                	
    					if (null == data1.getApplicantMemberName())
    					{
    						data1.setApplicantMemberName(null);
    					}
    					if (null == data2.getApplicantMemberName())
    					{
    						data2.setApplicantMemberName(null);
    					}
    					return sortOrder ? data1.getApplicantMemberName().compareToIgnoreCase(
    					data2.getApplicantMemberName()) : data2.getApplicantMemberName()
    					.compareToIgnoreCase(data1.getApplicantMemberName());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_RESPONSIBLE_WORKER_ID.equals(columnName))
    				{                	
    					if (null == data1.getHippResponsibleUserId())
    					{
    						data1.setHippResponsibleUserId(null);
    					}
    					if (null == data2.getHippResponsibleUserId())
    					{
    						data2.setHippResponsibleUserId(null);
    					}
    					return sortOrder ? data1.getHippResponsibleUserId().compareTo(
    					data2.getHippResponsibleUserId()) : data2.getHippResponsibleUserId()
    					.compareTo(data1.getHippResponsibleUserId());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_WORKER_NAME.equals(columnName))
    				{
                	if (null == data1.getWorkerName())
    					{
    						data1.setWorkerName(null);
    					}
    					if (null == data2.getWorkerName())
    					{
    						data2.setWorkerName(null);
    					}
    					return sortOrder ? data1.getWorkerName().compareTo(
    					data2.getWorkerName()) : data2.getWorkerName()
    					.compareTo(data1.getWorkerName());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_CASE_ID.equals(columnName))
    				{                	
    					if (null == data1.getHippCaseId())
    					{
    						data1.setHippCaseId(null);
    					}
    					if (null == data2.getHippCaseId())
    					{
    						data2.setHippCaseId(null);
    					}
    					return sortOrder ? data1.getHippCaseId().compareTo(
    					data2.getHippCaseId()) : data2.getHippCaseId()
    					.compareTo(data1.getHippCaseId());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_STATUS_CODE.equals(columnName))
    				{                	
    					if (null == data1.getHippStatusCode())
    					{
    						data1.setHippStatusCode(null);
    					}
    					if (null == data2.getHippStatusCode())
    					{
    						data2.setHippStatusCode(null);
    					}
    					return sortOrder ? data1.getHippStatusCode().compareTo(
    					data2.getHippStatusCode()) : data2.getHippStatusCode()
    					.compareTo(data1.getHippStatusCode());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_APPLIED_DATE.equals(columnName))
    				{                	
    					if (null == data1.getHippAppliedDate())
    					{
    						data1.setHippAppliedDate(null);
    					}
    					if (null == data2.getHippAppliedDate())
    					{
    						data2.setHippAppliedDate(null);
    					}
    					return sortOrder ? data1.getHippAppliedDate().compareTo(
    					data2.getHippAppliedDate()) : data2.getHippAppliedDate()
    					.compareTo(data1.getHippAppliedDate());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_COVERAGE_BGN_DATE.equals(columnName))
    				{
    					if (null == data1.getHippCoverageBeginDate())
    					{
    						data1.setHippCoverageBeginDate(null);
    					}
    					if (null == data2.getHippCoverageBeginDate())
    					{
    						data2.setHippCoverageBeginDate(null);
    					}
    					return sortOrder ? data1.getHippCoverageBeginDate().compareTo(
    					data2.getHippCoverageBeginDate()) : data2.getHippCoverageBeginDate()
    					.compareTo(data1.getHippCoverageBeginDate());
    				}
            if (TPLAdministrationConstants.SORT_HIPP_COVERAGE_END_DATE.equals(columnName))
    				{
    					if (null == data1.getHippCoverageEndDate())
    					{
    						data1.setHippCoverageEndDate(null);
    					}
    					if (null == data2.getHippCoverageEndDate())
    					{
    						data2.setHippCoverageEndDate(null);
    					}
    					return sortOrder ? data1.getHippCoverageEndDate().compareTo(
    					data2.getHippCoverageEndDate()) : data2.getHippCoverageEndDate()
    					.compareTo(data1.getHippCoverageEndDate());
    				}
            return 0;
        }
    };
    Collections.sort(dataList, comparator);
  }*/
/**
 * This method get FilterDataBean object.
 * 
 * @return LettersAndResponsesDataBean.
 */
  public final LettersAndResponsesDataBean getLtrDataBeanFromContext() {

//	logger.info("Inside getDataBeanFromContext");
	FacesContext fc = FacesContext.getCurrentInstance();
	LettersAndResponsesDataBean letterTemplateDataBean = (LettersAndResponsesDataBean) fc
			.getApplication().createValueBinding(
					"#{" + GlobalLetterConstants.LETTER_RESPONSES_DATA_BEAN
							+ "}").getValue(fc);
	return letterTemplateDataBean;
  }
/**
 * To get the LettersAndResponsesControllerBean.
 *
 * @return LettersAndResponsesControllerBean.
 */
   protected LettersAndResponsesControllerBean getLettersAndResponsesControllerBean()
   {
     FacesContext fc = FacesContext.getCurrentInstance();
     LettersAndResponsesControllerBean lettAndResControllerBean = (LettersAndResponsesControllerBean) fc
         .getApplication().createValueBinding("#{" + "LettersAndResponsesControllerBean" + "}").getValue(fc);
   
     return lettAndResControllerBean;
   }
  private Date getDateFromString(String dateString)
  {	 	
	String tempDate=dateString;
	String fullBDate="";
	 if (tempDate.length()==8)
	{
	String mm = tempDate.substring(0,2);
	String dd = tempDate.substring(2,4);
	String yy = tempDate.substring(4,8);
	fullBDate = mm+"/"+dd+"/"+yy;
	dateString=fullBDate;				
   }else if(tempDate.length()==10){
   	String mm = tempDate.substring(0,2);
	String dd = tempDate.substring(3,5);
	String yy = tempDate.substring(6,10);
	fullBDate = mm+"/"+dd+"/"+yy;
	dateString=fullBDate;				
   }
	SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);
    Date date = null;
    try
    {
        date = sdf.parse(dateString);
    }
    catch (ParseException e)
    {
    	logger.debug(e.getMessage());
    }
    return date;
 }
 public String getHippMemberDetails()
 {
    FacesContext fc = FacesContext.getCurrentInstance();
    ExternalContext extContext = fc.getExternalContext();
    Map map = extContext.getRequestParameterMap();
    String memberSysId = (String) map.get("memberSysId");
    MemberSearchCriteriaVO criteriaVO = new MemberSearchCriteriaVO();
    criteriaVO.setMemberSysID(new Long(memberSysId));    
    extContext.getRequestMap().put("EntityMemberDetail", criteriaVO);
    return "";
 }
 // Defect ESPRD00796540 method added 
 public String getHippMemberAbsentDetails()
 {
	 FacesContext fc = FacesContext.getCurrentInstance();
     ExternalContext extContext = fc.getExternalContext();
     Map map = extContext.getRequestParameterMap();	     
     String  sysId = (String) map.get("sysId");
	  String  firstName = (String) map.get("firstName");
	  String  lastName = (String) map.get("lastName");
	  String  midName = (String) map.get("midName");
	  String  memId = (String) map.get("memId");
	  String  memIdType = (String) map.get("memIdType");
     CommonMemberDetailsVO memberDetailsVO = new CommonMemberDetailsVO();
     if (!StringUtils.isBlank(firstName))
     {
         memberDetailsVO.setMemberName(lastName+ MemberUIConstants.COMMA
                         + MemberUIConstants.SPACE + firstName);
     }
     else
     {
         memberDetailsVO.setMemberName(lastName);
     }
     if (!StringUtils.isBlank(sysId))
     {
     memberDetailsVO.setMemberSysID(sysId);
     }
     memberDetailsVO.setFromDate("01/01/0001");
     memberDetailsVO.setToDate("12/31/9999");
     memberDetailsVO.setLobCode("MED");
     if (!StringUtils.isBlank(memId)){
     memberDetailsVO.setAltID(memId);
     memberDetailsVO.setMemberID(memId);
     }      
     if (!StringUtils.isBlank(firstName))
     {
     memberDetailsVO.setFirstName(firstName);
     }
     if (!StringUtils.isBlank(lastName))
     {
     memberDetailsVO.setLastName(lastName);
     }
     //memberDetailsVO.setSuffixName(suffixName);
     if (!StringUtils.isBlank(midName))
     {
     memberDetailsVO.setMiddleInitial(midName);
     }
     if (!StringUtils.isBlank(memIdType))
     {
     memberDetailsVO.setMemberIdType(memIdType);
     }
     extContext.getRequestMap().put("MemberabstparentinfoDetail", memberDetailsVO); 
     return "";
 }
 public static String getSourceCodeDescription(List lobCodeList, String sourceCode)
 {
   if (lobCodeList != null && lobCodeList.size() > TPLAdministrationConstants.ZERO)
    {
	  Iterator sourceCodeListIter = lobCodeList.iterator();
	  if(sourceCode != null)
	  {
		while (sourceCodeListIter.hasNext())
		{
			javax.faces.model.SelectItem sourceCodeItem = (javax.faces.model.SelectItem) sourceCodeListIter.next();
			String sourceCd = (String) sourceCodeItem.getValue();
			if ((sourceCd != null) && !sourceCd.equals(TPLAdministrationConstants.EMPTY_STRING) &&
					sourceCode.equals(sourceCd))
			{
				return ((String) sourceCodeItem.getLabel());
			}
		}
	  }
    }  
	return TPLAdministrationConstants.EMPTY_STRING;
 }

 public String sortHIPPAttachmentsInfo(ActionEvent event)
 {
	String sortColumn = (String) event.getComponent().getAttributes().get(
            TPLAdministrationConstants.TPL_CLOUMN_NAME);
    String sortOrder = (String) event.getComponent().getAttributes().get(
            TPLAdministrationConstants.TPL_SORT_ORDER);     
    getTPLPolicyDataBean().setImageRender(event.getComponent().getId());
    TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
    tplHIPPDataBean.setCurrentPageId("sortHIPPAttSortFocus");
    sortHIPPAttachmentsComparator(sortColumn, sortOrder,tplHIPPDataBean.getAttachmentVOList());
    return TPLAdministrationConstants.SUCCESS;
 }

 private void sortHIPPAttachmentsComparator(final String sortColumn,
        final String sortOrder, List dataList)
 {
    Comparator comparator = new Comparator()
    {
        public int compare(Object obj1, Object obj2)
        {
            AttachmentsVO data1 = (AttachmentsVO) obj1;
            AttachmentsVO data2 = (AttachmentsVO) obj2;

            boolean ascending = false;
            if (TPLAdministrationConstants.SORT_TYPE_ASC.equals(sortOrder))
            {
                ascending = true;
            }
            else
            {
                ascending = false;
            }
            if (sortColumn == null)
            {
                return 0;
            }
            if (TPLAdministrationConstants.CARR_ATTACHMENTS_ATTACH_DATEADDED.equals(sortColumn))
            {
                if (null == data1.getDateAdded())
                {
                    data1.setDateAdded(TPLAdministrationConstants.EMPTY);
                }
                if (null == data2.getDateAdded())
                {
                    data2.setDateAdded(TPLAdministrationConstants.EMPTY);
                }
                return ascending ? data1.getDateAdded().compareTo(
                        data2.getDateAdded()) : data2.getDateAdded()
                        .compareTo(data1.getDateAdded());
            }
            if (TPLAdministrationConstants.CARR_ATTACHMENTS_ATTACH_ADDEDBY.equals(sortColumn))
            {
                if (null == data1.getAddedBy())
                {
                    data1.setAddedBy(TPLAdministrationConstants.EMPTY);
                }
                if (null == data2.getAddedBy())
                {
                    data2.setAddedBy(TPLAdministrationConstants.EMPTY);
                }
                return ascending ? data1.getAddedBy().trim().compareTo(
                        data2.getAddedBy().trim()) : data2.getAddedBy()
                        .trim().compareTo(data1.getAddedBy().trim());
            }
            if (TPLAdministrationConstants.CARR_ATTACHMENTS_ATTACH_FILENAME.equals(sortColumn))
            {
                if (null == data1.getFileName())
                {
                    data1.setFileName(TPLAdministrationConstants.EMPTY);
                }
                if (null == data2.getFileName())
                {
                    data2.setFileName(TPLAdministrationConstants.EMPTY);
                }
                return ascending ? data1.getFileName().trim().compareTo(
                        data2.getFileName().trim()) : data2.getFileName()
                        .trim().compareTo(data1.getFileName().trim());
            }
            if (TPLAdministrationConstants.CARR_ATTACHMENTS_ATTACH_DESC.equals(sortColumn))
            {
                if (null == data1.getDescription())
                {
                    data1.setDescription(TPLAdministrationConstants.EMPTY);
                }
                if (null == data2.getDescription())
                {
                    data2.setDescription(TPLAdministrationConstants.EMPTY);
                }
                return ascending ? data1.getDescription().trim().compareTo(
                        data2.getDescription().trim()) : data2
                        .getDescription().trim().compareTo(data1.getDescription().trim());
            }
            return 0;
        }
    };
    Collections.sort(dataList, comparator);
  }
  public void searchPageNavigation()
  {
	TPLHIPPSearchDataBean tplHippSearchDataBean = null;
	TPLHIPPDelegate tplHIPPDelegate = null;
	TPLHIPPSearchCriteriaVO tplHIPPSearchCriteriaVO = null;
	EnterpriseSearchResultsVO enterpriseSearchResultsVO = null;
	try 
	{       
	  tplHIPPDelegate = new TPLHIPPDelegate();
	  tplHippSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
	  tplHIPPSearchCriteriaVO = tplHippSearchDataBean.getTplHIPPSearchCriteriaVO();
	  if(setStartIndexForSearch(tplHippSearchDataBean,tplHIPPSearchCriteriaVO))
	  {	
	   	tplHIPPSearchCriteriaVO.setRowsPerPage(TPLAdministrationConstants.ITEMS_PER_PAGE);
	   	enterpriseSearchResultsVO = tplHIPPDelegate.searchHIPPCase(tplHIPPSearchCriteriaVO.getSearchType(), tplHIPPSearchCriteriaVO);
	  	procesSearchResultForDisplay(tplHippSearchDataBean,enterpriseSearchResultsVO);
	   	setRenderingForSearchDisplay(tplHippSearchDataBean,enterpriseSearchResultsVO,true);
	  }
	} catch (Exception e)
	{
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
		// logger.error("Exception in TPLHIPPControllerBean.searchPageNavigation()", e);
		
	//	message(ERROR_PROCESSING_THE_REQUEST);
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
		if(logger.isErrorEnabled()){
			logger.error("Exception in searchPageNavigation ",e);
		}
		/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
		if(logger.isDebugEnabled()) {
			logger.debug("Exception::::::::: " + e.getMessage());

		}

		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		message(MESSAGE_STR);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	}
  }

  private boolean setStartIndexForSearch(TPLHIPPSearchDataBean tplHippSearchDataBean,TPLHIPPSearchCriteriaVO tplHIPPSearchCriteriaVO)
   {
	    FacesContext facesContext = FacesContext.getCurrentInstance();
		Map map = facesContext.getExternalContext().getRequestParameterMap();
		String linkID = map.get("param").toString();
		tplHippSearchDataBean.setTplCurrentPageId("hippsearch123");
		tplHippSearchDataBean.setSearchRowIndex(0);
		
		if("firstPage".equals(linkID)) {
			if(tplHippSearchDataBean.getFirstPage() == tplHippSearchDataBean.getCurrentPage()) {
				return false;
			}else {
				tplHippSearchDataBean.setCurrentPage(tplHippSearchDataBean.getFirstPage());
			}
		}else if("firstPagePlusOne".equals(linkID)){
			if((tplHippSearchDataBean.getFirstPage()+1) == tplHippSearchDataBean.getCurrentPage()) {
				return false;
			}else {
				tplHippSearchDataBean.setCurrentPage(tplHippSearchDataBean.getFirstPage()+1);
			}
		}else if("firstPagePlusTwo".equals(linkID)){
			if((tplHippSearchDataBean.getFirstPage()+2) == tplHippSearchDataBean.getCurrentPage()) {
				return false;
			}else {
				tplHippSearchDataBean.setCurrentPage(tplHippSearchDataBean.getFirstPage()+2);
			}
		}else if("showPrevious".equals(linkID)){
			tplHippSearchDataBean.setCurrentPage(tplHippSearchDataBean.getCurrentPage()-1);
		}else if("showNext".equals(linkID)){
			tplHippSearchDataBean.setCurrentPage(tplHippSearchDataBean.getCurrentPage()+1);
		}
		if (tplHippSearchDataBean.getCurrentPage() == 1 ||tplHippSearchDataBean.getNumberOfPages() == 2)  {
			tplHippSearchDataBean.setFirstPage(1);
		}else if(tplHippSearchDataBean.getCurrentPage() == tplHippSearchDataBean.getNumberOfPages()){
			tplHippSearchDataBean.setFirstPage(tplHippSearchDataBean.getCurrentPage()-2);
		}else{
			tplHippSearchDataBean.setFirstPage(tplHippSearchDataBean.getCurrentPage()-1);
		}
		tplHIPPSearchCriteriaVO.setStartIndex((tplHippSearchDataBean.getCurrentPage()-1)*TPLAdministrationConstants.ITEMS_PER_PAGE);
		return true;
	}
  
	 private void setRenderingForSearchDisplay(TPLHIPPSearchDataBean tplHIPPSearchDataBean,EnterpriseSearchResultsVO enterpriseSearchResultsVO,boolean isFromPagination)
	  {
		   if(!isFromPagination)
		   {
			   tplHIPPSearchDataBean.setCount((int) enterpriseSearchResultsVO.getRecordCount());
			   int noOfPages = tplHIPPSearchDataBean.getCount() / 10;
			   int modNofPages = tplHIPPSearchDataBean.getCount() % 10;
			   if (modNofPages != 0) {
				   noOfPages = noOfPages + 1;
			   }
			   tplHIPPSearchDataBean.setFirstPage(1);
			   tplHIPPSearchDataBean.setCurrentPage(1);
			   tplHIPPSearchDataBean.setNumberOfPages(noOfPages);
			   tplHIPPSearchDataBean.setStartRecord(1);
			}else{
				 tplHIPPSearchDataBean.setStartRecord(((tplHIPPSearchDataBean.getCurrentPage()-1)*TPLAdministrationConstants.ITEMS_PER_PAGE)+1);
			}
			if (tplHIPPSearchDataBean.getCurrentPage()<tplHIPPSearchDataBean.getNumberOfPages()) {
				tplHIPPSearchDataBean.setEndRecord(tplHIPPSearchDataBean.getCurrentPage()*TPLAdministrationConstants.ITEMS_PER_PAGE);
			}else {
				tplHIPPSearchDataBean.setEndRecord(tplHIPPSearchDataBean.getCount());
			}		
			tplHIPPSearchDataBean.setTplHIPPSearchResultDisplay(true);
			if(tplHIPPSearchDataBean.getNumberOfPages()!=1)
			{
				tplHIPPSearchDataBean.setRenderFirstPage(true);
				tplHIPPSearchDataBean.setRenderFirstPagePlusOne(true);
				tplHIPPSearchDataBean.setShowNext(false);
				tplHIPPSearchDataBean.setShowPrevious(false);
				tplHIPPSearchDataBean.setRenderFirstPagePlusTwo(false);
				if(tplHIPPSearchDataBean.getCurrentPage() != tplHIPPSearchDataBean.getNumberOfPages()){
					tplHIPPSearchDataBean.setShowNext(true);
				}
				if (tplHIPPSearchDataBean.getCurrentPage() != 1)  {
					tplHIPPSearchDataBean.setShowPrevious(true);
				}
				if(tplHIPPSearchDataBean.getCurrentPage() <= tplHIPPSearchDataBean.getNumberOfPages() 
						&& (tplHIPPSearchDataBean.getFirstPage()+2)<= tplHIPPSearchDataBean.getNumberOfPages()){
					tplHIPPSearchDataBean.setRenderFirstPagePlusTwo(true);
				}
			}else{
				tplHIPPSearchDataBean.setRenderFirstPage(false);
				tplHIPPSearchDataBean.setRenderFirstPagePlusOne(false);
				tplHIPPSearchDataBean.setRenderFirstPagePlusTwo(false);
				tplHIPPSearchDataBean.setShowNext(false);
				tplHIPPSearchDataBean.setShowPrevious(false);
			}
			if(tplHIPPSearchDataBean.getFirstPage() == tplHIPPSearchDataBean.getCurrentPage()){
				tplHIPPSearchDataBean.boldPageNum[0] = true;tplHIPPSearchDataBean.boldPageNum[1] = false;tplHIPPSearchDataBean.boldPageNum[2] = false;
			}else if(tplHIPPSearchDataBean.getFirstPage()+1 == tplHIPPSearchDataBean.getCurrentPage()){
				tplHIPPSearchDataBean.boldPageNum[0] = false;tplHIPPSearchDataBean.boldPageNum[1] = true;tplHIPPSearchDataBean.boldPageNum[2] = false;
			}else{
				tplHIPPSearchDataBean.boldPageNum[0] = false;tplHIPPSearchDataBean.boldPageNum[1] = false;tplHIPPSearchDataBean.boldPageNum[2] = true;
			}
	  }
	// CR ESPRD00679536 -- Begin 
	public void sortTPLHippPayeeList(final boolean sortOrder,
		        final String columnName, List dataList)
	{		
		Comparator comparator = new Comparator()
	    {
			public int compare(Object obj1, Object obj2)
	        {
		       	TPLHIPPPayeeInfoVO data1 = (TPLHIPPPayeeInfoVO) obj1;
		       	TPLHIPPPayeeInfoVO data2 = (TPLHIPPPayeeInfoVO) obj2;           
	            if (columnName == null)
	            {
	                return 0;
	            }
	            
	            if ("getPayeeEffectiveBeginDate".equals(columnName))
				{    	            	
	            	DateFormat dateFormat=new SimpleDateFormat(DATE_FORMAT);
	            	try 
	            	{
	            		if (null == data1.getPayeeEffectiveBeginDate())
    					{
	    					data1.setPayeeEffectiveBeginDate(null);
    					}
	    				if (null == data2.getPayeeEffectiveBeginDate())
	    				{
	    					data2.setPayeeEffectiveBeginDate(null);
	    				}
	    					
						return sortOrder ? dateFormat.parse(data1.getPayeeEffectiveBeginDate()).compareTo(
								dateFormat.parse(data2.getPayeeEffectiveBeginDate())) : 
									dateFormat.parse(data2.getPayeeEffectiveBeginDate()).compareTo(
										dateFormat.parse(data1.getPayeeEffectiveBeginDate())) ;
					} catch (ParseException e) {
						// TODO Auto-generated catch block
				// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
					//	logger.error("Exception in TPLHIPPControllerBean.sortTPLHippPayeeList()", e);    
						/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Starts */
						if(logger.isErrorEnabled()){
							logger.error("ParseException in sortTPLHippPayeeList ",e);
						}
						/* PMD Violations - P1 Fix - AvoidPrintStackTrace -- Changed By 424467 Ends */
				
					}
				}
	           
	            return 0;
	        }
	    };
	    Collections.sort(dataList,comparator);
	}
	
	TPLHIPPDataBean tplHippdatBean=TPLHIPPConversionHelper.getTPLHIPPDataBean();
	public String invokeHippMemberID() 
	{
		tplHippdatBean.setHippIpcInd("hippcaseTab:hippCaseInfo:TPLADMCL79");
		return "";
	}
	public String invokeHippPaymentPayeeID() 
	{
		tplHippdatBean.setHippIpcInd("policyNCoverIndividualTab:tplPolicyNCoverIndividualTab:payeeIDCommandLink");
		return "";
	}
	public String invokeHippPayeeID() 
	{
		tplHippdatBean.setHippIpcInd("policyNCoverIndividualTab:tplPolicyNCoverIndividualTab:payeeIDCommandLink");
		return "";
	}
	
	public String invokeHippEntityID() 
	{
		tplHippdatBean.setHippIpcInd("paymenttab:tplpaymentinfoTabTab:gotoAE");
		return "";
	}
	public String invokeHippNonEntityID() 
	{
		tplHippdatBean.setHippIpcInd("paymenttab:tplpaymentinfoTabTab:payeeIDOutPutLink");
		return "";
	}
	//Defect ESPRD00796540 method added 
	public String invokeHippAddCoveredMemberID() 
	{
		tplHippdatBean.setHippIpcInd("policyNCoverIndividualTab:tplPolicyNCoverIndividualTab:coveredIndividual:addPolicyCoveredIndividualJSP:TPLADMCL7579");
		return "";
	}
	//Defect ESPRD00796540 method added 
	public String invokeHippEditCoveredMemberID() 
	{
		tplHippdatBean.setHippIpcInd("policyNCoverIndividualTab:tplPolicyNCoverIndividualTab:coveredIndividual:editPolicyCoveredIndividualJSP:TPLADMCL75795");
		return "";
	}
	//Added for defect :: ESPRD00781346
	public String invokePayeePayerId(){
	
		tplHippdatBean.setHippIpcInd("paymenttab:tplpaymentinfoTabTab:updatepayeeid");
		return "";
		
	}
	private String validDataForSearch;

	public String getValidDataForSearch() {
		logger.debug("Indise getValidDataForSearch()");
		TPLHIPPSearchDataBean tplHippSearchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
		searchLink2Show();
		getLoadReferenceDataForSearch();
		tplHippSearchDataBean.setLoadValidValuesFlag(false);
		return validDataForSearch;
	}
	
	private String validData;

	public String getValidData() {
		logger.debug("Indise getValidData()");
		TPLHIPPDataBean tplHippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		link2Show();
		getLoadReferenceData(tplHippDataBean);
		tplHippDataBean.setLoadLink2Show(false);
		return validData;
	}
	
	 public void searchLink2Show()
	 {
		 logger.debug("inside search Link2Show");
       Map links2Hide = getUserPermission();
	   //FieldAccessControl fieldAccessControlImpl = new FieldAccessControl();
	   Set keys = links2Hide.keySet();
	   Iterator keyitr = keys.iterator();
	   TPLHIPPSearchDataBean searchDataBean = TPLHIPPConversionHelper.getTPLHIPPSearchDataBean();
	   while( keyitr. hasNext() )
	   {
		  String linkName=(String)keyitr.next();	
		  String linkPermission=(String)links2Hide.get(linkName);
		  if(logger.isDebugEnabled()) {
			  logger.debug("Inside TPLPolicyControllerBean linkPermission"+linkPermission);

		  }

		  if (linkPermission != null)
		  {
		  	linkPermission = linkPermission.trim();	
		  	if(linkName.equals(TPLAdministrationConstants.UPDATE_HIIP_PAGE))
		  	{
		  	  if(("r".equalsIgnoreCase(linkPermission)))
		  	  {	    				
		  		//System.out.println("TPLHippControllerBean Accesspermission***NOT NULL Permission:"+linkPermission);
		  		searchDataBean.setDisableTplHIIPupdate(true);  
		  	  }
		  	 }
  		   } 
		   else 
		   {
			   logger.debug("**Inside TPLHippControllerBean linkpermission is equal to null *********");
		  	 if( linkName.equals(TPLAdministrationConstants.UPDATE_HIIP_PAGE))
		  	 {
		  		searchDataBean.setDisableTplHIIPupdate(true);
		  	  }
		    }
		  }
	   }
	 public void resetAttachment()
	 {
	    TPLHIPPDataBean tplHippDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	    /* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHippDataBean.setCurrentPageId(TPL_HIPP_ATTACHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
	    // MT Platform Code Merge (Merge 1 - Iteration1) ends        

	    tplHippDataBean.setEdmswrkflg(false);//amar
	    tplHippDataBean.setEdmstypf(false);//amar
	    tplHippDataBean.setAttFile(false);
	    tplHippDataBean.setAttDes(false);
	    tplHippDataBean.setShowTPLHIPPAttachmentMessages(false);
	    if (tplHippDataBean.isShowEditAttachments())
        {
            AttachmentsVO temp = null; //Find Bug Fix
            AttachmentsVO tempAttachmentsVO = new AttachmentsVO();
            Integer rowIndex = new Integer(tplHippDataBean.getAttachmentIndex());
            int attchIndex = rowIndex.intValue();
            temp = (AttachmentsVO) tplHippDataBean.getAttachmentVOList().get(attchIndex);
            try
            {
                BeanUtils.copyProperties(tempAttachmentsVO, temp);
            }
            catch (IllegalAccessException e)
            {
                logger.debug("IllegalAccessException in resetHIPPAttachment");
            }
            catch (InvocationTargetException e)
            {
                logger.debug("InvocationTargetException in resetHIPPAttachment");
            }
            tplHippDataBean.setAttachmentsVO(tempAttachmentsVO);
        }
        else
        {
        	tplHippDataBean.setAttachmentsVO(new AttachmentsVO());
        }
	}
		public void resetAddAttachment()
    {
			logger.debug("Entering into resetAddAttachment");
    	TPLHIPPDataBean tplHippdatBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
    	/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
		tplHippdatBean.setCurrentPageId(TPL_HIPP_ATTACHMENT_FOCUS);
		/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
		// MT Platform Code Merge (Merge 1 - Iteration1) ends        

    	if (tplHippdatBean.isAddAttachmentFlag())
        {
            AttachmentsVO temp = null; //Find Bug Fix
            AttachmentsVO tempAttachmentsVO = new AttachmentsVO();
            temp = (AttachmentsVO) tplHippdatBean.getAttachmentVOList()
                    .get(Integer.parseInt(tplHippdatBean.getAttachmentIndex()));  

            try
            {
                BeanUtils.copyProperties(tempAttachmentsVO, temp);
            }
            catch (IllegalAccessException e)
            {
                logger.debug("IllegalAccessException in resetAddAttachment");
            }
            catch (InvocationTargetException e)
            {
                logger
                        .debug("InvocationTargetException in resetAddAttachment");
            }
            tplHippdatBean.setAttachmentsVO(
                    tempAttachmentsVO);
        }
        else
        {
        	tplHippdatBean.setAttachmentsVO(
                    new AttachmentsVO());
        }
    	logger.debug("Exiting from resetPolicyAttachment");
    }
		
		 /**
		 * This method is used to save the policy emplyer information
		 * 
		 * @return String
		 */
		private boolean checkPolicyFields()
		{
			logger.info("inside the method>>>>>checkPolicyFields????");
			boolean valdtPolicyChekFlg = false;

			PolicyVO policyVO = getTPLPolicyDataBean().getPolicyVO();
			EmployerVO empVO = policyVO.getEmployerVO();
			EmployerCommonEntityVO empCommonEntityVO = empVO.getEmployerCommonEntityVO();
			AddressVO empAddressVO = empCommonEntityVO.getAddressVO();
			PolicyHolderVO policyHolderVO = getTPLPolicyDataBean().getPolicyVO().getPolicyHolderVO();

			if (StringUtils.isNotBlank(policyVO.getResourceType()) 
				|| StringUtils.isNotBlank(policyVO.getTplPolicyCarrierVO().getCarrierID()) 
				|| StringUtils.isNotBlank(policyVO.getCopayAmount()) 
				|| StringUtils.isNotBlank(policyVO.getCoinsuranceAmount())
				|| StringUtils.isNotBlank(policyVO.getDeductibleAmount()) 
				|| StringUtils.isNotBlank(policyVO.getBeginDate())
				|| StringUtils.isNotBlank(policyVO.getEndDate()))
			{
				valdtPolicyChekFlg = true;
			}
			// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Starts */
			if(policyVO.getPend().equals(FALSE_STR))
			{
			/* PMD Violations - P1 Fix - AvoidDuplicateLiterals -- Changed By 424467 Ends */
			// MT Platform Code Merge (Merge 1 - Iteration1) ends        

				valdtPolicyChekFlg = true;
			}
			if (StringUtils.isNotBlank(policyHolderVO.getMemberIdType())
				&& StringUtils.isNotBlank(policyHolderVO.getMemberId()))
			{
				valdtPolicyChekFlg = true;
			}
			if(StringUtils.isNotBlank(empAddressVO.getAddressLine1())
			   || StringUtils.isNotBlank(policyVO.getEmployerVO().getEmployerName()) 
			   || StringUtils.isNotBlank(empAddressVO.getCityName())  
			   || StringUtils.isNotBlank(empAddressVO.getStateCode()) 
			   || StringUtils.isNotBlank(empAddressVO.getZipCode5())
			   || StringUtils.isNotBlank(empAddressVO.getZipCode4()))
			{
					valdtPolicyChekFlg = true;
				
			}
			if (StringUtils.isNotBlank(empAddressVO.getAddressLine2()) )
			{
				valdtPolicyChekFlg = true;
			}
			PhoneVO empPhoneVO = empCommonEntityVO.getPhoneVO();
			if (StringUtils.isNotBlank(empPhoneVO.getPhoneNumber()) || 
					StringUtils.isNotBlank(empPhoneVO.getPhoneExtension()))
			{
				valdtPolicyChekFlg = true;
			}
			if (StringUtils.isNotBlank(empCommonEntityVO.getFaxVO().getPhoneNumber()) ||
				StringUtils.isNotBlank(empCommonEntityVO.getEaddressVO().getEaddressText()))
			{
				valdtPolicyChekFlg = true;
			}
			if(getTPLPolicyDataBean().getPolicyPeriodCoverageList().size()>0)
			{
				valdtPolicyChekFlg = true;
			}
			if(getTPLPolicyDataBean().getPolicyHolderCoverageList().size()>0)
			{
				valdtPolicyChekFlg = true;
			}
			if(StringUtils.isNotBlank(policyHolderVO.getPolicyHolderFirstName()) 
			   || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderLastName())
			   || StringUtils.isNotBlank(policyHolderVO.getDateOfBirth())
			   || StringUtils.isNotBlank(policyHolderVO.getDateOfDeath())
			   || StringUtils.isNotBlank(policyHolderVO.getIndividualPolicyHolderID())
			   || StringUtils.isNotBlank(policyHolderVO.getPolicyHolderSSN()))
			{
				valdtPolicyChekFlg = true;
			}
			PolicyCommonEntityVO policyHoldCommonEntityVO = policyHolderVO.getPolicyHolderCommonEntityVO();
			AddressVO polcyHoldAddressVO = policyHoldCommonEntityVO.getAddressVO();
			if(StringUtils.isNotBlank(polcyHoldAddressVO.getAddressLine1())
			   || StringUtils.isNotBlank(polcyHoldAddressVO.getAddressLine2())
			   || StringUtils.isNotBlank(polcyHoldAddressVO.getCityName())
			   || StringUtils.isNotBlank(polcyHoldAddressVO.getZipCode4())
			   || StringUtils.isNotBlank(polcyHoldAddressVO.getZipCode5())
			   || StringUtils.isNotBlank(polcyHoldAddressVO.getCountyCode())
			   || StringUtils.isNotBlank(polcyHoldAddressVO.getStateCode())
			   || StringUtils.isNotBlank(policyHoldCommonEntityVO.getEaddressVO().getEaddressText())
			   || StringUtils.isNotBlank(policyHoldCommonEntityVO.getPhoneVO().getPhoneNumber())
			   || StringUtils.isNotBlank(policyHoldCommonEntityVO.getPhoneVO().getPhoneExtension())
			   || StringUtils.isNotBlank(policyHoldCommonEntityVO.getFaxVO().getPhoneNumber()))
			{
				valdtPolicyChekFlg = true;
			}
			if(logger.isInfoEnabled()) {
				logger.info(" valdtPolicyChekFlgvaldtPolicyChekFlg>>>>>>"+valdtPolicyChekFlg);

			}

			return valdtPolicyChekFlg;
		}
		
		/**
		 * This method is used in IPC of Hipp Portlet
		 * @return emptyString
		 */
		public String openDocumentRepositoryHippForIPC(){
			String emptyString="";
			logger.info("Begin --openDocumentRepositoryForIPC");
			TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
			tplHIPPDataBean.setOpenDocumentRepositoryCompIDHipp("hippcaseTab:hippCaseInfo:attachments:TPLADMCL101");
			return emptyString;
		}
		//ESPRD00800539
		 /** This holds the attach results List vo. */
	    private String tplHIPPEDMSSearchResultsList;
	    
		public String getTplHIPPEDMSSearchResultsList()
		{
		    logger.debug("Entering into getTplHIPPEDMSSearchResultsList");
		   	TPLHIPPDataBean tplHIPPDataBean = TPLHIPPConversionHelper.getTPLHIPPDataBean();
		   	List edmsResults = null;
			EDMSQuickSearchProcessDelegate quickSearchProcessDelegate = null;
			Map fileinfoMap = null;
			String cascadeStr = null;
			String fileContent = null;
			Set keySet= null;
			String fileExtn = null;
		    FacesContext fc = FacesContext.getCurrentInstance();
			if (fc.getExternalContext().getRequestMap() != null)
			{   
			     Object object = fc.getExternalContext().getRequestMap().get("logCREDMSSearchResultsList");
	              if (object != null)
	              {
	            	 EnterpriseEDMSSearchResultsVO enterpriseEDMSSearchResultsVO = new EnterpriseEDMSSearchResultsVO();
				     try
				     {
				    	quickSearchProcessDelegate = new EDMSQuickSearchProcessDelegate();
				        BeanUtils.copyProperties(enterpriseEDMSSearchResultsVO,object);
				        if (enterpriseEDMSSearchResultsVO != null)
				        {
				        	//List existingAttachments = tplHIPPDataBean.getAttachmentVOList();
	                        List tempAttachList = tplHIPPDataBean.getAttachmentVOList();
	                        List enterpriseEDMSSearchResultsVOList = enterpriseEDMSSearchResultsVO.getSearchResultsList();
        	                if(enterpriseEDMSSearchResultsVOList!=null && !enterpriseEDMSSearchResultsVOList.isEmpty()){
	                        	Iterator itEnterpriseEDMSSearchResults = enterpriseEDMSSearchResultsVOList.iterator();
	                        	URLGenerator urlGenerator = null;
	                        	while (itEnterpriseEDMSSearchResults.hasNext())
	                        	{	
	                        		EDMSQuickSearchResultsVO eDMSQuickSearchResultsVO = new EDMSQuickSearchResultsVO();
	                        		Object obj = itEnterpriseEDMSSearchResults.next();
	                        		BeanUtils.copyProperties(eDMSQuickSearchResultsVO, obj);
	                        		boolean isExists = false;
	                        		if (eDMSQuickSearchResultsVO != null)
	                        		{
	                        			if (tempAttachList != null && !tempAttachList.isEmpty() 
	                        					&& eDMSQuickSearchResultsVO.getPageId() != null
	                        					&& !eDMSQuickSearchResultsVO.getPageId().equals("")) {
	                        				Iterator it = tempAttachList.iterator();
	                        				while (it.hasNext())
	                        				{
	                        					AttachmentsVO attachVO = (AttachmentsVO) it.next();
	                        					if (attachVO.getAttachmentPageID()!=null  
	                        						 && eDMSQuickSearchResultsVO.getPageId().equals(attachVO.getAttachmentPageID())){
	                        						isExists = true;
	                        						break;
	                        					}
	                        				}
	                        			}
	                        			if (isExists){
	    									setErrorMessage("err-duplicate-attachment");
	    								} else {
	    									AttachmentsVO attachmentsVO = new AttachmentsVO();	
	    									attachmentsVO.setDescription(eDMSQuickSearchResultsVO.getDescription());
	    									attachmentsVO.setFileName(eDMSQuickSearchResultsVO.getFileName());
	    									fileinfoMap = quickSearchProcessDelegate.getSDRCasecadeStructure(eDMSQuickSearchResultsVO.getPageId());
	    									//System.out.println("--fileinfoMap:"+fileinfoMap);
	    									if(fileinfoMap!=null)
	    									{	
	    										cascadeStr = (String)fileinfoMap.get("CASCADE");
											// MT Platform Code Merge (Merge 1 - Iteration1) Starts        
	    									//	cascadeStr = "ACS_NH/"+cascadeStr;
												/* PMD Violations - P1 Fix - UseStringBufferForStringAppends -- Changed By 424467 Starts */
	    											StringBuffer cascadeBuffer=getStringBuffer();
	    											cascadeBuffer.append("ACS_NH/").append(cascadeStr);
	    											cascadeStr=cascadeBuffer.toString();
	    										/* PMD Violations - P1 Fix - UseStringBufferForStringAppends -- Changed By 424467 Ends */
	    									// MT Platform Code Merge (Merge 1 - Iteration1) ends        

	    										keySet = fileinfoMap.keySet();
	    										Iterator it = keySet.iterator();
	    										while(it.hasNext())	{
	    											fileExtn = (String)it.next();
	    											if(!"CASCADE".equals(fileExtn))	{	
	    												fileContent = (String)fileinfoMap.get(fileExtn);
	    											}	
	    										}
	    										String finalPathToWPS = writeToSan(fileContent.getBytes(), eDMSQuickSearchResultsVO.getFileName());
	    										attachmentsVO.setFinalPath(finalPathToWPS);
	    										attachmentsVO.setCascadeKey(cascadeStr);
	    									}
	    									//Set FileUrl
	    									urlGenerator = new EDMSURLGeneratorImpl();
	    									if (attachmentsVO.getAttachmentPageID() != null) {
	    										attachmentsVO.setFileURL(urlGenerator.getURL(attachmentsVO.getAttachmentPageID()));
	    									}
	    									/** for use on server */
	    									DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
	    									attachmentsVO.setDateAdded(dateFormat.format(new Date()));
	    									attachmentsVO.setDbRecord(true);
	    									attachmentsVO.setAddedBy(getUserID());
	    									//existingAttachments.add(attachmentsVO);
	    									tplHIPPDataBean.getAttachmentVOList().add(attachmentsVO);
	                        			}
	                        		}
	                        	}
	                        }
	                       // System.out.println("existingAttachments:"+existingAttachments);
				            fc.renderResponse();
	                    }
	                 }
	                 catch (Exception e)
	                 {
	                	logger.debug(e.getMessage(), e);
	                 }
	                 fc.getExternalContext().getRequestMap().remove("logCREDMSSearchResultsList");
	              }
	              else
	              {
	            	 logger.debug("Not an instance");
	              }
	        }
	        return InternalMessageConstants.INTERNAL_SUCCESS;
        }
		
		private StringBuffer getStringBuffer(){
			return new StringBuffer();
		}
		 
		public void setTplHIPPEDMSSearchResultsList(String tplHIPPEDMSSearchResultsList)
		{
		     this.tplHIPPEDMSSearchResultsList = tplHIPPEDMSSearchResultsList;
		}
		//ESPRD00843680-ESPRD00843674
		private Date getDateOnly(Date date) {
			 Date dateOnly = null;
			 if (date != null) {
				 java.util.Calendar cal = java.util.Calendar.getInstance();
				 cal.setTime(date);
				 cal.set(java.util.Calendar.HOUR_OF_DAY, 0);
				 cal.set(java.util.Calendar.MINUTE, 0);
				 cal.set(java.util.Calendar.SECOND, 0);
				 cal.set(java.util.Calendar.MILLISECOND, 0);
				 dateOnly = cal.getTime();
			 }
			 return dateOnly;
		}
		private void logError(final String message,final Exception e) {
			if(logger.isErrorEnabled()){
			logger.error(message,e);
			}
			
		}
		
}
